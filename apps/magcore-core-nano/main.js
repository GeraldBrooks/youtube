!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";var o=n(4);e.exports={coreList:[],windowList:[],windowToCoreMap:{},core:{},getInstance:function(e){var t,n=this.windowList.indexOf(e);return-1===n?((t=new o).addListener("hide",function(){this.applicationState.visible=!1}),t.addListener("show",function(){this.applicationState.visible=!0}),t.addListener("focus",function(){this.applicationState.focused=!0}),t.addListener("blur",function(){this.applicationState.focused=!1}),Object.defineProperty(t,"index",{value:this.coreList.push(t)-1,configurable:!1,enumerable:!1,writable:!1}),this.windowToCoreMap[this.windowList.push(e)-1]=t.index):t=this.coreList[this.windowToCoreMap[n]],window.top.coreList=this.coreList,window.top.windowList=this.windowList,window.top.windowToCoreMap=this.windowToCoreMap,t},destroy:function(e){var t,n,o,i=this.windowList.indexOf(e),a=0;if(-1!==i){for(t=this.coreList[this.windowToCoreMap[i]].plugins,o=(n=Object.keys(t)).length;a<o;)"function"==typeof t[n[a]].destroy&&t[n[a]].destroy(),++a;return this.coreList[this.windowToCoreMap[i]]=void 0,this.windowToCoreMap[this.windowToCoreMap[i]]=void 0,this.windowList[i]=void 0,!0}return!1}}},function(e,t,n){"use strict";var o=n(5),i=n(13),a={},s={basePath:"",load:null,getPluginStorage:function(e){return a[e].storage}};function r(e,t,n){var o;a[e.name]&&a[e.name].instance?(n&&n(null,a[e.name]),t(null,a[e.name])):a[e.name]&&a[e.name].loading?(null===a[e.name].dependents&&(a[e.name].dependents=[]),a[e.name].dependents.push(function(){n&&n(null,a[e.name]),t(null,a[e.name])})):(a[e.name]={loading:!0,instance:null,dependents:null,name:e.name,path:e.path,storage:new i(e.name),packageName:e.packageName},o=new XMLHttpRequest,e.url||(e.url=s.basePath+"/"+e.packageName+"/"+e.version+"/"+(e.main||"index.js")),o.open("GET",e.url,!0),o.onload=function(){var o,i,s={exports:{},id:""};if(new Function("module","exports","require",this.responseText+"//# sourceURL=file.js")(s,s.exports,function(){}),window.core.plugins[e.name]=a[e.name].instance=s.exports,a[e.name].loading=!1,n&&n(null,a[e.name]),null!==a[e.name].dependents&&a[e.name].dependents.length>0)for(o=a[e.name].dependents;i=o.shift();)i();t(null,a[e.name])},o.send())}s.load=function(e){var t=[];e.dependencies?(e.dependencies=Object.keys(e.dependencies),e.dependencies.forEach(function(n){window.core.packageMap[n]&&t.push(function(t){!function e(t,n,i){var a,s=null;(t=window.core.packageMap[t]).dependencies&&(s=Object.keys(t.dependencies)),null!==s&&s.length>0?(a=[],s.forEach(function(t){window.core.packageMap[t]&&a.push(function(n){e(t,n,i)})}),o(a,function(){r(t,n,i)})):r(t,n,i)}(n,t,e.dependencyReady)})}),o(t,function(t,n){e.done&&e.done(t,n)})):e.done&&e.done()},e.exports=s},function(e,t,n){"use strict";function o(){this.events={}}o.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function o(){n.removeListener(e,o),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},o.prototype.constructor=o,e.exports=o},function(e,t,n){"use strict";var o,i,a,s=-1,r=n(22),c=n(15),p=n(7),l=n(8),u=n(6),d=n(4),h=null,f=null,w=null,m=null,g=0,y=function(e){var t,n,o=T.apps[this.pid],i=o.params;switch(T.focusedApp&&(t="osd"===T.focusedApp.config.type?T.focusedApp:null),e){case"exit":T.close(o),-1!==(n=T.runHistory.indexOf(o.config))&&T.runHistory.splice(n,1);break;case"stop":T.close(o);break;case"app:ready":i.visible&&l.active&&(l.hide(),T.show(o),t&&t.$iframe.contentWindow.focus()),o.core.emit("app:ready"),T.runHistory=T.runHistory.filter(function(e){return e.url!==i.config.url}),T.home&&i.config.home?T.runHistory.push(T.home.config):T.runHistory.push(i.config),i.onready&&i.onready();break;case"hide":T.hideAll()}},v=function(e){var t,n=T.apps[this.pid],i=n.params;switch(e){case"hide":-1!==(t=T.osdStack.indexOf(n))&&T.osdStack.splice(t,1),n.$iframe.style.zIndex="",T.osdStack.forEach(function(e,t){e.$iframe.style.zIndex=t+frames.length+1}),n.core.applicationState.visible=!1,n.$iframe.hide(),document.activeElement===document.body&&T.focusedApp!==T.topApp&&T.topApp&&(T.focusedApp=T.topApp,T.focusedApp.$iframe.contentWindow.focus());break;case"app:ready":i.onready&&i.onready();break;case"show":l.active&&(window.splash.style.zIndex=window.frames.length),-1===(t=T.osdStack.indexOf(n))?T.osdStack.push(n):(T.osdStack.splice(t,1),T.osdStack.push(n)),T.osdStack.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),n.core.applicationState.visible=!0,n.$iframe.show(),"auth"===i.config.type&&(T.launcher||(T.launcher=n));break;case"focus":T.topApp?T.topApp.core.emit("blur"):T.launcher&&T.launcher.core.emit("blur"),n.core.applicationState.focused=!0,n.$iframe.contentWindow.focus(),T.focusedApp=n;break;case"blur":!function(e){var t;if(T.osdStack.length>0&&!T.launcher.$iframe.isVisible&&(t=T.osdStack[T.osdStack.length-1])!==e&&t.$iframe.style.height===o)return t.$iframe.contentWindow.focus(),T.focusedApp=t,e.core.applicationState.focused=!0,void T.focusedApp.core.emit("focus");T.topApp?(T.osdStack=[],T.topApp.$iframe.contentWindow.focus(),T.focusedApp=T.topApp,T.topApp.core.emit("focus")):T.launcher&&(T.osdStack=[],T.launcher.$iframe.contentWindow.focus(),T.focusedApp=T.launcher,T.launcher.core.emit("focus"))}(n)}},b=function(e){var t,o;switch(o=(t=-1===this.pid?T.launcher:T.apps[this.pid]).params,e){case"exit":T.close(t),"launcher"===o.config.type&&n(9).exit();break;case"hide":T.hide(t,{source:d.prototype.SOURCES.SYSTEM});break;case"show":T.show(t,{source:d.prototype.SOURCES.SYSTEM});break;case"app:ready":this.emit("app:ready"),o.onready&&o.onready()}},S=function(e){var t,n,o,i,a=T.topApp||T.launcher,s=0;for((t=document.createEvent("Event")).initEvent(e.name,!!e.bubbles,!!e.cancelable),o=(n=(n=Object.keys(e)).filter(function(e){return"bubbles"!==e&&"cancelable"!==e})).length;s<o;)t[n[s]]=e[n[s]],++s;if("click"===e.name){if(!(i=a.$iframe.contentDocument.elementFromPoint(e.clientX,e.clientY)))return}else i=a.$iframe.contentWindow;i.dispatchEvent(t)},k=function(e){location.href=e},E=function(e,t){switch(e.storage=new e.constructor.prototype.Storage(t.config.packageName||t.config.name),Object.defineProperty(e,"state",{get:function(){return e.storage.getItem("state")},set:function(t){e.storage.setItem("state",t)}}),t.config.type){case"app":e.call=y;break;case"osd":case"auth":e.system=!0,e.config=p.data,e.redirectTo=k,e.call=v,e.dispatchEventToActiveApp=S;break;default:e.system=!0,e.config=p.data,e.redirectTo=k,e.call=b}},T={topApp:null,stack:[],daemons:[],runHistory:[],apps:{},launcher:null,launchers:[],home:null,homeConfig:null,focusedApp:null,applicationToShow:!1,onDoneCallback:null,osdStack:[],show:function(e,t){var n,o=e.config.type;if(t=t||{source:d.prototype.SOURCES.LAUNCHER},this.topApp!==e)switch(o){case"osd":l.active&&l.hide(),-1===(n=T.osdStack.indexOf(e))?T.osdStack.push(e):(T.osdStack.splice(n,1),T.osdStack.push(e)),T.osdStack.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),e.$iframe.show();break;case"app":this.launcher&&(this.launcher.$iframe.hide(),this.launcher.core.emit("hide"),this.launcher.core.emit("blur")),h.style.zIndex=window.frames.length;case"system":"system"===o&&(h.style.zIndex=0,e.$iframe.style.zIndex=window.frames.length),-1!==(n=this.stack.indexOf(e))&&this.stack.splice(n,1),this.stack.push(e),this.topApp&&this.topApp!==e&&("function"==typeof this.topApp.core.emit&&this.topApp.core.emit("hide",t),this.topApp&&this.topApp.$iframe.hide()),this.topApp=e,e.$iframe.contentWindow.focus(),T.focusedApp=e,l.active&&l.hide(),e.$iframe.show(),e.core&&"function"==typeof e.core.emit&&(e.core.emit("show",t),e.core.emit("focus",t));break;case"launcher":"launcher"===o&&(T.topApp=null,window.core.pid=e.core.pid),T.osdStack.forEach(function(e){"auth"===e.config.type&&(e.$iframe.style.zIndex=0)});default:e.$iframe.contentWindow.focus(),e.core.emit("focus",t),e.core.emit("show",t),T.focusedApp=e,e.$iframe.show()}},hide:function(e,t){var n=e.config.type;switch(t=t||{source:d.prototype.SOURCES.LAUNCHER},e.$iframe.hide(),e.core&&"function"==typeof e.core.emit&&e.core.emit("hide",t),n){case"app":case"system":this.topApp===e&&(this.topApp=null),this.stack.pop(),this.stack.length>0?this.show(this.stack.pop(),t):this.show(this.launcher,t)}},close:function(e,t){var n,o,i=p.data.apps.length,a=0;if(void 0===e)t||this.show(this.launcher);else if("app"===e.config.type){for(e===this.topApp?(this.topApp=null,this.stack.pop()):(o=this.stack.indexOf(e),this.stack.splice(o,1)),e.core.emit("exit"),w.lastRoute&&w.lastRoute.core===e.core&&T.hide(T.apps[w.lastRoute.intent.receiver]);a<i;){if(p.data.apps[a].packageName===e.config.packageName){p.data.apps[a]=JSON.parse(JSON.stringify(p.data.apps[a])),p.data.apps[a].pid=void 0,w.replaceActionsConfig(e.config,p.data.apps[a]);break}++a}for(f.destroy(e.window),h.contentDocument.body.removeChild(e.$iframe),i=(n=Object.keys(T.apps)).length,a=0;a<i;){if(T.apps[n[a]]===e){T.apps[n[a]]=null;break}++a}0,e.config.pid=void 0,e=null,t||this.reset(e)}else this.reset(e)},reset:function(e){for(;this.stack.length;)(e=this.stack.pop()).$iframe.hide(),e.core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER});this.topApp=null,h.style.zIndex=0,this.show(this.launcher)},runApp:function(e,t){var o,a={},d=-1,f=null;if(e.config.legacy)return o="referrer="+encodeURIComponent(p.data.options.stalkerHost+p.data.options.stalkerLoaderPath),-1===e.config.url.indexOf("?")?location.href=e.config.url+"?"+o:location.href=e.config.url+"&"+o,null;if("app"===e.config.type){if(function(e,t,n){var o=p.data.apps.length,i=0;for(;i<o;){if(p.data.apps[i].packageName===e.config.packageName){if(p.data.apps[i].locked&&window.core.accessControl&&!e.omitLock)return!(!e.ignoreAccessControl||(e.ignoreAccessControl=!1,T.runHistory.forEach(function(t){t.packageName===e.config.packageName&&(e.ignoreAccessControl=!0)}),!e.ignoreAccessControl))||(m=!0,setTimeout(function(){window.core.accessControl.request(function(n){n||(p.data.apps[i].locked=!1,T.runApp(e,t),p.data.apps[i].locked=!0),m=!1})},0),!0);e.config=p.data.apps[i],void 0!==p.data.apps[i].pid&&(T.apps[e.config.pid]?n.showSplash=!1:e.config.pid=void 0),s>0&&T.runHistory.length>=s&&T.close(T.apps[T.runHistory[T.runHistory.length-1].pid]);break}++i}return t&&u.events["run:app"]?(T.launcher.$iframe.hide(),T.launcher.core.emit("hide"),T.launcher.core.emit("blur"),T.applicationToShow=e,u.emit("run:app",{done:function(){T.applicationToShow&&(e.omitLock=!0,T.runApp(e))},app:p.data.apps[i]}),!0):n.showSplash?(T.launcher&&(T.launcher.$iframe.hide(),T.launcher.core.emit("hide"),T.launcher.core.emit("blur")),l.show(p.data.apps[i]),T.topApp&&(T.topApp.$iframe.hide(),T.topApp.core.emit("hide",{source:window.core.SOURCES.SYSTEM})),!1):(T.runHistory=T.runHistory.filter(function(t){return t.packageName!==e.config.packageName}),T.runHistory.push(e.config),T.show(T.apps[e.config.pid]),e.onload&&e.onload(T.apps[e.config.pid]),e.onready&&e.onready(T.apps[e.config.pid]),!0)}(e,t,{showSplash:!0}))return null}else e.config.metrics&&e.config.metrics[i]&&(a=e.config.metrics[i]);return f={$iframe:r({url:e.config.url,type:e.config.type,visible:!1,$container:"app"===e.config.type?h.contentDocument.body:window.document.body,width:a.width,height:a.height,top:a.top,left:a.left,onload:function(){var t;this.contentWindow.addEventListener("keydown",function(e){var t;0!==e.keyCode&&(9===e.keyCode&&e.preventDefault(),t="keydown:"+n(16)(e),c(t,e))}),f.window=this.contentWindow,f&&f.window&&(t=n(0).getInstance(f.window),f.core=t,f.window.pid||(f.window.pid=d),void 0===t.call&&E(t,e),t.pid=d,t.resolveDependencies(e.config,function(){t.ready=!0,e.config.home&&(t.applicationState.home=!0),t.emit("load"),e.onload&&e.onload(f)}))},onerror:function(t){T.close(f),setTimeout(function(){e.visible&&l.active&&l.hide()},5e3),e.onerror&&e.onerror(t)}}),window:null,core:null,config:e.config,params:e},T.home&&e.config.home&&(T.home=f),f.core=n(0).getInstance(f.$iframe.contentWindow),"launcher"!==e.config.type&&(d=g,++g,T.apps[d]=f),e.config.pid=d,f},hideAll:function(){var e,t,n,o,i=[];for(T.onDoneCallback=null,T.applicationToShow=null,e=(t=Object.keys(T.apps)).length-1,l.active&&l.hide();e>-1;)T.apps[t[e]]&&(n=T.apps[t[e]].config.type,o=T.apps[t[e]].$iframe.isVisible,T.apps[t[e]].core&&("osd"===n||"auth"===n?o&&T.apps[t[e]].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER}):"app"===n?(i.push(T.apps[t[e]]),o&&T.apps[t[e]].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER})):o&&(T.apps[t[e]].$iframe.hide(),T.apps[t[e]].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER})))),--e;for(e=0;e<i.length;)(o=i[e].$iframe.isVisible)&&(i[e].$iframe.hide(),i[e].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER})),++e;if(h.style.zIndex=0,T.topApp=null,m){if(T.launcher.$iframe.isVisible)return;T.show(T.launcher),T.launcher.core.emit("focus")}else if(T.home){if(T.home.config.locked)return void(T.launcher.core.applicationState.visibile||(T.show(T.launcher),T.launcher.core.emit("focus")));T.launcher.$iframe.isVisible?-1===T.runHistory.indexOf(this.home.config)?(T.show(T.launcher),T.launcher.core.emit("focus")):(this.launcher&&this.launcher.$iframe.hide(),T.show(T.home)):(T.show(T.launcher),T.launcher.core.emit("focus"))}else T.launcher&&(T.launcher.core.applicationState.focused||T.launcher.core.emit("focus"),T.show(T.launcher))},init:function(){f=n(0),w=n(10),s=p.data.options.maxAppsCounter||s,h=r({$container:document.body,visible:!0,onload:function(){this.contentDocument.head.appendChild(this.contentDocument.createElement("style")).textContent="html, body{ background: transparent !important; overflow: hidden; margin: 0; padding:0; width: "+a+"px; height: "+i+"px; } iframe { position: absolute; top: 0; left: 0; border: none; outline: none; overflow: hidden;margin: 0; padding: 0; width: "+a+"px; height: "+i+"px; }",this.contentWindow.parent=null,this.contentWindow.opener=null,this.contentWindow.getCoreInstance=function(e){return n(0).getInstance(e)}}})},lockApp:function(e,t){var n=window.core.storage.getItem("config")||{},o=n.apps||[],i=p.data.apps.length,a=0,s=0;window.core.accessControl?window.core.accessControl.request(function(r){if(!r){for(;a<i;){if(p.data.apps[a].packageName===e.packageName){for(s=a,a=0,i=o.length,p.data.apps[s].locked=!p.data.apps[s].locked;a<i;){if(p.data.apps[s].packageName===o[a].packageName||p.data.apps[s].name===o[a].name){o[a]=p.data.apps[s];break}++a}a===i&&o.push(p.data.apps[s]);break}++a}n.apps=o,window.core.storage.setItem("config",n)}t(r)}):t(!0)},setHomeApp:function(e){null===this.home&&(e.home=!0,T.homeConfig=e)},killAll:function(e){Object.keys(T.apps).forEach(function(t){var n=T.apps[t];null!==n&&(n.window===e?T.launcher=n:(n.core.emit("exit"),f.destroy(n.window),"app"===n.config.type?h.contentDocument.body.removeChild(n.$iframe):document.body.removeChild(n.$iframe)))}),this.topApp=this.focusedApp=T.launcher,this.home=null,T.apps={},this.runHistory.splice(0),T.osdStack.splice(0),this.stack.splice(0),n(14).forceFlush()},setLauncher:function(e){T.home=null,Object.keys(T.apps).forEach(function(t){T.apps[t]&&T.apps[t].window===e&&(T.launcher=T.apps[t])})}};switch(i=screen.height){case 480:case 576:case 720:case 1080:break;default:a=1280,i=720}o=i+"px",e.exports=T},function(e,t,n){"use strict";var o=n(2),i=n(5),a={},s=[],r=document.body.appendChild(document.createElement("div")),c=function(e){e.timeout=e.timeout||5e3,e.buttons&&e.buttons[0]&&e.buttons[0].click?(e.buttons[0].click(),Array.isArray(s)&&s.length>0&&c(s.unshift())):(r.innerText=e.title,r.style.display="",setTimeout(function(){r.style.display="none",Array.isArray(s)&&s.length>0&&c(s.unshift())},e.timeout))};function p(e){o.call(this,e),this.plugins={},this.applicationState={focused:!1,visible:!1,home:!1}}r.style.display="none",r.style.textAlign="center",r.style.background="#000",r.style.color="#fff",r.style.lineHeight="72px",r.style.height="auto",r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.width="100%",r.style.zIndex="9999",p.prototype=Object.create(o.prototype),p.prototype.constructor=p,p.prototype.theme={path:null},p.prototype.environment=n(21),p.prototype.ready=!1,p.prototype.emit=function(){try{o.prototype.emit.apply(this,arguments)}catch(e){0}},p.prototype.resolveDependencies=function(e,t){var o=this,a=[];o.ready||n(1).load({dependencies:e.dependencies,done:function(s,r){r&&r.length>0&&r.forEach(function(t){a.push(function(i){t.instance.onAppInit({app:e,options:t.options,storage:n(1).getPluginStorage(t.name),path:t.path},function(e,n){o.plugins[t.name]=n,i(e,n)})})}),i(a,t)}})},p.prototype.notify=function(e){0===s.length?c(e):s.push(e)},Object.defineProperty(a,"INTENT",{enumerable:!0,configurable:!1,writable:!1,value:1}),Object.defineProperty(a,"LAUNCHER",{enumerable:!0,configurable:!1,writable:!1,value:2}),Object.defineProperty(a,"SYSTEM",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(p.prototype,"SOURCES",{enumerable:!0,configurable:!1,writable:!1,value:a}),Object.defineProperty(a,"intent",{enumerable:!0,configurable:!1,writable:!1,value:1}),Object.defineProperty(a,"launcher",{enumerable:!0,configurable:!1,writable:!1,value:2}),Object.defineProperty(a,"system",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(p.prototype,"sources",{enumerable:!0,configurable:!1,writable:!1,value:a}),p.prototype.apiVersion=parseInt(window.gSTB.Version().split(";")[0].split(":")[1],10),window.extendCorePrototype=function(e,t){"notify"===e&&(c=s=null,r.parentNode.removeChild(r)),p.prototype[e]=t},e.exports=p},function(e,t,n){"use strict";e.exports=function(e,t){var n=!1,o=0,i=[];e=Array.isArray(e)?e:[],"function"!=typeof t&&(t=function(){}),0===e.length?t(null,i):e.forEach(function(a,s){var r=function(a,r){if(!n){if(a)return n=!0,void t(a);if(i[s]=r,++o===e.length)t(null,i);else if(o>e.length)throw Error("done callback invoked more than one time in function with "+s+" position in tasks array")}};0===a.length?r(null,a()):a(r)})}},function(e,t,n){"use strict";var o=new(n(2));e.exports=o},function(e,t,n){"use strict";var o,i,a=n(5),s={model:null,version:null},r=!0,c=0,p=1,l=2;function u(e,t){var n,i,a=t.appsPackagesPath,s=Object.keys(e.dependencies||[]),c=s.map(function(t){return e.dependencies[t]}),p=[],l=[];for(s.length>0&&(e.dependencies={},s.forEach(function(t,n){-1!==t.indexOf("plugin")&&(e.dependencies[t]=c[n])})),e.uris=e.uris||{},a=-1===t.appsPackagesPath.indexOf("://")?t.stalkerHost+"/"+t.appsPackagesPath:t.appsPackagesPath,function(e,t,n){var o=[];"string"==typeof e.url&&"plugin"!==e.type||("plugin"===e.type?e.url&&-1!==e.url.indexOf(".js")?(o.push(e.url),e.path=e.url+"/../"):(o.push(n),o.push(e.packageName),r&&o.push(e.version),o.push(e.uris.app||""),e.path=o.join("/"),o.push(e.uris.entry||"index.js")):e.uris.entry&&-1!==e.uris.entry.indexOf("://")?o.push(e.uris.entry):e.uris.app&&e.uris.app.indexOf("://")>-1?(o.push(e.uris.app),o.push(e.uris.entry)):(o.push(t),o.push(e.packageName),r&&o.push(e.version||""),o.push(e.uris.app||"app"),o.push(e.uris.entry||"index.html")),e.url=o.join("/"))}(e,a,t.pluginsPath),e.options&&(Object.keys(e.options).forEach(function(t){p.push(t+"="+e.options[t])}),p.length>0&&(e.url+="?",e.url+=p.join("&"))),n=(l=e.url.split("/")).shift()+"/";0===l[0].length;)n+="/",l.shift();if(e.url=n+l.filter(Boolean).join("/"),"plugin"!==e.type){if(e.uris.icons=e.uris.icons||{},e.uris.icons[o])for(i in e.uris.icons=e.uris.icons[o],e.uris.icons)-1===i.indexOf("://")&&(l.splice(0),e.uris.app.indexOf("://")>-1?(l.push(e.uris.app),l.push(e.uris.icons[i])):(l.push(a),l.push(e.packageName),r&&e.version&&l.push(e.version),e.uris.app&&l.push(e.uris.app),l.push(e.uris.icons[i])),e.uris.icons[i]=l.join("/"));e.colors=e.colors||{},e.colors.splashFont=e.colors.splashFont||"#fff",e.colors.splashBackground=e.colors.splashBackground||"#333"}return e.icons=e.icons||{},e}function d(e){if("*"!==e){if("*"!==(e=e.split("."))[c]&&Number(e[c])!==s.version[c])return!1;if("*"!==e[p])return Number(e[p])===s.version[p]&&("*"===e[l]||Number(e[l])===s.version[l])}return!0}function h(e,t){var n,o,a,r;if(e.platforms){if(r=t||s.model,o=0,a=(n=Object.keys(e.platforms)).length,void 0!==e.platforms["exclude"])return void 0===e.platforms["exclude"][r]||("object"==typeof e.platforms["exclude"][r]?h({platforms:{exclude:e.platforms["exclude"][r]}},i):!d(e.platforms["exclude"][r]));for(;o<a;){if(n[o]===r){if("object"==typeof e.platforms[n[o]])return h({platforms:e.platforms[n[o]]},i);if(d(e.platforms[n[o]]))return!0}++o}return!1}return!0}switch(s.version=window.gSTB.GetDeviceImageVersionCurrent().split("-")[0].split(".").map(Number),s.model=top.gSTB.GetDeviceModelExt?top.gSTB.GetDeviceModelExt():top.gSTB.GetDeviceModel(),i=top.gSTB.GetDeviceModel(),o=screen.height){case 480:case 576:case 720:case 1080:break;default:o=720}e.exports={systemSettings:{},settings:{},environment:{},data:{},url:null,load:function(e,t){n(27).languages;var i,s=this;i=e.config?e.config:"config.json",this.url=i,a([function(e){var t=new XMLHttpRequest;t.onload=function(){var n=!1;try{s.data=JSON.parse(t.responseText)}catch(e){n="config url "+i+"<br>config content: "+t.responseText+"<br>response status "+t.status+"<br>"+e}e(n,s.data)},t.onerror=t.ontimeout=function(){e(this.status+": "+this.responseText)},t.open("GET",i,!0),t.send(null)},function(e){e(!1,window.core.storage.getItem("config"))}],function(e,n){e?t(e):function(e,t,n){var i,a,s,c,p,l,d=t?t.apps:[],f={},w=0,m=[];for(e.apps||(e.apps=[]),e.options.ignoreVersions&&(r=!1),-1!==e.options.pluginsPath.indexOf("../")&&((l=document.createElement("a")).href=e.options.pluginsPath,e.options.pluginsPath=l.href),s=e.apps.length;w<s;)h(e.apps[w])&&m.push(e.apps[w]),++w;for(e.apps=m,d.forEach(function(e){f[e.packageName||e.name]=e}),d.splice(0),s=e.apps.length,w=0;w<s;)e.apps[w]=u(e.apps[w],e.options),c=e.apps[w].packageName||e.apps[w].name,f[c]&&(e.apps[w].locked=f[c].locked),++w;if(w=0,e.options.themePath)e.theme=e.options.stalkerHost+e.options.themePath.replace("{screen_height}",o+".css"),e.themeVars=e.themes={},n(null,e);else{for(s=(i=Object.keys(e.themes)).length;w<s;)-1===(a=e.themes[i[w]]).indexOf("://")&&(-1===e.options.appsPackagesPath.indexOf("://")?e.themes[i[w]]=e.options.stalkerHost+"/"+e.options.appsPackagesPath+"/"+i[w]+"/"+a+"/":e.themes[i[w]]=e.options.appsPackagesPath+"/"+i[w]+"/"+a+"/"),++w;e.theme=e.themes[i[0]],(p=new XMLHttpRequest).onload=function(){if(200===this.status&&this.responseText)try{e.themeVars=JSON.parse(this.responseText)}catch(t){e.themeVars={}}n(null,e)},p.open("GET",e.theme+"src/vars.json"),p.send(),p.onerror=p.ontimeout=function(){n(null,e)}}}(n[0],n[1],function(e,n){s.data=n,t()})})}}},function(e,t,n){"use strict";e.exports={init:function(){var e,t=0;if((e=document.getElementsByClassName("app-icon"))[t])for(;t<=3;)e[t].classList.remove("animated"),t++},show:function(e){window.splash.style.backgroundImage="url("+e.uris.icons.logoActive+")",window.splash.style.backgroundColor=e.colors.splashBackground,window.splash.style.zIndex="9999",window.splashAppName.innerText=e.name,window.splashAppName.style.color=e.colors.splashFont,window.splashAppVersion.innerText=e.version,window.splash.classList.remove("invisible"),this.active=!0},hide:function(){window.splash.className="container invisible",window.splash.removeAttribute("style"),this.active=!1},active:!1}},function(e,t,n){"use strict";var o=null;o=n(23),window.top.platformApi=o,e.exports=o},function(e,t,n){"use strict";var o=n(26),i=n(4),a=n(7),s=(n(8),{}),r={},c=null,p=null,l={lastRoute:null,create:function(e,t){return new o(e,t)},route:function(e,t,a){var s,u={runConfig:null,handlerList:null};if(null===p&&(p=n(0)),null===c&&(c=n(3)),e.context){if(void 0===e.context.pid)e.state=o.prototype.STATE_NOT_RESOLVED;else{if(e.state=o.prototype.STATE_RESOLVED,e.receiver=e.context.pid,e.creator=t.pid,this.lastRoute={intent:e,core:t},!a&&r["before:"+e.action]&&(r["before:"+e.action].forEach(function(n){n(e,c.apps[t.pid])}),e.state===o.prototype.STATE_PAUSED))return e.continueCallback=function(){l.route(e,t,!0)},u.handlerList=null,u;e.runnerConfig=c.apps[t.pid].config,c.apps[e.context.pid].core.emit("intent",e,function(n,a){r[e.action]&&r[e.action].forEach(function(n){n(e,c.apps[t.pid])}),n?(e.state=o.prototype.STATE_ERROR_RECEIVED,e.callback&&e.callback(n,a)):(e.state=o.prototype.STATE_CONTEXT_RECEIVED,a.pid=e.context.pid,e.addListener("close",function(n){null!==t&&(n&&(c.close(c.apps[t.pid]),t=null,c.show(c.launcher)),t&&t.pid&&c.apps[t.pid]?c.show(c.apps[t.pid],{source:i.prototype.SOURCES.INTENT,data:{intent:e}}):(t=null,c.show(c.launcher)))}),e.callback)})}return u}if(u.handlerList=this.findIntentHandlers(e),u.handlerList.length>0)if(e.state=o.prototype.STATE_RESOLVED,s=u.handlerList[0],this.lastRoute={intent:e,core:t},void 0!==s.pid&&c.apps[s.pid])if(c.apps[t.pid]?e.runnerConfig=c.apps[t.pid].config:c.focusedApp&&(e.runnerConfig=c.focusedApp.config),c.apps[s.pid].core){if(e.receiver=s.pid,e.creator=t.pid,!a&&r["before:"+e.action]&&(r["before:"+e.action].forEach(function(n){n(e,c.apps[t.pid])}),e.state===o.prototype.STATE_PAUSED))return c.apps[t.pid].$iframe.hide(),e.continueCallback=function(){e.silent&&c.apps[t.pid].$iframe.show(),l.route(e,t,!0)},u.handlerList=null,u;0,c.apps[s.pid].core.emit("intent",e,function(n,a){if(r[e.action]&&r[e.action].forEach(function(n){n(e,c.apps[t.pid])}),(a=a||{}).pid=s.pid,e.silent)return e.callback&&e.callback(n,a),void e.once("close",function(n){var o;if(n){for(c.apps[t.pid]&&c.close(c.apps[t.pid]);c.stack.length;)(o=c.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:i.prototype.SOURCES.SYSTEM});c.show(c.launcher),setTimeout(function(){c.topApp=null},0)}else if(t&&t.pid&&c.apps[t.pid])c.show(c.apps[t.pid],{source:i.prototype.SOURCES.INTENT,data:{intent:e}});else{for(t=null;c.stack.length;)(o=c.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:i.prototype.SOURCES.INTENT,data:{intent:e}});c.show(c.launcher),setTimeout(function(){c.topApp=null},0)}});n?(e.state=o.prototype.STATE_ERROR_RECEIVED,e.callback&&e.callback(n,a)):(e.state=o.prototype.STATE_CONTEXT_RECEIVED,"osd"===c.apps[s.pid].config.type?e.once("close",function(e){e&&t&&t.pid&&c.apps[t.pid]&&(c.topApp&&(c.topApp.$iframe.hide(),c.topApp.core.applicationState.visible=!1,c.topApp.core.applicationState.focused=!1),c.launcher.$iframe.hide(),c.topApp=null,c.show(c.apps[t.pid]))}):(c.launcher.$iframe.isVisible&&c.launcher.$iframe.hide(),c.show(c.apps[s.pid],{source:i.prototype.SOURCES.INTENT,data:{intent:e}}),e.once("close",function(n){var o;if(n){for(c.apps[t.pid]&&c.close(c.apps[t.pid]);c.stack.length;)(o=c.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:i.prototype.SOURCES.SYSTEM});c.show(c.launcher),setTimeout(function(){c.topApp=null},0)}else if(t&&t.pid&&c.apps[t.pid])c.show(c.apps[t.pid],{source:i.prototype.SOURCES.SYSTEM,data:{intent:e}});else{for(t=null;c.stack.length;)(o=c.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:i.prototype.SOURCES.SYSTEM,data:{intent:e}});c.show(c.launcher),setTimeout(function(){c.topApp=null},0)}})),e.callback&&e.callback(!1,a))})}else u.runConfig=s;else u.handlerList=[],u.runConfig=s;else e.state=o.prototype.STATE_NOT_RESOLVED;return u},findIntentHandlers:function(e){var t=[];return s[e.action]&&s[e.action].forEach(function(n){if(e.mime){if(!0!==n.actions[e.action]&&-1===n.actions[e.action].indexOf(e.mime))return void 0}else if(!0!==n.actions[e.action])return void 0;t.push(n)}),t},resolveActionsConfig:function(e){var t,n,o,i;if(e.actions)for(o=(t=Object.keys(e.actions)).length,n=0;n<o;)i=t[n],s[i]=s[i]||[],e.pid=null,s[i].push(e),++n},replaceActionsConfig:function(e,t){var n,o,i,a;if(e.actions)for(i=(n=Object.keys(e.actions)).length,o=0;o<i;)a=n[o],-1!==(o=s[a].indexOf(e))&&(s[a][o]=t),++o},addHook:function(e,t){r[e]=r[e]||[],r[e].push(t)}};window.extendCorePrototype("intent",function(e,t){var n,o,i,s=this,r=l.create(e,t);if(e&&e.action)if(null!==(n=l.route(r,this)).runConfig){if(n.runConfig.pid)for(o=0,i=a.data.apps.length;o<i;){if(a.data.apps[o].url===n.runConfig.url){0,n.runConfig=a.data.apps[o]=JSON.parse(JSON.stringify(a.data.apps[o]));break}++o}0,c.runApp({config:n.runConfig,visible:!0,onready:function(){l.route(r,s)}})}else n.handlerList&&n.handlerList.length;return r}),window.extendCorePrototype("findIntentHandlers",function(e){return JSON.parse(JSON.stringify(l.findIntentHandlers(e)))}),window.addIntentHook=function(e,t){l.addHook(e,t)},n(6).addListener("home",function(){l.lastRoute&&(l.lastRoute.intent.continueCallback=null)}),e.exports=l},function(e,t,n){"use strict";var o=null;o=n(28),e.exports=o},function(e,t,n){"use strict";var o=window.gSTB.GetEnv(JSON.stringify({varList:["Image_Date","Image_Desc","Image_Version","acPassword","accessControl","audio_initial_volume","autoPowerDownTime","auto_framerate","autoupdateURL","autoupdate_cond","betaupdate_cond","controlModel","defaultLedLevel","dvb_type","front_panel","graphicres","hdmi_event_delay","lang_audiotracks","lang_subtitles","language","mount_media_ro","playerClock","settMaster","ssaverDelay","ssaverName","standByMode","standbyLedLevel","startPage","subtitlesColor","subtitlesSize","subtitles_on","syslog_srv","teletext_charset","teletext_on","teletext_opacity","teletext_ratio","ts_endType","ts_exitType","ts_icon","ts_lag","ts_on","ts_path","ts_time","tvsystem","upnp_conf","weather_conf","weather_place","audioPrimaryLanguage","audioSecondaryLanguage","subtitlesPrimaryLanguage","subtitlesSecondaryLanguage","timezone_conf","ntpurl","portal1","portal2","use_portal_dhcp","force_dvi","input_buffer_size","cec","igmp_conf","portal_dhcp","wifi_ssid","wifi_auth","wifi_enc","wifi_psk","wifi_wep_key1","wifi_int_dns","wifi_int_ip","wifi_int_mask","wifi_int_gw","mc_proxy_enabled","mc_proxy_url","lan_noip","ipaddr_conf","dnsip","pppoe_enabled","pppoe_login","pppoe_dns1","update_url","custom_url_hider","useExtPortalsPage","bootstrap_url","update_channel_url","audio_stereo_out_mode","audio_dyn_range_comp","audio_operational_mode","audio_spdif_mode","audio_hdmi_audio_mode","wifi_wep_def_key","wifi_wep_key1","wifi_wep_key2","wifi_wep_key3","wifi_wep_key4","gatewayip","lan_noip","netmask","debug","playerHardwareAcceleration"]}));try{o=(o=JSON.parse(o)).result}catch(e){o={}}o.language=o.language||"en",o.availableLanguages=[],function(){for(var e,t,n=0,i=gSTB.RDir("tempfile read languages_utf8.txt").split("\n"),a={estoninan:{code:"et",name:"Estonian (Eesti keel)"},latvian:{code:"lv",name:"Latvian (LatvieÅ¡u)"}};n<i.length;)""!==i[n]&&(e=i[n].split('"'),t=decodeURIComponent(escape(e[3])),(e=e[1])===a.estoninan.code&&(a.estoninan=!1),e===a.latvian.code&&(a.latvian=!0),o.availableLanguages.push({code:e,name:t})),++n;a.latvian&&o.availableLanguages.push(a.latvian),a.estoninan&&o.availableLanguages.push(a.estoninan)}(),""===o.hdmi_event_delay&&(o.hdmi_event_delay="3",window.gSTB.SetEnv(JSON.stringify({hdmi_event_delay:"3"}))),""===o.defaultLedLevel&&(o.defaultLedLevel=10),""===o.standbyLedLevel&&(o.standbyLedLevel=100),""===o.audioPrimaryLanguage&&(o.audioPrimaryLanguage=o.language),""===o.audioSecondaryLanguage&&(o.audioSecondaryLanguage=o.language),""===o.subtitlesPrimaryLanguage&&(o.subtitlesPrimaryLanguage=o.language),""===o.subtitlesSecondaryLanguage&&(o.subtitlesSecondaryLanguage=o.language),""===o.auto_framerate&&(o.auto_framerate="Disabled"),o.onFocusDebounceTimeout=300,e.exports=o},function(e,t,n){"use strict";var o=null;o=n(14),e.exports=o},function(e,t,n){"use strict";var o,i={},a="applications-storage.json";try{o=gSTB.LoadUserData(a),i=JSON.parse(o)}catch(e){0}function s(e){if(this.store={},Object.defineProperty(this,"prefix",{get:function(){return e+".storage"}}),this.originJSON=i[this.prefix],this.originJSON)try{this.store=JSON.parse(this.originJSON)}catch(e){0,this.originJSON=""}}window.addEventListener("unload",function(){0}),s.prototype.getItem=function(e){return this.store[e]},s.prototype.setItem=function(e,t){var n;try{n=JSON.stringify(t)}catch(e){return}if(this.store[e]=t,(n=JSON.stringify(this.store))!==this.originJSON)return this.originJSON=n,void(i[this.prefix]=this.originJSON)},s.forceFlush=function(){var e=JSON.stringify(i);o===e||window.gSTB.SaveUserData(a,e)},e.exports=s},function(e,t,n){"use strict";var o=null,i=null,a=null,s=null;e.exports=function(e,t){var r,c,p;n(9);for(null===o&&(o=n(0)),null===i&&(i=n(3)),null===a&&(a=n(10)),"keydown:27"===e&&(n(6).emit("home"),i.hideAll()),r=0,c=o.coreList.length;r<c;)(p=o.coreList[r])&&p.system&&p.events[e]&&p.emit(e,t),++r;null===s&&(s=n(11).keydown),"function"==typeof s&&s(e,t)}},function(e,t,n){"use strict";e.exports=function(e){var t;if(0!==e.keyCode)return t=e.keyCode,e.ctrlKey&&(t+="c"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}},function(e,t,n){"use strict";e.exports={debug:window.gSTB.Debug,reboot:function(){window.gSTB.ExecAction("reboot")},reload:function(e){var t,n=window.stbWebWindow.windowId(),o=JSON.parse(window.stbWindowMgr.windowList());for(e=e||"file:///home/web/system/pages/loader/index.html",document.body.style.display="none",top.gSTB.Stop(),top.stbPlayerManager&&"function"==typeof top.stbPlayerManager.reset&&top.stbPlayerManager.reset(),t=0;t<o.result.length;t++)1!==o.result[t]&&o.result[t]!==n&&window.stbWindowMgr.closeWindow(o.result[t]);window.stbStorage.clear(),window.stbWindowMgr.windowLoad(1,e)},runNativeApp:function(e){var t={id:e.applicationId};void 0!==window.stbAppManager&&("function"==typeof window.stbAppManager.isInstalled?window.stbAppManager.isInstalled(e.applicationId)?window.stbAppManager.start(t):window.stbAppManager.start({id:"market://details?id="+e.applicationId}):"function"==typeof window.stbAppManager.start&&window.stbAppManager.start({id:e.applicationId}))}}},function(e,t,n){"use strict";var o,i,a=n(35),s=n(7),r=n(3),c=n(11),p=n(8),l=[],u=0,d=!0,h=!1;function f(e){var t,n;if(d)switch(t=document.createElement("link"),n=window.innerHeight||window.screen.height){case 480:case 576:case 720:case 1080:break;default:n=720}if(e.core.ready){if(e===r.launcher&&r.home)return void f(r.home);p.hide(),e.config.locked&&window.core.accessControl?window.core.accessControl.request(function(t){t?(p.init(),r.show(r.launcher)):(p.init(),r.show(e))}):(p.init(),r.show(e)),r.daemons.forEach(function(e){setTimeout(function(){e.emit("launcher:ready")},0)}),d&&(t.rel="stylesheet",t.href=window.core.theme.path+n+".css",document.head.appendChild(t))}else e.core.once("app:ready",function(){e===r.launcher&&r.home?f(r.home):(p.hide(),e.config.locked&&window.core.accessControl?window.core.accessControl.request(function(t){t?(p.init(),r.show(r.launcher)):(p.init(),r.show(e))}):(p.init(),r.show(e)),r.daemons.forEach(function(e){e.emit("launcher:ready")}),d&&(t.rel="stylesheet",t.href=window.core.theme.path+n+".css",document.head.appendChild(t)))})}for(0,i=s.data.apps.length;u<i;)if("auth"!==(o=s.data.apps[u]).type){switch(o.type){case"launcher":!function(e){r.launchers.length>0?core.notify({title:"Attention you have 2 launchers in config!!!!",icon:"warning"}):l.push(function(t){setTimeout(function(){r.launcher=r.runApp({config:s.data.apps[e],visible:!1,onload:function(){setTimeout(function(){h||t(!1,r.launcher)},0)},onerror:function(e){0}})},0)}),r.launchers.push(s.data.apps[e])}(u);break;case"system":!function(e){l.push(function(t){setTimeout(function(){var n=r.runApp({config:s.data.apps[e],visible:!1,onready:function(){setTimeout(function(){h||t(!1,n)},0)},onerror:function(e){0}})},0)})}(u);break;case"osd":!function(e){setTimeout(function(){r.runApp({config:s.data.apps[e],visible:!1})},0)}(u)}++u}else d=!1,++u;r.homeConfig&&l.push(function(e){setTimeout(function(){r.home=r.runApp({config:r.homeConfig,visible:!1,onready:function(){setTimeout(function(){h||e(null,r.home)},0)}})},0)}),a.parallel(l,function(){c.load&&c.load(),h=!0,r.home?f(r.home):r.launcher?f(r.launcher):(document.body.innerHTML="",document.body.style.backgroundColor="#1B5E20 !important",document.body.style.overflow="scroll",document.body.appendChild(document.createElement("pre")),document.body.firstChild.tabIndex=1,document.body.firstChild.style.cssText="overflow-y: scroll; height: "+window.innerHeight||!1,document.body.firstChild.innerText="Launcher not found in config: Fatal Exception",document.body.firstChild.focus())})},function(e,t,n){"use strict";window.dvbManager=window.top.dvbManager,window.epgManager=window.top.epgManager,window.gSTB=window.top.gSTB,window.pvrManager=window.top.pvrManager,window.stbDownloadManager=window.top.stbDownloadManager,window.stbStorage=window.top.stbStorage,window.stbUpdate=window.top.stbUpdate,window.stbUPnP=window.top.stbUPnP,window.stbWebWindow=window.top.stbWebWindow,window.stbWindowMgr=window.top.stbWindowMgr,window.timeShift=window.top.timeShift,window.stbPlayerManager=window.top.stbPlayerManager;var o=n(20),i=n(0),a=n(3),s=n(10),r=n(7),c=n(29),p=o(document.location.search.substring(1)),l=n(11),u=n(8),d=n(13),h=[],f={};n(9),n(31),n(34),window.MODE_PORTAL=!1,window.MODE_STALKER=!0,window.MODE="MINISTRA",window.extendCorePrototype("Storage",d),l.init(),window.getCoreInstance=window.getCoreInstanse=function(e){var t=i.getInstance(e);return t.widget=c,t.system=!0,t.packages=h,t.packageMap=f,t.taskManager=a,t.updatePackages=function(e){h.splice(0),Object.keys(f).forEach(function(e){delete f[e]}),e.forEach(function(e){f[e.packageName]=e,h.push(e)})},t.reload=function(e){d.forceFlush(),n(17).reload(e)},t.reboot=function(){d.forceFlush(),n(17).reboot()},t},window.system=window.core=window.getCoreInstance(window),window.system.queryParameters=p,window.core.storage=new window.core.constructor.prototype.Storage("magcore-core"),window.addEventListener("keydown",function(e){var t=n(15);0!==e.keyCode&&(9===e.keyCode&&e.preventDefault(),t("keydown:"+n(16)(e),e))}),r.load(p,function(e){var t,o,i,c,l,d=-1,w=null,m={};if(e)return window.splash=document.body.appendChild(document.createElement("div")),window.splash.style.backgroundColor="#1B5E20",window.splash.style.overflow="scroll",window.splash.innerHTML='<pre tabindex="1" style="padding: 40px; overflow-y: scroll; height: '+screen.height+"px; width: "+screen.width+'px;font-family: monospace;font-size: 16px; text-align: left;padding: 10px;color: #fff;">'+e+"\nCore Panic: Fatal Exception</pre>",void window.splash.firstChild.focus();for(d=0;d<r.data.apps.length;d++)if("launcher"===r.data.apps[d].type){window.splash.className="container",u.show(r.data.apps[d]),p.buildDate&&(window.splashAppVersion.innerText=p.buildDate);break}for(d=-1,p.backendHost&&(r.data.options.stalkerHost=p.backendHost,r.data.options.stalkerApiPath="/stalker_portal/api/v3/",r.data.options.stalkerAuthPath="/stalker_portal/auth/token.php",r.data.options.pingTimeout=12e4,r.data.options.stalkerLoaderPath="/stalker_portal/c/",r.data.options.sap=p.backendHost+"/stalker_portal/server/api/sap.php"),core.config=r.data,o=r.data.apps.length-1,n(1).basePath=r.data.options.pluginsPath,window.core.dependencyManager=n(1),window.extendCorePrototype("theme",{path:r.data.theme,vars:r.data.themeVars}),window.extendCorePrototype("themes",r.data.themes);d<o;){switch(++d,c=r.data.apps[d].packageName,r.data.apps[d].type){case"auth":w=r.data.apps[d];break;case"plugin":0,r.data.apps[d].daemon&&(m[r.data.apps[d].packageName]=r.data.apps[d].version);default:h.push(JSON.parse(JSON.stringify(r.data.apps[d]))),f[c]=h[h.length-1]}s.resolveActionsConfig(r.data.apps[d])}if(n(1).load({dependencies:m,dependencyReady:function(e,t){e||"function"!=typeof t.instance.onInit||t.daemonLoaded||(t.daemonLoaded=!0,t.instance.onInit({storage:n(1).getPluginStorage(t.name),options:t.options,path:t.path},function(e,t){e||"object"!=typeof t||"function"!=typeof t.emit||a.daemons.push(t)}))}}),a.init(),null===w)a.daemons.forEach(function(e){e.emit("system:start")}),n(18);else{switch(t=window.innerHeight||window.screen.height){case 480:case 576:case 720:case 1080:break;default:t=720}(i=document.createElement("link")).rel="stylesheet",i.href=window.core.theme.path+t+".css",document.head.appendChild(i),(l=a.runApp({config:w,visible:!0,onready:function(){0},onload:function(){0}})).core.once("ready",function(e){(e=e||{}).stop||(a.daemons.forEach(function(e){try{e.emit("system:start")}catch(e){0}}),l.$iframe.hide(),l.core.emit("hide",{source:window.core.SOURCES.SYSTEM}),n(18))}),l.core.once("show",u.init)}}),window.addEventListener("unload",function(){l.unload&&l.unload()}),window.addEventListener("focus",function(){a.topApp?a.topApp.$iframe.contentWindow.focus():a.focusedApp?a.focusedApp.$iframe.contentWindow.focus():a.launcher&&a.launcher.$iframe.contentWindow.focus()}),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&(a.topApp?(a.topApp.$iframe.contentWindow.focus(),a.topApp.core.emit("focus")):a.focusedApp?(a.focusedApp.$iframe.contentWindow.focus(),a.focusedApp.core.emit("focus")):a.launcher&&(a.launcher.$iframe.contentWindow.focus(),a.launcher.core.emit("focus")))}),window.core.environment.debug&&window.core.addListener("keydown:68ca",function(){var e,t,n,o;e="magcore-core",t="magcore-core-debug",n=new XMLHttpRequest,o=location.protocol+"//"+location.host+location.pathname.replace(e,t)+location.search+location.hash,n.open("GET",o),n.onload=function(){200===this.status&&(location.href=o)},n.send()})},function(e,t,n){"use strict";e.exports=function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t}},function(e,t,n){"use strict";var o;o=n(12),e.exports=o},function(e,t,n){"use strict";var o={url:"about:blank",top:0,left:0,visible:"hidden",width:window.innerWidth||screen.width,height:window.innerHeight||screen.height};function i(){this.style.display="none",this.isVisible=!1}function a(){this.style.display="",this.isVisible=!0}switch(o.height){case 480:case 576:case 720:case 1080:break;default:o.width=1280,o.height=720}e.exports=function(e){var t,s=document.createElement("iframe");return"function"==typeof e.onload&&(s.onload=e.onload),s.show=a,s.hide=i,s.isVisible=null,s.style.width=e.width||o.width+"px",s.style.height=e.height||o.height+"px",s.style.top=e.top||o.top,s.style.left=e.left||o.left,e.visible?s.show():s.hide(),s.src=e.url||o.url,e.onerror&&((t=new XMLHttpRequest).open("HEAD",s.src),t.timeout=1e4,t.onload=function(){200!==this.status&&(0===this.status&&-1!==s.src.indexOf("file://")||e.onerror(this.status))},t.onerror=function(){e.onerror(this.status)},t.ontimeout=function(){e.onerror(this.status)},t.send()),e.$container.appendChild(s),e.type&&"app"!==e.type&&(s.contentWindow.system=n(6)),s.contentWindow.alert=function(){},s}},function(e,t,n){"use strict";var o={dvbManager:window.dvbManager,epgManager:window.epgManager,gSTB:window.gSTB,pvrManager:window.pvrManager,stbDownloadManager:window.stbDownloadManager,stbStorage:window.stbStorage,stbUpdate:window.stbUpdate,stbUPnP:window.stbUPnP,stbWebWindow:window.stbWebWindow,stbWindowMgr:window.stbWindowMgr,timeShift:window.timeShift,stbPlayerManager:window.stbPlayerManager,stbEvent:window.stbEvent,exit:function(){window.location.href=n(24)()||"file:///home/web/services.html"}},i=n(12).language,a={};Object.defineProperty(a,"inputLanguage",{set:function(e){i=e,gSTB.SetInputLang(e)},get:function(){return i}}),window.extendCorePrototype("tools",{hash:gSTB.GetHashVersion1,uid:gSTB.GetUID,debug:"function"==typeof window.debug||gSTB.Debug}),window.extendCorePrototype("settings",a),window.extendCorePrototype("device",{model:gSTB.GetDeviceModelExt(),serialNumber:gSTB.GetDeviceSerialNumber(),vendor:gSTB.GetDeviceVendor(),versionHardware:gSTB.GetDeviceVersionHardware(),activeBank:gSTB.GetDeviceActiveBank(),imageDescription:gSTB.GetDeviceImageDesc(),imageVersion:gSTB.GetDeviceImageVersion(),imageVersionCurrent:gSTB.GetDeviceImageVersionCurrent(),mac:gSTB.GetDeviceMacAddress(),memory:void 0}),e.exports=o},function(e,t,n){"use strict";var o=n(25).parse;e.exports=function(){var e=o(location.search.substring(1));return e.referrer?e.referrer:!!document.referrer&&(location.href.split("#")[0]!==document.referrer&&document.referrer)}},function(e,t,n){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+"="+encodeURIComponent(e[n]))}),t.join("&")}}},function(e,t,n){"use strict";var o=n(2);function i(e,t){var n;if(this.state=i.prototype.STATE_CREATED,this.action=e.action,this.parent=e.parent||null,this.mime=e.mime,this.data=e.data,this.context=e.context,this.silent=e.silent,this.callback=t,o.call(this,e),e.events)for(n in e.events)e.events[n]&&this.addListener(n,e.events[n])}i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.STATE_CREATED=0,i.prototype.STATE_RESOLVED=1,i.prototype.STATE_NOT_RESOLVED=2,i.prototype.STATE_CONTEXT_RECEIVED=3,i.prototype.STATE_ERROR_RECEIVED=4,i.prototype.STATE_CLOSED=5,i.prototype.STATE_PAUSED=6,i.prototype.emit=function(e,t){var n,o=this.events[e];if(o)for(n=0;n<o.length;n++){0;try{o[n].call(this,t)}catch(e){0}}},i.prototype.close=function(e){this.state=i.prototype.STATE_CLOSED,this.emit("close",e)},i.prototype.show=function(e,t){var o=n(3),i=n(4),a={source:i.prototype.SOURCES.INTENT,data:{intent:this,config:t}};o.apps[e]?o.topApp.pid!==e&&o.show(o.apps[e],a):(o.topApp&&(o.topApp.$iframe.hide(),o.topApp.core.emit("hide",{source:i.prototype.SOURCES.SYSTEM})),o.show(o.launcher),o.launcher.core.emit("focus"))},i.prototype.pause=function(){this.savedstate=this.state,this.state=i.prototype.STATE_PAUSED},i.prototype.resume=function(){var e=this;setTimeout(function(){e.state=i.prototype.STATE_CREATED,"function"==typeof e.continueCallback&&e.continueCallback()},0)},e.exports=i},function(e,t,n){"use strict";e.exports={author:{name:"Infomir",email:"support@infomir.eu"},languages:["de","el","es","fr","it","nl","pl","ru","et","lv","sl","uk","hy","ka","bg","tr","pt","az"],license:"license.md",order:["magcore-app-tv","magcore-app-tv-classic","magcore-app-dvb","magcore-app-video-club","magcore-app-video-club-prime","magcore-app-radio","magcore-app-magic-cast","magcore-app-audio-club","magcore-app-explorer","magcore-app-records","magcore-app-weather","magcore-app-personal-account","magcore-app-settings","magcore-app-browser","magcore-app-downloads","magcore-app-karaoke","magcore-app-lines","magcore-app-sudoku","magcore-app-memory","magcore-app-2048"],resolutions:["480","576","720","1080"],source:"src"}},function(e,t,n){"use strict";var o=n(2);window.gSTB.GetDeviceModelExt?window.gSTB.GetDeviceModelExt():window.gSTB.GetDeviceModel();window.top.stbEvent=window.stbEvent=new o,window.stbEvent.onEvent=function(e,t){try{e=parseInt(e,10)}catch(e){return void 0}if(this.events["media"]){if(t)try{t=JSON.parse(t)}catch(e){t={}}this.emit("media",{code:e,info:t})}},window.stbEvent.onBroadcastMessage=function(e,t,n){this.events["message"]&&this.emit("message",{broadcast:!0,windowId:e,message:t,data:n})},window.stbEvent.onMessage=function(e,t,n){this.events["message"]&&this.emit("message",{broadcast:!1,windowId:e,message:t,data:n})},window.stbEvent.onMediaAvailable=function(e,t){this.events["media:available"]&&this.emit("media:available",{mime:e,url:t})},window.stbEvent.onNetworkStateChange=function(e){this.events["internet:state"]&&this.emit("internet:state",{state:e})},window.stbEvent.onWebBrowserProgress=function(e){this.events["browser:progress"]&&this.emit("browser:progress",{progress:e})},window.stbEvent.onWindowActivated=function(){this.events["window:focus"]&&this.emit("window:focus")},e.exports={unload:function(){},load:function(){0},init:function(){-1!==window.top.location.href.indexOf("load=true")&&window.top.stbWebWindow.close(),window.gSTB.SetNativeStringMode&&window.gSTB.SetNativeStringMode(!0)}}},function(e,t,n){"use strict";var o=n(30),i=0;function a(e){(e=e||{}).focusable=e.focusable||!1,e.visible=e.visible||!1,e.className="widget "+(e.className||""),o.call(this,e)}a.prototype=Object.create(o.prototype),a.prototype.constructor=a,e.exports=function(e){var t=new a({focusable:e.focusable,visible:e.visible,events:e.events});return t.className=t.$node.className="widgetClass"+i,e.visible||(t.$node.className="widgetClass"+i+" hidden"),++i,t.$node.style.zIndex=1e3,document.body.appendChild(t.$node),t}},function(e,t,n){"use strict";var o=n(2),i=null,a=0;function s(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,o.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){n.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){n.focus(),n.events["click"]&&n.emit("click",e),e.stopPropagation()})}s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.defaultEvents=null,s.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events["add"]&&this.emit("add",{item:e})},s.prototype.remove=function(){this.parent&&(i===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.events={},this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove")},s.prototype.focus=function(e){return!(!this.focusable||this===i)&&(i&&i.blur(),(i=this).$node.classList.add("focus"),i.events["focus"]&&i.emit("focus",e),!0)},s.prototype.blur=function(){return this.$node.classList.remove("focus"),this===i&&(i=null,this.events["blur"]&&this.emit("blur"),!0)},s.prototype.show=function(e){return!!this.visible||(this.$node.classList.remove("hidden"),this.visible=!0,this.events["show"]&&this.emit("show",e),!0)},s.prototype.hide=function(){return!this.visible||(this.$node.classList.add("hidden"),this.visible=!1,this.events["hide"]&&this.emit("hide"),!0)},e.exports=s},function(e,t,n){"use strict";n(32)},function(e,t,n){"use strict";n(33)},function(e,t,n){"use strict";if(!document.documentElement.classList){var o=Array.prototype,i=o.indexOf,a=o.slice,s=o.push,r=o.splice,c=o.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<n.length;t++)s.call(this,n[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(s.call(this,e),this._element.className=a.call(this,0).join(" "))},contains:function(e){return-1!==i.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=i.call(this,e);-1!==t&&(r.call(this,t,1),this._element.className=a.call(this,0).join(" "))},toString:function(){return c.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,n){"use strict";var o=document.createElement("link"),i=window.innerHeight||window.screen.height;switch(i){case 480:case 576:case 720:case 1080:break;default:i=720}o.rel="stylesheet",o.href="css/app."+i+".css",document.head.appendChild(o)},function(e,t,n){"use strict";e.exports.serial=n(36),e.exports.parallel=n(5)},function(e,t,n){"use strict";e.exports=function(e,t){var n=!1,o=0,i=[];e=Array.isArray(e)?e:[],"function"!=typeof t&&(t=function(){}),0===e.length?t(null,i):function a(s){var r=function(s,r){if(s)return n=!0,void t(s);i[o]=r,++o>=e.length?t(null,i):a(e[o])};n||(0===s.length?r(null,s()):s(r))}(e[0])}}]);
//# sourceMappingURL=main.js.map