!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";var o=n(4);e.exports={coreList:[],windowList:[],windowToCoreMap:{},core:{},getInstance:function(e){var t,n=this.windowList.indexOf(e);return-1===n?((t=new o).addListener("hide",function(){this.applicationState.visible=!1}),t.addListener("show",function(){this.applicationState.visible=!0}),t.addListener("focus",function(){this.applicationState.focused=!0}),t.addListener("blur",function(){this.applicationState.focused=!1}),Object.defineProperty(t,"index",{value:this.coreList.push(t)-1,configurable:!1,enumerable:!1,writable:!1}),this.windowToCoreMap[this.windowList.push(e)-1]=t.index):t=this.coreList[this.windowToCoreMap[n]],window.top.coreList=this.coreList,window.top.windowList=this.windowList,window.top.windowToCoreMap=this.windowToCoreMap,t},destroy:function(e){var t,n,o,i=this.windowList.indexOf(e),a=0;if(-1!==i){for(t=this.coreList[this.windowToCoreMap[i]].plugins,o=(n=Object.keys(t)).length;a<o;)"function"==typeof t[n[a]].destroy&&t[n[a]].destroy(),++a;return this.coreList[this.windowToCoreMap[i]]=void 0,this.windowToCoreMap[this.windowToCoreMap[i]]=void 0,this.windowList[i]=void 0,!0}return!1}}},function(e,t,n){"use strict";var o=n(5),i=n(15),a={},s={basePath:"",load:null,getPluginStorage:function(e){return a[e].storage}};function r(e,t,n){var o;a[e.name]&&a[e.name].instance?(n&&n(null,a[e.name]),t(null,a[e.name])):a[e.name]&&a[e.name].loading?(null===a[e.name].dependents&&(a[e.name].dependents=[]),a[e.name].dependents.push(function(){n&&n(null,a[e.name]),t(null,a[e.name])})):(a[e.name]={loading:!0,instance:null,dependents:null,name:e.name,path:e.path,storage:new i(e.name),packageName:e.packageName},o=new XMLHttpRequest,e.url||(e.url=s.basePath+"/"+e.packageName+"/"+e.version+"/"+(e.main||"index.js")),o.open("GET",e.url,!0),o.onload=function(){var o,i,s={exports:{},id:""};if(new Function("module","exports","require",this.responseText+"//# sourceURL=file.js")(s,s.exports,function(){}),window.core.plugins[e.name]=a[e.name].instance=s.exports,a[e.name].loading=!1,n&&n(null,a[e.name]),null!==a[e.name].dependents&&a[e.name].dependents.length>0)for(o=a[e.name].dependents;i=o.shift();)i();t(null,a[e.name])},o.send())}s.load=function(e){var t=[];e.dependencies?(e.dependencies=Object.keys(e.dependencies),e.dependencies.forEach(function(n){window.core.packageMap[n]&&t.push(function(t){!function e(t,n,i){var a,s=null;(t=window.core.packageMap[t]).dependencies&&(s=Object.keys(t.dependencies)),null!==s&&s.length>0?(a=[],s.forEach(function(t){window.core.packageMap[t]&&a.push(function(n){e(t,n,i)})}),o(a,function(){r(t,n,i)})):r(t,n,i)}(n,t,e.dependencyReady)})}),o(t,function(t,n){e.done&&e.done(t,n)})):e.done&&e.done()},e.exports=s},function(e,t,n){"use strict";function o(){this.events={}}o.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function o(){n.removeListener(e,o),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},o.prototype.constructor=o,e.exports=o},function(e,t,n){"use strict";var o,i,a=-1,s=n(22),r=n(17),c=n(7),p=n(8),l=n(6),d=n(4),u=null,h=null,f=null,w=null,m=0,g={topApp:null,stack:[],daemons:[],runHistory:[],apps:{},launcher:null,launchers:[],home:null,homeConfig:null,focusedApp:null,applicationToShow:!1,onDoneCallback:null,osdStack:[],show:function(e,t){var n,o=e.config.type;if(t=t||{source:d.prototype.SOURCES.LAUNCHER},this.topApp!==e)switch(o){case"osd":p.active&&p.hide(),-1===(n=g.osdStack.indexOf(e))?g.osdStack.push(e):(g.osdStack.splice(n,1),g.osdStack.push(e)),g.osdStack.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),e.$iframe.show();break;case"app":this.launcher&&(this.launcher.$iframe.hide(),this.launcher.core.emit("hide"),this.launcher.core.emit("blur")),u.style.zIndex=window.frames.length;case"system":"system"===o&&(u.style.zIndex=0,e.$iframe.style.zIndex=window.frames.length),-1!==(n=this.stack.indexOf(e))&&this.stack.splice(n,1),this.stack.push(e),this.topApp&&this.topApp!==e&&("function"==typeof this.topApp.core.emit&&this.topApp.core.emit("hide",t),this.topApp&&this.topApp.$iframe.hide()),this.topApp=e,e.$iframe.contentWindow.focus(),g.focusedApp=e,p.active&&p.hide(),e.$iframe.show(),e.core&&"function"==typeof e.core.emit&&(e.core.emit("show",t),e.core.emit("focus",t));break;case"launcher":"launcher"===o&&(g.topApp=null,window.core.pid=e.core.pid),g.osdStack.forEach(function(e){"auth"===e.config.type&&(e.$iframe.style.zIndex=0)});default:e.$iframe.contentWindow.focus(),e.core.emit("focus",t),e.core.emit("show",t),g.focusedApp=e,e.$iframe.show()}},hide:function(e,t){var n=e.config.type;switch(t=t||{source:d.prototype.SOURCES.LAUNCHER},e.$iframe.hide(),e.core&&"function"==typeof e.core.emit&&e.core.emit("hide",t),n){case"app":case"system":this.topApp===e&&(this.topApp=null),this.stack.pop(),this.stack.length>0?this.show(this.stack.pop(),t):this.show(this.launcher,t)}},close:function(e,t){var o,i,a=c.data.apps.length,s=0;if(null===h&&(h=n(0)),null===f&&(f=n(10)),void 0===e)t||this.show(this.launcher);else if("app"===e.config.type){for(e===this.topApp?(this.topApp=null,this.stack.pop()):(i=this.stack.indexOf(e),this.stack.splice(i,1)),this.home,e.core&&"function"==typeof e.core.emit&&e.core.emit("exit");s<a;){if(c.data.apps[s].packageName===e.config.packageName){c.data.apps[s]=JSON.parse(JSON.stringify(c.data.apps[s])),c.data.apps[s].pid=void 0,f.replaceActionsConfig(e.config,c.data.apps[s]);break}++s}for(h.destroy(e.window),u.contentDocument.body.removeChild(e.$iframe),a=(o=Object.keys(g.apps)).length,s=0;s<a;){if(g.apps[o[s]]===e){g.apps[o[s]]=null;break}++s}0,e.config.pid=void 0,e=null,t||this.reset(e)}else this.reset(e)},reset:function(e){for(;this.stack.length;)(e=this.stack.pop()).$iframe.hide(),e.core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER});this.topApp=null,u.style.zIndex=0,this.show(this.launcher)},runApp:function(e,t){var o={},i=-1,h=null;if(!e.config.legacy){if("app"===e.config.type){if(function(e,t,n){var o=c.data.apps.length,i=0;for(;i<o;){if(c.data.apps[i].packageName===e.config.packageName){if(c.data.apps[i].locked&&window.core.accessControl&&!e.omitLock)return!(!e.ignoreAccessControl||(e.ignoreAccessControl=!1,g.runHistory.forEach(function(t){t.packageName===e.config.packageName&&(e.ignoreAccessControl=!0)}),!e.ignoreAccessControl))||(w=!0,setTimeout(function(){window.core.accessControl.request(function(n){n||(c.data.apps[i].locked=!1,g.runApp(e,t),c.data.apps[i].locked=!0),w=!1})},0),!0);e.config=c.data.apps[i],void 0!==c.data.apps[i].pid&&(g.apps[e.config.pid]?n.showSplash=!1:e.config.pid=void 0),a>0&&g.runHistory.length>=a&&g.close(g.apps[g.runHistory[g.runHistory.length-1].pid]);break}++i}return t&&l.events["run:app"]?(g.launcher.$iframe.hide(),g.launcher.core.emit("hide"),g.launcher.core.emit("blur"),g.applicationToShow=e,l.emit("run:app",{done:function(){g.applicationToShow&&(e.omitLock=!0,g.runApp(e))},app:c.data.apps[i]}),!0):n.showSplash?(g.launcher&&(g.launcher.$iframe.hide(),g.launcher.core.emit("hide"),g.launcher.core.emit("blur")),p.show(c.data.apps[i]),void(g.topApp&&(g.topApp.$iframe.hide(),g.topApp.core.emit("hide",{source:window.core.SOURCES.SYSTEM})))):(g.runHistory=g.runHistory.filter(function(t){return t.packageName!==e.config.packageName}),g.runHistory.push(e.config),g.show(g.apps[e.config.pid]),e.onload&&e.onload(g.apps[e.config.pid]),e.onready&&e.onready(g.apps[e.config.pid]),!0)}(e,t,{showSplash:!0}))return}else e.config.metrics&&e.config.metrics[screen.height]&&(o.width=e.config.metrics[screen.height].width,o.height=e.config.metrics[screen.height].height,o.top=e.config.metrics[screen.height].top,o.left=e.config.metrics[screen.height].left);return h={$iframe:s({url:e.config.url,type:e.config.type,visible:!1,$container:"app"===e.config.type?u.contentDocument.body:window.document.body,width:o.width,height:o.height,top:o.top,left:o.left,onload:function(){var t;this.contentWindow.addEventListener("keydown",function(e){var t;0!==e.keyCode&&(9===e.keyCode&&e.preventDefault(),t="keydown:"+n(18)(e),r(t,e))}),h.window=this.contentWindow,h&&h.window&&(t=n(0).getInstance(h.window),h.core=t,h.window.pid||(h.window.pid=i),void 0===t.call&&(t.storage=new t.constructor.prototype.Storage(e.config.packageName||e.config.name),Object.defineProperty(t,"state",{get:function(){return t.storage.getItem("state")},set:function(e){t.storage.setItem("state",e)}}),"app"===e.config.type?t.call=function(t){var n,o;g.focusedApp&&(n="osd"===g.focusedApp.config.type?g.focusedApp:null),"exit"===t?(g.close(h),-1!==(o=g.runHistory.indexOf(h.config))&&g.runHistory.splice(o,1)):"stop"===t?g.close(h):"app:ready"===t?(e.visible&&p.active&&(p.hide(),g.show(h),n&&n.$iframe.contentWindow.focus()),h.core.emit("app:ready"),g.runHistory=g.runHistory.filter(function(t){return t.url!==e.config.url}),g.home&&e.config.home?g.runHistory.push(g.home.config):g.runHistory.push(e.config),e.onready&&e.onready()):"hide"===t&&g.hideAll()}:"osd"===e.config.type||"auth"===e.config.type?(t.system=!0,t.config=c.data,t.redirectTo=function(e){window.location.href=e},t.call=function(t){var n;switch(t){case"hide":-1!==(n=g.osdStack.indexOf(h))&&g.osdStack.splice(n,1),h.$iframe.style.zIndex="",g.osdStack.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),h.core.applicationState.visible=!1,h.$iframe.hide(),document.activeElement===document.body&&g.focusedApp!==g.topApp&&g.topApp&&(g.focusedApp=g.topApp,g.focusedApp.$iframe.contentWindow.focus());break;case"app:ready":e.onready&&e.onready();break;case"show":p.active&&(window.splash.style.zIndex=window.frames.length),-1===(n=g.osdStack.indexOf(h))?g.osdStack.push(h):(g.osdStack.splice(n,1),g.osdStack.push(h)),g.osdStack.forEach(function(e,t){e.$iframe.style.zIndex=t+window.frames.length+1}),h.core.applicationState.visible=!0,h.$iframe.show(),"auth"===e.config.type&&(g.launcher||(g.launcher=h));break;case"focus":g.topApp?g.topApp.core.emit("blur"):g.launcher&&g.launcher.core.emit("blur"),h.core.applicationState.focused=!0,h.$iframe.contentWindow.focus(),g.focusedApp=h;break;case"blur":if(g.osdStack.length>0){if(g.osdStack[g.osdStack.length-1].$iframe.style.height===window.outerHeight){g.osdStack[g.osdStack.length-1].$iframe.contentWindow.focus(),g.focusedApp=g.osdStack[g.osdStack.length-1],h.core.applicationState.focused=!0,g.focusedApp.core.emit("focus");break}g.osdStack.pop()}g.topApp?(g.osdStack=[],g.topApp.$iframe.contentWindow.focus(),g.focusedApp=g.topApp,g.topApp.core.emit("focus")):g.launcher&&(g.osdStack=[],g.launcher.$iframe.contentWindow.focus(),g.focusedApp=g.launcher,g.launcher.core.emit("focus"))}},t.dispatchEventToActiveApp=function(e){var t,n,o,i,a=g.topApp||g.launcher,s=0;for((t=document.createEvent("Event")).initEvent(e.name,!!e.bubbles,!!e.cancelable),o=(n=(n=Object.keys(e)).filter(function(e){return"bubbles"!==e&&"cancelable"!==e})).length;s<o;)t[n[s]]=e[n[s]],++s;if("click"===e.name){if(!(i=a.$iframe.contentDocument.elementFromPoint(e.clientX,e.clientY)))return}else i=a.$iframe.contentWindow;i.dispatchEvent(t)}):(t.system=!0,t.config=c.data,t.redirectTo=function(e){window.location.href=e},t.call=function(t){switch(t){case"exit":g.close(h),"launcher"===e.config.type&&n(9).exit();break;case"hide":g.hide(h,{source:d.prototype.SOURCES.SYSTEM});break;case"show":g.show(h,{source:d.prototype.SOURCES.SYSTEM});break;case"app:ready":this.emit("app:ready"),e.onready&&e.onready()}}),t.pid=i),t.resolveDependencies(e.config,function(){t.ready=!0,e.config.home&&(t.applicationState.home=!0),t.emit("load"),e.onload&&e.onload(h)}))},onerror:function(t){g.close(h),setTimeout(function(){e.visible&&p.active&&p.hide()},5e3),e.onerror&&e.onerror(t)}}),window:null,core:null,config:e.config},g.home&&e.config.home&&(g.home=h),h.core=n(0).getInstance(h.$iframe.contentWindow),"launcher"!==e.config.type&&(i=m,++m,g.apps[i]=h),e.config.pid=i,h}-1===e.config.url.indexOf("?")?window.location.href=e.config.url+"?referrer="+encodeURIComponent(c.data.options.stalkerHost+c.data.options.stalkerLoaderPath):window.location.href=e.config.url+"&referrer="+encodeURIComponent(c.data.options.stalkerHost+c.data.options.stalkerLoaderPath)},hideAll:function(){var e,t,n,o,i=[];for(g.onDoneCallback=null,g.applicationToShow=null,e=(t=Object.keys(g.apps)).length-1,p.active&&p.hide();e>-1;)g.apps[t[e]]&&(n=g.apps[t[e]].config.type,o=g.apps[t[e]].$iframe.isVisible,g.apps[t[e]].core&&("osd"===n||"auth"===n?o&&g.apps[t[e]].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER}):"app"===n?(i.push(g.apps[t[e]]),o&&g.apps[t[e]].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER})):o&&(g.apps[t[e]].$iframe.hide(),g.apps[t[e]].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER})))),--e;for(e=0;e<i.length;)(o=i[e].$iframe.isVisible)&&(i[e].$iframe.hide(),i[e].core.emit("hide",{source:d.prototype.SOURCES.LAUNCHER})),++e;if(u.style.zIndex=0,g.topApp=null,w){if(g.launcher.$iframe.isVisible)return;g.show(g.launcher),g.launcher.core.emit("focus")}else if(g.home){if(g.home.config.locked)return void(g.launcher.core.applicationState.visibile||(g.show(g.launcher),g.launcher.core.emit("focus")));g.launcher.$iframe.isVisible?-1===g.runHistory.indexOf(this.home.config)?(g.show(g.launcher),g.launcher.core.emit("focus")):(this.launcher&&this.launcher.$iframe.hide(),g.show(g.home)):(g.show(g.launcher),g.launcher.core.emit("focus"))}else g.launcher&&(g.launcher.core.applicationState.focused||g.launcher.core.emit("focus"),g.show(g.launcher))},init:function(){a=c.data.options.maxAppsCounter||a,u=s({$container:document.body,visible:!0,onload:function(){this.contentDocument.head.appendChild(this.contentDocument.createElement("style")).textContent="html, body{ background: transparent !important; overflow: hidden; margin: 0; padding:0; width: "+i+"px; height: "+o+"px; } iframe { position: absolute; top: 0; left: 0; border: none; outline: none; overflow: hidden;margin: 0; padding: 0; width: "+i+"px; height: "+o+"px; }",this.contentWindow.parent=null,this.contentWindow.opener=null,this.contentWindow.getCoreInstance=function(e){return n(0).getInstance(e)}}})},lockApp:function(e,t){var n=window.core.storage.getItem("config")||{},o=n.apps||[],i=c.data.apps.length,a=0,s=0;window.core.accessControl?window.core.accessControl.request(function(r){if(!r){for(;a<i;){if(c.data.apps[a].packageName===e.packageName){for(s=a,a=0,i=o.length,c.data.apps[s].locked=!c.data.apps[s].locked;a<i;){if(c.data.apps[s].packageName===o[a].packageName||c.data.apps[s].name===o[a].name){o[a]=c.data.apps[s];break}++a}a===i&&o.push(c.data.apps[s]);break}++a}n.apps=o,window.core.storage.setItem("config",n)}t(r)}):t(!0)},setHomeApp:function(e){null===this.home&&(e.home=!0,g.homeConfig=e)},killAll:function(e){Object.keys(g.apps).forEach(function(t){var o=g.apps[t];null!==o&&(o.window===e?g.launcher=o:(o.core.emit("exit"),null===h&&(h=n(0)),h.destroy(o.window),"app"===o.config.type?u.contentDocument.body.removeChild(o.$iframe):document.body.removeChild(o.$iframe)))}),this.topApp=this.focusedApp=g.launcher,this.home=null,g.apps={},this.runHistory.splice(0),g.osdStack.splice(0),this.stack.splice(0),n(16).forceFlush()},setLauncher:function(e){g.home=null,Object.keys(g.apps).forEach(function(t){g.apps[t]&&g.apps[t].window===e&&(g.launcher=g.apps[t])})}};switch(o=window.screen.height){case 480:case 576:case 720:case 1080:break;default:i=1280,o=720}e.exports=g},function(e,t,n){"use strict";var o=n(2),i=n(5),a={},s=[],r=document.body.appendChild(document.createElement("div")),c=function(e){e.timeout=e.timeout||5e3,e.buttons&&e.buttons[0]&&e.buttons[0].click?(e.buttons[0].click(),Array.isArray(s)&&s.length>0&&c(s.unshift())):(r.innerText=e.title,r.style.display="",setTimeout(function(){r.style.display="none",Array.isArray(s)&&s.length>0&&c(s.unshift())},e.timeout))};function p(e){o.call(this,e),this.plugins={},this.applicationState={focused:!1,visible:!1,home:!1}}r.style.display="none",r.style.textAlign="center",r.style.background="#000",r.style.color="#fff",r.style.lineHeight="72px",r.style.height="auto",r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.width="100%",r.style.zIndex="9999",p.prototype=Object.create(o.prototype),p.prototype.constructor=p,p.prototype.theme={path:null},p.prototype.environment=n(13),p.prototype.ready=!1,p.prototype.emit=function(){try{o.prototype.emit.apply(this,arguments)}catch(e){0}},p.prototype.resolveDependencies=function(e,t){var o=this,a=[];o.ready||n(1).load({dependencies:e.dependencies,done:function(s,r){r&&r.length>0&&r.forEach(function(t){a.push(function(i){t.instance.onAppInit({app:e,options:t.options,storage:n(1).getPluginStorage(t.name),path:t.path},function(e,n){o.plugins[t.name]=n,i(e,n)})})}),i(a,t)}})},p.prototype.notify=function(e){0===s.length?c(e):s.push(e)},Object.defineProperty(a,"INTENT",{enumerable:!0,configurable:!1,writable:!1,value:1}),Object.defineProperty(a,"LAUNCHER",{enumerable:!0,configurable:!1,writable:!1,value:2}),Object.defineProperty(a,"SYSTEM",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(p.prototype,"SOURCES",{enumerable:!0,configurable:!1,writable:!1,value:a}),Object.defineProperty(a,"intent",{enumerable:!0,configurable:!1,writable:!1,value:1}),Object.defineProperty(a,"launcher",{enumerable:!0,configurable:!1,writable:!1,value:2}),Object.defineProperty(a,"system",{enumerable:!0,configurable:!1,writable:!1,value:3}),Object.defineProperty(p.prototype,"sources",{enumerable:!0,configurable:!1,writable:!1,value:a}),p.prototype.apiVersion=parseInt(window.gSTB.Version().split(";")[0].split(":")[1],10),window.extendCorePrototype=function(e,t){"notify"===e&&(c=s=null,r.parentNode.removeChild(r)),p.prototype[e]=t},e.exports=p},function(e,t,n){"use strict";e.exports=function(e,t){var n=!1,o=0,i=[];e=Array.isArray(e)?e:[],"function"!=typeof t&&(t=function(){}),0===e.length?t(null,i):e.forEach(function(a,s){var r=function(a,r){if(!n){if(a)return n=!0,void t(a);if(i[s]=r,++o===e.length)t(null,i);else if(o>e.length)throw Error("done callback invoked more than one time in function with "+s+" position in tasks array")}};0===a.length?r(null,a()):a(r)})}},function(e,t,n){"use strict";var o=new(n(2));e.exports=o},function(e,t,n){"use strict";var o=n(5),i=window.innerHeight||window.screen.height,a={model:null,version:null},s=!0;function r(e,t){var n,o,a=t.appsPackagesPath,r=Object.keys(e.dependencies||[]),c=r.map(function(t){return e.dependencies[t]}),p=[],l=[];for(r.length>0&&(e.dependencies={},r.forEach(function(t,n){-1!==t.indexOf("plugin")&&(e.dependencies[t]=c[n])})),e.uris=e.uris||{},a=-1===t.appsPackagesPath.indexOf("://")?t.stalkerHost+"/"+t.appsPackagesPath:t.appsPackagesPath,function(e,t,n){var o=[];"string"==typeof e.url&&"plugin"!==e.type||("plugin"===e.type?e.url&&-1!==e.url.indexOf(".js")?(o.push(e.url),e.path=e.url+"/../"):(o.push(n),o.push(e.packageName),s&&o.push(e.version),o.push(e.uris.app||""),e.path=o.join("/"),o.push(e.uris.entry||"index.js")):e.uris.entry&&-1!==e.uris.entry.indexOf("://")?o.push(e.uris.entry):e.uris.app&&e.uris.app.indexOf("://")>-1?(o.push(e.uris.app),o.push(e.uris.entry)):(o.push(t),o.push(e.packageName),s&&o.push(e.version||""),o.push(e.uris.app||"app"),o.push(e.uris.entry||"index.html")),e.url=o.join("/"))}(e,a,t.pluginsPath),e.options&&(Object.keys(e.options).forEach(function(t){p.push(t+"="+e.options[t])}),p.length>0&&(e.url+="?",e.url+=p.join("&"))),n=(l=e.url.split("/")).shift()+"/";0===l[0].length;)n+="/",l.shift();if(e.url=n+l.filter(Boolean).join("/"),"plugin"!==e.type){if(e.uris.icons=e.uris.icons||{},e.uris.icons[i])for(o in e.uris.icons=e.uris.icons[i],e.uris.icons)-1===o.indexOf("://")&&(l.splice(0),e.uris.app.indexOf("://")>-1?(l.push(e.uris.app),l.push(e.uris.icons[o])):(l.push(a),l.push(e.packageName),s&&e.version&&l.push(e.version),e.uris.app&&l.push(e.uris.app),l.push(e.uris.icons[o])),e.uris.icons[o]=l.join("/"));e.colors=e.colors||{},e.colors.splashFont=e.colors.splashFont||"#fff",e.colors.splashBackground=e.colors.splashBackground||"#333"}return e.icons=e.icons||{},e}function c(e){var t,n,o;if("*"!==e){if(t=(e=e.split("."))[0],n=e[1],o=e[2],"*"!==t&&Number(t)!==a.version[0])return!1;if("*"!==n)return!(Number(n)>a.version[1])&&(Number(n)!==a.version[1]||("*"===o||!(Number(o)>a.version[2])))}return!0}function p(e){var t,n,o,i;if(e.platforms){for(i=a.model.toLowerCase(),n=0,o=(t=Object.keys(e.platforms)).length;n<o;){if(void 0!==e.platforms["exclude"])return void 0===e.platforms["exclude"][a.model]||!c(e.platforms["exclude"][a.model]);if(t[n].toLowerCase()===i&&c(e.platforms[t[n]]))return!0;++n}return 0}return!0}switch(a.version=window.gSTB.GetDeviceImageVersionCurrent().split("-")[0].split(".").map(Number),a.model=window.gSTB.GetDeviceModelExt?window.gSTB.GetDeviceModelExt():window.gSTB.GetDeviceModel(),i=screen.height){case 480:case 576:case 720:case 1080:break;default:i=720}e.exports={systemSettings:{},settings:{},environment:{},data:{},url:null,load:function(e,t){n(27).languages;var a,c=this;a=e.config?e.config:"config.json",this.url=a,o([function(e){var t=new XMLHttpRequest;t.onload=function(){var n=!1;try{c.data=JSON.parse(t.responseText)}catch(e){n="config url "+a+"<br>config content: "+t.responseText+"<br>response status "+t.status+"<br>"+e}e(n,c.data)},t.onerror=t.ontimeout=function(){e(this.status+": "+this.responseText)},t.open("GET",a,!0),t.send(null)},function(e){e(!1,window.core.storage.getItem("config"))}],function(e,n){e?t(e):function(e,t,n){var o,a,c,l,d,u,h=t?t.apps:[],f={},w=0,m=[];for(e.apps||(e.apps=[]),e.options.ignoreVersions&&(s=!1),-1!==e.options.pluginsPath.indexOf("../")&&((u=document.createElement("a")).href=e.options.pluginsPath,e.options.pluginsPath=u.href),c=e.apps.length;w<c;)p(e.apps[w])&&m.push(e.apps[w]),++w;for(e.apps=m,h.forEach(function(e){f[e.packageName||e.name]=e}),h.splice(0),c=e.apps.length,w=0;w<c;)e.apps[w]=r(e.apps[w],e.options),l=e.apps[w].packageName||e.apps[w].name,f[l]&&(e.apps[w].locked=f[l].locked),++w;if(w=0,e.options.themePath)e.theme=e.options.stalkerHost+e.options.themePath.replace("{screen_height}",i+".css"),e.themeVars=e.themes={},n(null,e);else{for(c=(o=Object.keys(e.themes)).length;w<c;)-1===(a=e.themes[o[w]]).indexOf("://")&&(-1===e.options.appsPackagesPath.indexOf("://")?e.themes[o[w]]=e.options.stalkerHost+"/"+e.options.appsPackagesPath+"/"+o[w]+"/"+a+"/":e.themes[o[w]]=e.options.appsPackagesPath+"/"+o[w]+"/"+a+"/"),++w;e.theme=e.themes[o[0]],(d=new XMLHttpRequest).onload=function(){if(200===this.status&&this.responseText)try{e.themeVars=JSON.parse(this.responseText)}catch(t){e.themeVars={}}n(null,e)},d.open("GET",e.theme+"src/vars.json"),d.send(),d.onerror=d.ontimeout=function(){n(null,e)}}}(n[0],n[1],function(e,n){c.data=n,t()})})}}},function(e,t,n){"use strict";e.exports={init:function(){var e,t=0;if((e=document.getElementsByClassName("app-icon"))[t])for(;t<=3;)e[t].classList.remove("animated"),t++},show:function(e){window.splash.style.backgroundImage="url("+e.uris.icons.logoActive+")",window.splash.style.backgroundColor=e.colors.splashBackground,window.splash.style.zIndex="9999",window.splashAppName.innerText=e.name,window.splashAppName.style.color=e.colors.splashFont,window.splashAppVersion.innerText=e.version,window.splash.classList.remove("invisible"),this.active=!0},hide:function(){window.splash.className="container invisible",window.splash.removeAttribute("style"),this.active=!1},active:!1}},function(e,t,n){"use strict";var o=null;o=n(23),window.top.platformApi=o,e.exports=o},function(e,t,n){"use strict";var o=n(26),i=n(7),a=(n(8),{}),s={},r=null,c=null,p=n(4),l={lastIntent:null,create:function(e,t){return new o(e,t)},route:function(e,t,i){var a,d={runConfig:null,handlerList:null};if(null===c&&(c=n(0)),null===r&&(r=n(3)),l.last=e,e.context){if(void 0===e.context.pid)e.state=o.prototype.STATE_NOT_RESOLVED;else{if(e.state=o.prototype.STATE_RESOLVED,e.receiver=e.context.pid,e.creator=t.pid,!i&&s["before:"+e.action]&&(s["before:"+e.action].forEach(function(n){n(e,r.apps[t.pid])}),e.state===o.prototype.STATE_PAUSED))return e.continueCallback=function(){l.route(e,t,!0)},d.handlerList=null,d;e.runnerConfig=r.apps[t.pid].config,r.apps[e.context.pid].core.emit("intent",e,function(n,i){s[e.action]&&s[e.action].forEach(function(n){n(e,r.apps[t.pid])}),n?(e.state=o.prototype.STATE_ERROR_RECEIVED,e.callback&&e.callback(n,i)):(e.state=o.prototype.STATE_CONTEXT_RECEIVED,i.pid=e.context.pid,e.addListener("close",function(n){null!==t&&(n&&(r.close(r.apps[t.pid]),t=null,r.show(r.launcher)),t&&t.pid&&r.apps[t.pid]?r.show(r.apps[t.pid],{source:p.prototype.SOURCES.INTENT,data:{intent:e}}):(t=null,r.show(r.launcher)))}),e.callback)})}return d}if(d.handlerList=this.findIntentHandlers(e),d.handlerList.length>0)if(e.state=o.prototype.STATE_RESOLVED,a=d.handlerList[0],this.lastRoute={intent:e,core:t},void 0!==a.pid&&r.apps[a.pid])if(r.apps[t.pid]?e.runnerConfig=r.apps[t.pid].config:r.focusedApp&&(e.runnerConfig=r.focusedApp.config),r.apps[a.pid].core){if(e.receiver=a.pid,e.creator=t.pid,!i&&s["before:"+e.action]&&(s["before:"+e.action].forEach(function(n){n(e,r.apps[t.pid])}),e.state===o.prototype.STATE_PAUSED))return r.apps[t.pid].$iframe.hide(),e.continueCallback=function(){e.silent&&r.apps[t.pid].$iframe.show(),l.route(e,t,!0)},d.handlerList=null,d;0,r.apps[a.pid].core.emit("intent",e,function(n,i){if(s[e.action]&&s[e.action].forEach(function(n){n(e,r.apps[t.pid])}),(i=i||{}).pid=a.pid,e.silent)return e.callback&&e.callback(n,i),void e.once("close",function(n){var o;if(n){for(r.apps[t.pid]&&r.close(r.apps[t.pid]);r.stack.length;)(o=r.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.SYSTEM});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}else if(t&&t.pid&&r.apps[t.pid])r.show(r.apps[t.pid],{source:p.prototype.SOURCES.INTENT,data:{intent:e}});else{for(t=null;r.stack.length;)(o=r.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.INTENT,data:{intent:e}});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}});n?(e.state=o.prototype.STATE_ERROR_RECEIVED,e.callback&&e.callback(n,i)):(e.state=o.prototype.STATE_CONTEXT_RECEIVED,"osd"===r.apps[a.pid].config.type?e.once("close",function(e){e&&t&&t.pid&&r.apps[t.pid]&&(r.topApp&&(r.topApp.$iframe.hide(),r.topApp.core.applicationState.visible=!1,r.topApp.core.applicationState.focused=!1),r.launcher.$iframe.hide(),r.topApp=null,r.show(r.apps[t.pid]))}):(r.launcher.$iframe.isVisible&&r.launcher.$iframe.hide(),r.show(r.apps[a.pid],{source:p.prototype.SOURCES.INTENT,data:{intent:e}}),e.once("close",function(n){var o;if(n){for(r.apps[t.pid]&&r.close(r.apps[t.pid]);r.stack.length;)(o=r.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.SYSTEM});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}else if(t&&t.pid&&r.apps[t.pid])r.show(r.apps[t.pid],{source:p.prototype.SOURCES.SYSTEM,data:{intent:e}});else{for(t=null;r.stack.length;)(o=r.stack.pop()).$iframe.hide(),o.core.emit("hide",{source:p.prototype.SOURCES.SYSTEM,data:{intent:e}});r.show(r.launcher),setTimeout(function(){r.topApp=null},0)}})),e.callback&&e.callback(!1,i))})}else d.runConfig=a;else d.handlerList=[],d.runConfig=a;else e.state=o.prototype.STATE_NOT_RESOLVED;return d},findIntentHandlers:function(e){var t=[];return a[e.action]&&a[e.action].forEach(function(n){if(e.mime){if(!0!==n.actions[e.action]&&-1===n.actions[e.action].indexOf(e.mime))return void 0}else if(!0!==n.actions[e.action])return void 0;t.push(n)}),t},resolveActionsConfig:function(e){var t,n,o,i;if(e.actions)for(o=(t=Object.keys(e.actions)).length,n=0;n<o;)i=t[n],a[i]=a[i]||[],e.pid=null,a[i].push(e),++n},replaceActionsConfig:function(e,t){var n,o,i,s;if(e.actions)for(i=(n=Object.keys(e.actions)).length,o=0;o<i;)s=n[o],-1!==(o=a[s].indexOf(e))&&(a[s][o]=t),++o},addHook:function(e,t){s[e]=s[e]||[],s[e].push(t)},last:null};window.extendCorePrototype("intent",function(e,t){var n,o,a,s=this,c=l.create(e,t);if(e&&e.action)if(null!==(n=l.route(c,this)).runConfig){if(n.runConfig.pid)for(o=0,a=i.data.apps.length;o<a;){if(i.data.apps[o].url===n.runConfig.url){0,n.runConfig=i.data.apps[o]=JSON.parse(JSON.stringify(i.data.apps[o]));break}++o}0,r.runApp({config:n.runConfig,visible:!0,onready:function(){l.route(c,s)}})}else n.handlerList&&n.handlerList.length;return c}),window.extendCorePrototype("findIntentHandlers",function(e){return JSON.parse(JSON.stringify(l.findIntentHandlers(e)))}),window.addIntentHook=function(e,t){l.addHook(e,t)},n(6).addListener("home",function(){l.last&&(l.last.continueCallback=null)}),e.exports=l},function(e,t,n){"use strict";var o=null;o=n(28),e.exports=o},function(e,t,n){"use strict";e.exports={debug:window.gSTB.Debug,reboot:function(){window.gSTB.ExecAction("reboot")},reload:function(e){var t,n=window.stbWebWindow.windowId(),o=JSON.parse(window.stbWindowMgr.windowList());for(e=e||"file:///home/web/system/pages/loader/index.html",document.body.style.display="none",top.gSTB.Stop(),top.stbPlayerManager&&"function"==typeof top.stbPlayerManager.reset&&top.stbPlayerManager.reset(),t=0;t<o.result.length;t++)1!==o.result[t]&&o.result[t]!==n&&window.stbWindowMgr.closeWindow(o.result[t]);window.stbStorage.clear(),window.stbWindowMgr.windowLoad(1,e)},runNativeApp:function(e){var t={id:e.applicationId};void 0!==window.stbAppManager&&("function"==typeof window.stbAppManager.isInstalled?window.stbAppManager.isInstalled(e.applicationId)?window.stbAppManager.start(t):window.stbAppManager.start({id:"market://details?id="+e.applicationId}):"function"==typeof window.stbAppManager.start&&window.stbAppManager.start({id:e.applicationId}))}}},function(e,t,n){"use strict";var o;o=n(14),e.exports=o},function(e,t,n){"use strict";var o=window.gSTB.GetEnv(JSON.stringify({varList:["Image_Date","Image_Desc","Image_Version","acPassword","accessControl","audio_initial_volume","autoPowerDownTime","auto_framerate","autoupdateURL","autoupdate_cond","betaupdate_cond","controlModel","defaultLedLevel","dvb_type","front_panel","graphicres","hdmi_event_delay","lang_audiotracks","lang_subtitles","language","mount_media_ro","playerClock","settMaster","ssaverDelay","ssaverName","standByMode","standbyLedLevel","startPage","subtitlesColor","subtitlesSize","subtitles_on","syslog_srv","teletext_charset","teletext_on","teletext_opacity","teletext_ratio","ts_endType","ts_exitType","ts_icon","ts_lag","ts_on","ts_path","ts_time","tvsystem","upnp_conf","weather_conf","weather_place","audioPrimaryLanguage","audioSecondaryLanguage","subtitlesPrimaryLanguage","subtitlesSecondaryLanguage","timezone_conf","ntpurl","portal1","portal2","use_portal_dhcp","force_dvi","input_buffer_size","cec","igmp_conf","portal_dhcp","wifi_ssid","wifi_auth","wifi_enc","wifi_psk","wifi_wep_key1","wifi_int_dns","wifi_int_ip","wifi_int_mask","wifi_int_gw","mc_proxy_enabled","mc_proxy_url","lan_noip","ipaddr_conf","dnsip","pppoe_enabled","pppoe_login","pppoe_dns1","update_url","custom_url_hider","useExtPortalsPage","bootstrap_url","update_channel_url","audio_stereo_out_mode","audio_dyn_range_comp","audio_operational_mode","audio_spdif_mode","audio_hdmi_audio_mode","wifi_wep_def_key","wifi_wep_key1","wifi_wep_key2","wifi_wep_key3","wifi_wep_key4","gatewayip","lan_noip","netmask","debug","playerHardwareAcceleration"]}));try{o=(o=JSON.parse(o)).result}catch(e){o={}}o.language=o.language||"en",o.availableLanguages=[],function(){for(var e,t,n=0,i=gSTB.RDir("tempfile read languages_utf8.txt").split("\n"),a={estoninan:{code:"et",name:"Estonian (Eesti keel)"},latvian:{code:"lv",name:"Latvian (LatvieÅ¡u)"}};n<i.length;)""!==i[n]&&(e=i[n].split('"'),t=decodeURIComponent(escape(e[3])),(e=e[1])===a.estoninan.code&&(a.estoninan=!1),e===a.latvian.code&&(a.latvian=!0),o.availableLanguages.push({code:e,name:t})),++n;a.latvian&&o.availableLanguages.push(a.latvian),a.estoninan&&o.availableLanguages.push(a.estoninan)}(),""===o.hdmi_event_delay&&(o.hdmi_event_delay="3",window.gSTB.SetEnv(JSON.stringify({hdmi_event_delay:"3"}))),""===o.defaultLedLevel&&(o.defaultLedLevel=10),""===o.standbyLedLevel&&(o.standbyLedLevel=100),""===o.audioPrimaryLanguage&&(o.audioPrimaryLanguage=o.language),""===o.audioSecondaryLanguage&&(o.audioSecondaryLanguage=o.language),""===o.subtitlesPrimaryLanguage&&(o.subtitlesPrimaryLanguage=o.language),""===o.subtitlesSecondaryLanguage&&(o.subtitlesSecondaryLanguage=o.language),""===o.auto_framerate&&(o.auto_framerate="Disabled"),o.onFocusDebounceTimeout=300,e.exports=o},function(e,t,n){"use strict";var o=null;o=n(16),e.exports=o},function(e,t,n){"use strict";var o,i={},a="applications-storage.json";try{o=gSTB.LoadUserData(a),i=JSON.parse(o)}catch(e){0}function s(e){if(this.store={},Object.defineProperty(this,"prefix",{get:function(){return e+".storage"}}),this.originJSON=i[this.prefix],this.originJSON)try{this.store=JSON.parse(this.originJSON)}catch(e){0,this.originJSON=""}}window.addEventListener("unload",function(){0}),s.prototype.getItem=function(e){return this.store[e]},s.prototype.setItem=function(e,t){var n;try{n=JSON.stringify(t)}catch(e){return}if(this.store[e]=t,(n=JSON.stringify(this.store))!==this.originJSON)return this.originJSON=n,void(i[this.prefix]=this.originJSON)},s.forceFlush=function(){var e=JSON.stringify(i);o===e||window.gSTB.SaveUserData(a,e)},e.exports=s},function(e,t,n){"use strict";var o=null,i=null,a=null,s=null;e.exports=function(e,t){var r,c,p;n(9);for(null===o&&(o=n(0)),null===i&&(i=n(3)),null===a&&(a=n(10)),"keydown:27"===e&&(n(6).emit("home"),i.hideAll()),r=0,c=o.coreList.length;r<c;)(p=o.coreList[r])&&p.system&&p.events[e]&&p.emit(e,t),++r;null===s&&(s=n(11).keydown),"function"==typeof s&&s(e,t)}},function(e,t,n){"use strict";e.exports=function(e){var t;if(0!==e.keyCode)return t=e.keyCode,e.ctrlKey&&(t+="c"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}},function(e,t,n){"use strict";var o,i,a=n(35),s=n(7),r=n(3),c=n(11),p=n(8),l=[],d=0,u=!0,h=!1;function f(e){var t,n;if(u)switch(t=document.createElement("link"),n=window.innerHeight||window.screen.height){case 480:case 576:case 720:case 1080:break;default:n=720}if(e.core.ready){if(e===r.launcher&&r.home)return void f(r.home);p.hide(),e.config.locked&&window.core.accessControl?window.core.accessControl.request(function(t){t?(p.init(),r.show(r.launcher)):(p.init(),r.show(e))}):(p.init(),r.show(e)),r.daemons.forEach(function(e){setTimeout(function(){e.emit("launcher:ready")},0)}),u&&(t.rel="stylesheet",t.href=window.core.theme.path+n+".css",document.head.appendChild(t))}else e.core.once("app:ready",function(){e===r.launcher&&r.home?f(r.home):(p.hide(),e.config.locked&&window.core.accessControl?window.core.accessControl.request(function(t){t?(p.init(),r.show(r.launcher)):(p.init(),r.show(e))}):(p.init(),r.show(e)),r.daemons.forEach(function(e){e.emit("launcher:ready")}),u&&(t.rel="stylesheet",t.href=window.core.theme.path+n+".css",document.head.appendChild(t)))})}for(0,i=s.data.apps.length;d<i;)if("auth"!==(o=s.data.apps[d]).type){switch(o.type){case"launcher":!function(e){r.launchers.length>0?core.notify({title:"Attention you have 2 launchers in config!!!!",icon:"warning"}):l.push(function(t){setTimeout(function(){r.launcher=r.runApp({config:s.data.apps[e],visible:!1,onload:function(){setTimeout(function(){h||t(!1,r.launcher)},0)},onerror:function(e){0}})},0)}),r.launchers.push(s.data.apps[e])}(d);break;case"system":!function(e){l.push(function(t){setTimeout(function(){var n=r.runApp({config:s.data.apps[e],visible:!1,onready:function(){setTimeout(function(){h||t(!1,n)},0)},onerror:function(e){0}})},0)})}(d);break;case"osd":!function(e){setTimeout(function(){r.runApp({config:s.data.apps[e],visible:!1})},0)}(d)}++d}else u=!1,++d;r.homeConfig&&l.push(function(e){setTimeout(function(){r.home=r.runApp({config:r.homeConfig,visible:!1,onready:function(){setTimeout(function(){h||e(null,r.home)},0)}})},0)}),a.parallel(l,function(){c.load&&c.load(),h=!0,r.home?f(r.home):r.launcher?f(r.launcher):(document.body.innerHTML="",document.body.style.backgroundColor="#1B5E20 !important",document.body.style.overflow="scroll",document.body.appendChild(document.createElement("pre")),document.body.firstChild.tabIndex=1,document.body.firstChild.style.cssText="overflow-y: scroll; height: "+window.innerHeight||!1,document.body.firstChild.innerText="Launcher not found in config: Fatal Exception",document.body.firstChild.focus())})},function(e,t,n){"use strict";window.dvbManager=window.top.dvbManager,window.epgManager=window.top.epgManager,window.gSTB=window.top.gSTB,window.pvrManager=window.top.pvrManager,window.stbDownloadManager=window.top.stbDownloadManager,window.stbStorage=window.top.stbStorage,window.stbUpdate=window.top.stbUpdate,window.stbUPnP=window.top.stbUPnP,window.stbWebWindow=window.top.stbWebWindow,window.stbWindowMgr=window.top.stbWindowMgr,window.timeShift=window.top.timeShift,window.stbPlayerManager=window.top.stbPlayerManager;var o=n(21),i=n(0),a=n(3),s=n(10),r=n(7),c=n(29),p=o(document.location.search.substring(1)),l=n(11),d=n(8),u=n(15),h=[],f={};n(9),n(31),n(34),window.MODE_PORTAL=!1,window.MODE_STALKER=!0,window.MODE="MINISTRA",window.extendCorePrototype("Storage",u),l.init(),window.getCoreInstance=window.getCoreInstanse=function(e){var t=i.getInstance(e);return t.widget=c,t.system=!0,t.packages=h,t.packageMap=f,t.taskManager=a,t.updatePackages=function(e){h.splice(0),Object.keys(f).forEach(function(e){delete f[e]}),e.forEach(function(e){f[e.packageName]=e,h.push(e)})},t.reload=function(e){u.forceFlush(),n(12).reload(e)},t.reboot=function(){u.forceFlush(),n(12).reboot()},t},window.system=window.core=window.getCoreInstance(window),window.system.queryParameters=p,window.core.storage=new window.core.constructor.prototype.Storage("magcore-core"),window.addEventListener("keydown",function(e){var t=n(17);0!==e.keyCode&&(9===e.keyCode&&e.preventDefault(),t("keydown:"+n(18)(e),e))}),r.load(p,function(e){var t,o,i,c,l,u=-1,w=null,m={};if(e)return window.splash=document.body.appendChild(document.createElement("div")),window.splash.style.backgroundColor="#1B5E20",window.splash.style.overflow="scroll",window.splash.innerHTML='<pre tabindex="1" style="padding: 40px; overflow-y: scroll; height: '+screen.height+"px; width: "+screen.width+'px;font-family: monospace;font-size: 16px; text-align: left;padding: 10px;color: #fff;">'+e+"\nCore Panic: Fatal Exception</pre>",void window.splash.firstChild.focus();for(u=0;u<r.data.apps.length;u++)if("launcher"===r.data.apps[u].type){window.splash.className="container",d.show(r.data.apps[u]),p.buildDate&&(window.splashAppVersion.innerText=p.buildDate);break}for(u=-1,p.backendHost&&(r.data.options.stalkerHost=p.backendHost,r.data.options.stalkerApiPath="/stalker_portal/api/v3/",r.data.options.stalkerAuthPath="/stalker_portal/auth/token.php",r.data.options.pingTimeout=12e4,r.data.options.stalkerLoaderPath="/stalker_portal/c/",r.data.options.sap=p.backendHost+"/stalker_portal/server/api/sap.php"),core.config=r.data,o=r.data.apps.length-1,n(1).basePath=r.data.options.pluginsPath,window.core.dependencyManager=n(1),window.extendCorePrototype("theme",{path:r.data.theme,vars:r.data.themeVars}),window.extendCorePrototype("themes",r.data.themes);u<o;){switch(++u,c=r.data.apps[u].packageName,r.data.apps[u].type){case"auth":w=r.data.apps[u];break;case"plugin":0,r.data.apps[u].daemon&&(m[r.data.apps[u].packageName]=r.data.apps[u].version);default:h.push(JSON.parse(JSON.stringify(r.data.apps[u]))),f[c]=h[h.length-1]}s.resolveActionsConfig(r.data.apps[u])}if(n(1).load({dependencies:m,dependencyReady:function(e,t){e||"function"!=typeof t.instance.onInit||t.daemonLoaded||(t.daemonLoaded=!0,t.instance.onInit({storage:n(1).getPluginStorage(t.name),options:t.options,path:t.path},function(e,t){e||"object"!=typeof t||"function"!=typeof t.emit||a.daemons.push(t)}))}}),a.init(),null===w)a.daemons.forEach(function(e){e.emit("system:start")}),n(19);else{switch(t=window.innerHeight||window.screen.height){case 480:case 576:case 720:case 1080:break;default:t=720}(i=document.createElement("link")).rel="stylesheet",i.href=window.core.theme.path+t+".css",document.head.appendChild(i),(l=a.runApp({config:w,visible:!0,onready:function(){0},onload:function(){0}})).core.once("ready",function(e){(e=e||{}).stop||(a.daemons.forEach(function(e){try{e.emit("system:start")}catch(e){0}}),l.$iframe.hide(),l.core.emit("hide",{source:window.core.SOURCES.SYSTEM}),n(19))}),l.core.once("show",d.init)}}),window.addEventListener("unload",function(){l.unload&&l.unload()}),window.addEventListener("focus",function(){a.topApp?a.topApp.$iframe.contentWindow.focus():a.focusedApp?a.focusedApp.$iframe.contentWindow.focus():a.launcher&&a.launcher.$iframe.contentWindow.focus()}),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&(a.topApp?(a.topApp.$iframe.contentWindow.focus(),a.topApp.core.emit("focus")):a.focusedApp?(a.focusedApp.$iframe.contentWindow.focus(),a.focusedApp.core.emit("focus")):a.launcher&&(a.launcher.$iframe.contentWindow.focus(),a.launcher.core.emit("focus")))}),window.core.environment.debug&&window.core.addListener("keydown:68ca",function(){var e,t,n,o;e="magcore-core",t="magcore-core-debug",n=new XMLHttpRequest,o=location.protocol+"//"+location.host+location.pathname.replace(e,t)+location.search+location.hash,n.open("GET",o),n.onload=function(){200===this.status&&(location.href=o)},n.send()})},function(e,t,n){"use strict";e.exports=function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t}},function(e,t,n){"use strict";var o={url:"about:blank",top:0,left:0,visible:"hidden",width:window.innerWidth||screen.width,height:window.innerHeight||screen.height};function i(){this.style.display="none",this.isVisible=!1}function a(){this.style.display="",this.isVisible=!0}switch(o.height){case 480:case 576:case 720:case 1080:break;default:o.width=1280,o.height=720}e.exports=function(e){var t,s=document.createElement("iframe");return"function"==typeof e.onload&&(s.onload=e.onload),s.show=a,s.hide=i,s.isVisible=null,s.style.width=e.width||o.width+"px",s.style.height=e.height||o.height+"px",s.style.top=e.top||o.top,s.style.left=e.left||o.left,e.visible?s.show():s.hide(),s.src=e.url||o.url,e.onerror&&((t=new XMLHttpRequest).open("HEAD",s.src),t.timeout=1e4,t.onload=function(){200!==this.status&&(0===this.status&&-1!==s.src.indexOf("file://")||e.onerror(this.status))},t.onerror=function(){e.onerror(this.status)},t.ontimeout=function(){e.onerror(this.status)},t.send()),e.$container.appendChild(s),e.type&&"app"!==e.type&&(s.contentWindow.system=n(6)),s.contentWindow.alert=function(){},s}},function(e,t,n){"use strict";var o={dvbManager:window.dvbManager,epgManager:window.epgManager,gSTB:window.gSTB,pvrManager:window.pvrManager,stbDownloadManager:window.stbDownloadManager,stbStorage:window.stbStorage,stbUpdate:window.stbUpdate,stbUPnP:window.stbUPnP,stbWebWindow:window.stbWebWindow,stbWindowMgr:window.stbWindowMgr,timeShift:window.timeShift,stbPlayerManager:window.stbPlayerManager,stbEvent:window.stbEvent,exit:function(){window.location.href=n(24)()||"file:///home/web/services.html"}},i=n(14).language,a={};Object.defineProperty(a,"inputLanguage",{set:function(e){i=e,gSTB.SetInputLang(e)},get:function(){return i}}),window.extendCorePrototype("tools",{hash:gSTB.GetHashVersion1,uid:gSTB.GetUID,debug:"function"==typeof window.debug||gSTB.Debug}),window.extendCorePrototype("settings",a),window.extendCorePrototype("device",{model:gSTB.GetDeviceModelExt(),serialNumber:gSTB.GetDeviceSerialNumber(),vendor:gSTB.GetDeviceVendor(),versionHardware:gSTB.GetDeviceVersionHardware(),activeBank:gSTB.GetDeviceActiveBank(),imageDescription:gSTB.GetDeviceImageDesc(),imageVersion:gSTB.GetDeviceImageVersion(),imageVersionCurrent:gSTB.GetDeviceImageVersionCurrent(),mac:gSTB.GetDeviceMacAddress(),memory:void 0}),e.exports=o},function(e,t,n){"use strict";var o=n(25).parse;e.exports=function(){var e=o(location.search.substring(1));return e.referrer?e.referrer:!!document.referrer&&(location.href.split("#")[0]!==document.referrer&&document.referrer)}},function(e,t,n){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+"="+encodeURIComponent(e[n]))}),t.join("&")}}},function(e,t,n){"use strict";var o=n(2);function i(e,t){var n;if(this.state=i.prototype.STATE_CREATED,this.action=e.action,this.parent=e.parent||null,this.mime=e.mime,this.data=e.data,this.context=e.context,this.silent=e.silent,this.callback=t,o.call(this,e),e.events)for(n in e.events)e.events[n]&&this.addListener(n,e.events[n])}i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.STATE_CREATED=0,i.prototype.STATE_RESOLVED=1,i.prototype.STATE_NOT_RESOLVED=2,i.prototype.STATE_CONTEXT_RECEIVED=3,i.prototype.STATE_ERROR_RECEIVED=4,i.prototype.STATE_CLOSED=5,i.prototype.STATE_PAUSED=6,i.prototype.emit=function(e,t){var n,o=this.events[e];if(o)for(n=0;n<o.length;n++){0;try{o[n].call(this,t)}catch(e){0}}},i.prototype.close=function(e){this.state=i.prototype.STATE_CLOSED,this.emit("close",e)},i.prototype.show=function(e,t){var o=n(3),i=n(4),a={source:i.prototype.SOURCES.INTENT,data:{intent:this,config:t}};o.apps[e]?o.topApp.pid!==e&&o.show(o.apps[e],a):(o.topApp&&(o.topApp.$iframe.hide(),o.topApp.core.emit("hide",{source:i.prototype.SOURCES.SYSTEM})),o.show(o.launcher),o.launcher.core.emit("focus"))},i.prototype.pause=function(){this.savedstate=this.state,this.state=i.prototype.STATE_PAUSED},i.prototype.resume=function(){var e=this;setTimeout(function(){e.state=i.prototype.STATE_CREATED,"function"==typeof e.continueCallback&&e.continueCallback()},0)},e.exports=i},function(e,t,n){"use strict";e.exports={author:{name:"Infomir",email:"support@infomir.eu"},languages:["de","el","es","fr","it","nl","pl","ru","et","lv","sl","uk","hy","ka","bg","tr","pt","az"],license:"license.md",order:["magcore-app-tv","magcore-app-tv-classic","magcore-app-dvb","magcore-app-video-club","magcore-app-video-club-prime","magcore-app-radio","magcore-app-magic-cast","magcore-app-audio-club","magcore-app-explorer","magcore-app-records","magcore-app-weather","magcore-app-personal-account","magcore-app-settings","magcore-app-browser","magcore-app-downloads","magcore-app-karaoke","magcore-app-lines","magcore-app-sudoku","magcore-app-memory","magcore-app-2048"],resolutions:["480","576","720","1080"],source:"src"}},function(e,t,n){"use strict";var o=n(2);window.gSTB.GetDeviceModelExt?window.gSTB.GetDeviceModelExt():window.gSTB.GetDeviceModel();window.top.stbEvent=window.stbEvent=new o,window.stbEvent.onEvent=function(e,t){try{e=parseInt(e,10)}catch(e){return void 0}if(this.events["media"]){if(t)try{t=JSON.parse(t)}catch(e){t={}}this.emit("media",{code:e,info:t})}},window.stbEvent.onBroadcastMessage=function(e,t,n){this.events["message"]&&this.emit("message",{broadcast:!0,windowId:e,message:t,data:n})},window.stbEvent.onMessage=function(e,t,n){this.events["message"]&&this.emit("message",{broadcast:!1,windowId:e,message:t,data:n})},window.stbEvent.onMediaAvailable=function(e,t){this.events["media:available"]&&this.emit("media:available",{mime:e,url:t})},window.stbEvent.onNetworkStateChange=function(e){this.events["internet:state"]&&this.emit("internet:state",{state:e})},window.stbEvent.onWebBrowserProgress=function(e){this.events["browser:progress"]&&this.emit("browser:progress",{progress:e})},window.stbEvent.onWindowActivated=function(){this.events["window:focus"]&&this.emit("window:focus")},e.exports={unload:function(){},load:function(){0},init:function(){-1!==window.top.location.href.indexOf("load=true")&&window.top.stbWebWindow.close(),window.gSTB.SetNativeStringMode&&window.gSTB.SetNativeStringMode(!0)}}},function(e,t,n){"use strict";var o=n(30),i=0;function a(e){(e=e||{}).focusable=e.focusable||!1,e.visible=e.visible||!1,e.className="widget "+(e.className||""),o.call(this,e)}a.prototype=Object.create(o.prototype),a.prototype.constructor=a,e.exports=function(e){var t=new a({focusable:e.focusable,visible:e.visible,events:e.events});return t.className=t.$node.className="widgetClass"+i,e.visible||(t.$node.className="widgetClass"+i+" hidden"),++i,t.$node.style.zIndex=1e3,document.body.appendChild(t.$node),t}},function(e,t,n){"use strict";var o=n(2),i=null,a=0;function s(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,o.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){n.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){n.focus(),n.events["click"]&&n.emit("click",e),e.stopPropagation()})}s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.defaultEvents=null,s.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events["add"]&&this.emit("add",{item:e})},s.prototype.remove=function(){this.parent&&(i===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.events={},this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove")},s.prototype.focus=function(e){return!(!this.focusable||this===i)&&(i&&i.blur(),(i=this).$node.classList.add("focus"),i.events["focus"]&&i.emit("focus",e),!0)},s.prototype.blur=function(){return this.$node.classList.remove("focus"),this===i&&(i=null,this.events["blur"]&&this.emit("blur"),!0)},s.prototype.show=function(e){return!!this.visible||(this.$node.classList.remove("hidden"),this.visible=!0,this.events["show"]&&this.emit("show",e),!0)},s.prototype.hide=function(){return!this.visible||(this.$node.classList.add("hidden"),this.visible=!1,this.events["hide"]&&this.emit("hide"),!0)},e.exports=s},function(e,t,n){"use strict";n(32)},function(e,t,n){"use strict";n(33)},function(e,t,n){"use strict";if(!document.documentElement.classList){var o=Array.prototype,i=o.indexOf,a=o.slice,s=o.push,r=o.splice,c=o.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<n.length;t++)s.call(this,n[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(s.call(this,e),this._element.className=a.call(this,0).join(" "))},contains:function(e){return-1!==i.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=i.call(this,e);-1!==t&&(r.call(this,t,1),this._element.className=a.call(this,0).join(" "))},toString:function(){return c.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,n){"use strict";var o=document.createElement("link"),i=window.innerHeight||window.screen.height;switch(i){case 480:case 576:case 720:case 1080:break;default:i=720}o.rel="stylesheet",o.href="css/app."+i+".css",document.head.appendChild(o)},function(e,t,n){"use strict";e.exports.serial=n(36),e.exports.parallel=n(5)},function(e,t,n){"use strict";e.exports=function(e,t){var n=!1,o=0,i=[];e=Array.isArray(e)?e:[],"function"!=typeof t&&(t=function(){}),0===e.length?t(null,i):function a(s){var r=function(s,r){if(s)return n=!0,void t(s);i[o]=r,++o>=e.length?t(null,i):a(e[o])};n||(0===s.length?r(null,s()):s(r))}(e[0])}}]);
//# sourceMappingURL=main.js.map