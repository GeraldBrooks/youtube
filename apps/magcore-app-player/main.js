!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t,n){"use strict";var i=n(29);e.exports=i},function(e,t,n){"use strict";var i=n(13);i.back=i.backspace,i.channelNext=i.tab,i.channelPrev=i.tab+"s",i.ok=i.enter,i.exit=i.escape,i.volumeUp=107,i.volumeDown=109,i.f1="112c",i.f2="113c",i.f3="114c",i.f4="115c",i.refresh="116c",i.frame="117c",i.phone="119c",i.set="120c",i.tv="121c",i.menu="122c",i.app="123c",i.rewind="66a",i.forward="70a",i.audio="71a",i.standby="74a",i.keyboard="76a",i.usbMounted="80a",i.usbUnmounted="81a",i.playPause="82a",i.play=-1,i.pause=-1,i.stop="83a",i.power="85a",i.record="87a",i.info="89a",i.mute="192a",i.digit0=48,i.digit1=49,i.digit2=50,i.digit3=51,i.digit4=52,i.digit5=53,i.digit6=54,i.digit7=55,i.digit8=56,i.digit9=57,e.exports=i},function(e,t,n){"use strict";var i=n(4),a=n(5),r=0;function o(e){var t,n=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,a.call(this),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className=this.name+" "+(e.className||""),this.id=e.id||this.$node.id||"cid"+r++,e.parent&&e.parent.add(this),!1===e.visible&&this.hide(),!1===e.focusable&&(this.focusable=!1),this.defaultEvents)for(t in e.events=e.events||{},this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t];e.events&&Object.keys(e.events).forEach(function(t){n.addListener(t,e.events[t])}),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){n.focus(),n.events["click"]&&n.emit("click",e),e.stopPropagation()}),this.name,this.id,this.name,this.id}o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.prototype.defaultEvents=null,o.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),e.name,e.id,this.name,this.id,this.name,this.id,e.name,e.id,this.events["add"]&&this.emit("add",{item:e})},o.prototype.remove=function(){this.parent&&(i.activePage.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.$node.parentNode.removeChild(this.$node),this.events["remove"]&&this.emit("remove"),this.events={},this.name,this.id,this.name,this.id},o.prototype.focus=function(e){var t=i.activePage,n=t.activeComponent;return!(!this.focusable||this===n)&&(n&&n.blur(),t.activeComponent=n=this,n.$node.classList.add("focus"),this.name,this.id,this.name,this.id,n.events["focus"]&&n.emit("focus",e),!0)},o.prototype.blur=function(){var e=i.activePage,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.name,this.id,this.name,this.id,this.events["blur"]&&this.emit("blur"),!0):(this.name,this.id,this.name,this.id,!1)},o.prototype.show=function(e,t){return!this.visible&&(this.$node.classList.remove("hidden"),this.visible=!0,this.name,this.id,this.name,this.id,this.events["show"]&&this.emit("show",e),"function"==typeof t&&setTimeout(t),!0)},o.prototype.hide=function(e){return!!this.visible&&(this.$node.classList.add("hidden"),this.visible=!1,this.name,this.id,this.name,this.id,this.events["hide"]&&this.emit("hide"),"function"==typeof e&&setTimeout(e),!0)},e.exports=o},function(e,t,n){"use strict";var i,a,r=n(5),o=n(0),s=n(11),l=n(6),c=new r,u={},d=o.playerManager,p=o.playerManager.list,h=o.playerManager.list[0],m=0,f=top.system&&top.system.queryParameters&&top.system.queryParameters.proxy?top.system.queryParameters.proxy:"",v=1===o.playerManager.list.length||l.useSingleModeByDeviceModel();function y(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("media:info",{audioTracks:h.audioTracks,subtitlesTracks:h.subtitlesTracks})}function g(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("content:info",{videoInfo:h.videoInfo})}function b(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("end",{})}function T(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("start",{})}function P(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("error",{code:5})}function x(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("content:dualMono",{})}function I(){o.lastPrimaryIntent&&o.lastPrimaryIntent.emit("tracks:update",{tracks:h.subtitlesTracks})}function w(e){e.onPlayStart=T,e.onPlayEnd=b,e.onPlayError=P,e.onTracksInfo=y,e.onTracksUpdate=I,e.onContentInfo=g,e.onDualMono=x}function k(e){e.onPlayStart=function(){},e.onPlayEnd=function(){},e.onPlayError=function(){},e.onTracksInfo=function(){},e.onContentInfo=function(){},e.onDualMono=function(){},e.onTracksUpdate=function(){}}function S(e){o.log("set audio to player #"+e.id),o.audioManager.list[0].list[0]!==e&&(o.audioManager.list[0].clear(),o.audioManager.list[0].add(e))}c.STATE_IDLE=0,c.STATE_OPENING=1,c.STATE_PLAYING=2,c.STATE_PAUSE=3,o.query.multicastProxy&&(f=o.query.multicastProxy),c.intent=function(e,t,n){e&&e.action&&u[e.action]&&u[e.action](e,t,n)},w(h),S(h),c.setAudioSource=S,c.primary={stop:function(){h&&(s(),h.stop())},pause:function(){h.pause()},resume:function(){h.resume()},rewind:function(e){h.position+=+e},setAudioPid:function(){},play:function(e){h.play({uri:e.uri,solution:e.solution||"",position:e.position||0})},loadExternalSubtitles:function(e){h.loadExternalSubtitles(e),c.primary.enableSubtitles=!0}},c.reset=function(){h=d.list[0],m=0,o.lastPrimaryIntent=null,o.pipPlayer=null,w(h),S(h),h.fullscreen=!0},Object.defineProperties(c.primary,{duration:{get:function(){return h.duration},set:function(e){h.duration=e}},position:{get:function(){return h.position},set:function(e){h.position=e}},state:{get:function(){return h.state}},aspect:{get:function(){return h.aspectConversion},set:function(e){h.aspectConversion=e}},audioPID:{get:function(){return h.audioPID},set:function(e){h.audioPID=e}},audioTracks:{get:function(){return h.audioTracks}},subtitlesPID:{get:function(){return h.subtitlesPID},set:function(e){h.subtitlesPID=e,h.enableSubtitles=!!e}},subtitlesTracks:{get:function(){return h.subtitlesTracks},set:function(){}},enableSubtitles:{get:function(){return h.enableSubtitles},set:function(e){h.enableSubtitles=!!e}},videoInfo:{get:function(){return h.videoInfo}},volume:{get:function(){return h.volume},set:function(e){h.volume=+e}}}),Object.defineProperty(c,"subtitlesEncoding",{get:function(){return d.list[0].subtitlesEncoding},set:function(e){d.list.forEach(function(t){t.subtitlesEncoding=e})}}),u.play=function(e,t,n,i){var r,s,c,u,d={};return e.context?(s=p[e.context.playerId],r=e.context):(s=h,r={playerId:m}),s===h&&(o.lastPrimaryIntent=e),v?o.pipPlayer&&(h=o.pipPlayer,s=h,h.fullscreen=!0,o.pipPlayer.surface.moveDown(),o.pipPlayer=null,o.log("emit exit event to pip intent"),a.emit("exit")):o.pipPlayer&&S(h),Object.defineProperties(d,{position:{get:function(){return h.position}},duration:{get:function(){return h.duration}},audioLang:{get:function(){var e,t=[];for(e=0;e<h.audioTracks.length;e++)h.audioTracks[e].pid===h.audioPID&&(t=h.audioTracks[e].lang).indexOf("und")>-1&&(t=[]);return t}}}),e.addListener("set:viewport",function(e){s.setViewport(l.getRealViewPort(e))}),e.addListener("set:fullscreen",function(){s.fullscreen=!0}),e.data.viewport?s.setViewport(l.getRealViewPort(e.data.viewport)):s.fullscreen=!0,void 0!==e.data.aspect&&(s.aspectConversion=e.data.aspect),(!core.device||"AndroidSTB"!==core.device.model&&"emulator_stb"!==core.device.model)&&(e.data.displayOnTop?s.surface.moveTop():s.surface.moveDown()),e.data.uri&&(o.lastPlayUri=e.data.uri,c=e.data.solution,n&&n.solution&&(c=n.solution),e.data.extra&&e.data.extra.length?(u=c+" "+e.data.uri,e.data.position&&(u+=" position:"+e.data.position),u+=" "+e.data.extra,s.play({playStr:u,proxy:f})):s.play({uri:e.data.uri,solution:c,position:e.data.position||0,proxy:f})),o.log("player #"+s.id+" start play"),r.metadata=d,t&&!i&&(window.lastCtx=r,t(!1,r)),{error:!1,context:r}},u.pip=function(e){var t,n,r={};o.log("pip"),v?(o.pipPlayer=h,o.pipPlayer.surface.moveTop(),i=o.lastPrimaryIntent,h=null):o.pipPlayer?(!core.device||"MAG256"!==core.device.model&&"MAG257"!==core.device.model?d.swap(o.pipPlayer,h):h.setViewport(o.pipPlayer.viewport),o.pipPlayer.stop(),t=o.pipPlayer,o.pipPlayer=h,h=t,i=o.lastPrimaryIntent,o.lastPrimaryIntent=null,m=0,S(o.pipPlayer),o.pipPlayer.surface.moveTop(),k(o.pipPlayer),w(h)):(n=h.id,o.pipPlayer=h,n?(h=p[0],m=0):(h=p[1],m=1),o.log("pip player is #"+o.pipPlayer.id),o.pipPlayer.surface.moveTop(),k(o.pipPlayer),w(h),i=o.lastPrimaryIntent,o.lastPrimaryIntent=null),Object.defineProperties(r,{position:{enumerable:!0,get:function(){return!!o.pipPlayer&&o.pipPlayer.position}},duration:{enumerable:!0,get:function(){return!!o.pipPlayer&&o.pipPlayer.duration}},playerState:{enumerable:!0,get:function(){return!!o.pipPlayer&&o.pipPlayer.state}}}),r.title=i.data.title||i.data.uri||"",a=core.intent({action:"pip",mime:e.mime,data:r,events:{viewport:function(e){o.pipPlayer.setViewport(e)},pause:function(){o.pipPlayer.pause()},resume:function(){o.pipPlayer.resume()},maximize:function(){v?(h=o.pipPlayer,o.lastPrimaryIntent=i,h.fullscreen=!0,h.surface.moveDown(),o.pipPlayer=null):(o.log("maximize pip window"),o.log("primary player was #"+h.id),s(),h.stop(),h=o.pipPlayer,m=0,o.pipPlayer=null,o.lastPrimaryIntent&&o.lastPrimaryIntent.close(),o.lastPrimaryIntent=i,h.fullscreen=!0,h.surface.moveDown(),S(h),w(h),o.log("primary player now is #"+h.id)),e.events.maximize&&e.emit("maximize")},swap:function(){var t,n;v||o.lastPrimaryIntent&&o.lastPrimaryIntent.data&&o.lastPrimaryIntent.data.controls&&!1===o.lastPrimaryIntent.data.controls.pip||(0!==h.state&&(t=o.pipPlayer,o.pipPlayer=h,h=t,d.swap(o.pipPlayer,h),n=o.lastPrimaryIntent,o.lastPrimaryIntent=i,i=n,k(o.pipPlayer),w(h),S(h),a.data.mime=i.mime),e.events.swap&&e.emit("swap"))},stop:function(){o.log("pip event stop"),o.pipPlayer.stop(),o.log("player #"+o.pipPlayer.id+" stop"),o.pipPlayer.fullscreen=!0,o.pipPlayer.surface.moveDown(),o.pipPlayer=null,!v&&h.state||(h=p[0]),S(h),m=h.id,w(h),o.pipIntent=null}}},function(e,t){})},n(53)(c),e.exports=c},function(e,t,n){"use strict";var i=n(5),a=n(30).parse,r=new i;r.query=a(document.location.search.substring(1)),r.config=n(8),r.activePage=null,r.route=function(e,t){var n,i=r.activePage;return!(!e||e.active)&&(e.name,e.id,e.name,e.id,(n=r.activePage)&&n.active&&(n.$node.classList.remove("active"),n.active=!1,r.activePage=null,n.name,n.id,n.name,n.id,n.events["hide"]&&n.emit("hide")),function(e,t){!e||e.active||(e.$node.classList.add("active"),e.active=!0,r.activePage=e,e.name,e.id,e.name,e.id,e.events["show"]&&e.emit("show",{data:t}))}(e,t),this.events["route"]&&this.emit("route",{from:i,to:e}),!0)},e.exports=r},function(e,t,n){"use strict";function i(){this.events={}}i.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function i(){n.removeListener(e,i),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},i.prototype.constructor=i,e.exports=i},function(e,t,n){"use strict";var i=n(0),a={},r=document.createElement("a"),o={480:{width:720,height:480},"480i":{width:720,height:480},"480p":{width:720,height:480},576:{width:720,height:576},"576i":{width:720,height:576},"576p":{width:720,height:576},720:{width:1280,height:720},"720p":{width:1280,height:720},"720p60":{width:1280,height:720},1080:{width:1920,height:1080},"1080i":{width:1920,height:1080},"1080i60":{width:1920,height:1080},"1080p":{width:1920,height:1080},"1080p60":{width:1920,height:1080},"3840x2160p30":{width:3840,height:2160},"3840x2160p25":{width:3840,height:2160},"3840x2160p50":{width:3840,height:2160},"3840x2160p60":{width:3840,height:2160}};a.parseTime=function(e){var t,n,i;return e>=0?(i=e-3600*(t=Math.floor(e/3600))-60*(n=Math.floor((e-3600*t)/60)),t<10&&(t="0"+t),i<10&&(i="0"+i),n<10&&(n="0"+n)):(i=(e=Math.abs(e))-3600*(t=Math.floor(e/3600))-60*(n=Math.floor((e-3600*t)/60)),t<10&&(t="0"+t),i<10&&(i="0"+i),n<10&&(n="0"+n),t="-"+t),{hour:t,min:n,sec:i}},a.checkUsb=function(){var e,t=JSON.parse(top.gSTB.GetStorageInfo("{}")).result||[];for(e=0;e<t.length;e++)if(t[e].mountPath&&0===t[e].isReadOnly)return!0;return!1},a.getCodecImageName=function(e){var t="./img/",n=480===i.metrics.height?576:i.metrics.height,a={1:"mpeg2.png",2:"mp3.png",3:"dolby.png",4:"dolby.png",5:"pcm.png",6:"ogg.png",7:"dts.png",8:"dolby.png"};return e&&a[e]?t+=n+"/codec/"+a[e]:t="",t},a.getRealViewPort=function(e){var t=top.gSTB.RDir("vmode"),n=o[t]||o[t.match(/^(\d)*/g)[0]],i=screen.height,a=screen.width,r={};return r.x=Math.round(e.x*n.width/a),r.width=Math.round(e.width*n.width/a),r.y=Math.round(e.y*n.height/i),r.height=Math.round(e.height*n.height/i),r},a.parseUriString=function(e){return r.href=e,{protocol:r.protocol,port:r.port,host:r.hostname}},a.useSingleModeByDeviceModel=function(){var e=n(8).preventMultiplePlayer||[];return!!core.device&&e.indexOf(core.device.model)>-1},a.detectPipSupport=function(){var e=i.config.pipDisableModels;return(!core.packageMap||!core.packageMap[n(44).name])&&(!core.device||-1===e.indexOf(core.device.model))},a.removePipOnAudioMime=function(e){return!("content/audio"!==e.mime||!core.device||"MAG256"!==core.device.name)&&(e.data.controls?e.data.controls.pip=!1:e.data.controls={pip:!1},!0)},a.checkAppByPid=function(e){return[].concat(top.core.taskManager.stack).findIndex(function(t){return t.config.pid===e})>-1},e.exports=a},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";e.exports={debug:!0,preventMultiplePlayer:[],disableSoundOptions:["emulator_stb","emulator"],pipDisableModels:["emulator","emulator_stb","AndroidAPP","AndroidSTB","MAG250","MAG322","MAG323","MAG324","MAG325","MAG275","MAG349","IM2100","IM2101","IM2100V","M2101","IM2101V","AuraHD4","IM2102"],disableSpinnerAnimation:["MAG256","MAG257","MAG250"],pipSupport:!0,waitUntilPlayEvent:15e3}},function(e,t,n){"use strict";var i=n(20),a=n(21);function r(e){var t=this;e=e||{},this.handlers={},this.$noData=null,e.propagate=void 0===e.propagate||e.propagate,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",i.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-layout-list",r.prototype.renderItemDefault=function(e,t){var n,i,r,o,s;if(e.ready&&this.fixedData)for(s=0;s<t.items.length;s++)"string"!=typeof(o=t.items[s]).value&&void 0!==o.value||((r=e.layout.$node.childNodes[s]).innerText=o.value||"",r.className=o.className||"");else{for(;e.firstChild;)e.removeChild(e.firstChild);i={focusable:!1,data:t.items},t.className&&(i.className=t.className),n=new a(i),e.appendChild(n.$node),e.layout=n,n.parent=this,n.$parentItem=e,n.addListener("click",function(){n.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},r.prototype.setData=function(e){i.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},r.prototype.init=function(e){var t;i.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&((t=document.createElement("div")).innerText=e.noData,this.$noData.appendChild(t))),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},r.prototype.renderItem=r.prototype.renderItemDefault,e.exports=r},function(e,t,n){"use strict";e.exports=n(51),e.exports.prototype.name="stb-component-page"},function(e,t,n){"use strict";var i=n(0);e.exports=function(){var e,t,n,a=new Date,r=a.getDate(),o=a.getMonth()+1,s=a.getFullYear(),l=a.getMinutes(),c=a.getHours(),u=a.getSeconds();if(i.playback.timeshift.active)switch(i.lastPrimaryIntent&&i.lastPrimaryIntent.data?e=i.lastPrimaryIntent.data.title||i.lastPrimaryIntent.data.uri:i.currentPlayIntent&&i.currentPlayIntent.data&&(e=i.currentPlayIntent.data.title||i.currentPlayIntent.data.uri),e=(e||"").replace(/\//g,"-").replace(/\>/g,"-").replace(/</g,"-").replace(/\|/g,"-").replace(/\?/g,"-").replace(/\*/g,"-").replace(/\\/g,"-").replace(/\:/g,"-"),i.timeshift.onExit){case i.timeshift.EXIT_NOT_SAVE:i.timeshift.exit();break;case i.timeshift.EXIT_SAVE:t=i.timeshift.path+"/"+e+"/"+s+"-"+(o>9?o:"0"+o)+"-"+(r>9?r:"0"+r)+"/",n=(c>9?c:"0"+c)+"-"+(l>9?l:"0"+l)+"-"+(u>9?u:"0"+u),i.timeshift.path&&e?i.timeshift.exit({save:{path:t,name:n}}):i.timeshift.exit();break;case i.timeshift.EXIT_REQUEST_SAVE:}}},function(e,t,n){"use strict";var i,a=n(8),r=document.getElementById("spinner");e.exports={show:function(){core&&core.device&&a.disableSpinnerAnimation.indexOf(core.device.model)>-1||r.classList.add("on")},showAfter:function(e){clearTimeout(i),i=setTimeout(this.show,e)},hide:function(){r.classList.remove("on"),clearTimeout(i)}}},function(e,t,n){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,n){"use strict";var i,a,r,o=n(52),s={1:{},"2T":{},"2B":{}};for(i=0,a=o.length;i<a;i++)r=o[i],s["1"][r["1"]]=s["2T"][r["2T"]]=s["2B"][r["2B"]]=[r.name,r.local];o=null,e.exports=s},function(e,t,n){"use strict";e.exports={$node:document.getElementById("equalizer"),slideIndex:0,timer:null,active:!1,show:function(){var e=this;clearTimeout(this.timeout),this.active=!0,this.$node.style.display="block",this.$node.children[this.slideIndex].style.display="block",this.timeout=setTimeout(function t(){e.$node.children[e.slideIndex].style.display="none",e.slideIndex<3?e.slideIndex++:e.slideIndex=0,e.$node.children[e.slideIndex].style.display="block",e.timeout=setTimeout(t,85)},85)},hide:function(){clearTimeout(this.timeout),this.$node.style.display="none",this.$node.children[this.slideIndex].style.display="none",this.active=!1},pause:function(){clearTimeout(this.timeout)}}},function(e,t,n){"use strict";var i,a,r=n(0),o=document.getElementById("info"),s=document.getElementById("infoText"),l=document.getElementById("infoIcon"),c=document.getElementById("dualMono"),u=!1;c.src="img/"+(1080===r.metrics.height?1080:720)+"/dualmono.png",r.addListener("route",function(e){e.to===r.pages.main&&u?o.classList.remove("bg"):e.to===r.pages.clear&&u&&o.classList.add("bg")}),e.exports={displayInfo:function(e){r.activePage===r.pages.main?o.classList.remove("bg"):o.classList.add("bg"),o.classList.add("visible"),u=!0,s.innerText=e.text||"",l.innerText=e.icon||"",clearTimeout(i),i=setTimeout(function(){o.classList.remove("visible"),s.innerText="",l.innerText="",u=!1},5e3)},showDualMono:function(){clearTimeout(a),c.classList.add("active"),a=setTimeout(function(){c.classList.remove("active")},5e3)}}},function(e,t,n){"use strict";var i=n(0),a=n(3),r=n(6).checkAppByPid,o=n(26),s=n(16).displayInfo,l=n(11),c={0:"Original",1:"Letter box",2:"Pan&Scan",3:"combined",4:"enlarged",5:"optimal"},u={};u.pip={icon:"theme-icon theme-icon-pip",title:gettext("PiP"),click:o},u.aspect={icon:"theme-icon theme-icon-aspect",title:gettext("Aspect"),click:function(){var e=a.primary.aspect;e<5?e++:e=0,a.primary.aspect=e,s({text:c[e],icon:"H"})}},u.settings={icon:"theme-icon theme-icon-settings",title:gettext("Settings"),click:function(){i.route(i.pages.settings)}},u.list={icon:"theme-icon theme-icon-menu",title:gettext("List"),click:function(){i.currentIntent&&i.currentIntent.data.persistent&&r(i.currentIntent.creator)?i.currentIntent.show(i.currentIntent.creator,{reasonToggleView:!0}):i.currentIntent?(i.currentIntent.close(),l(),a.primary.stop(),i.emit("close")):(i.emit("close"),l(),a.primary.stop(),core.call("hide"))}},u.subtitles={icon:"theme-icon theme-icon-subtitles",title:gettext("Subtitles"),click:function(){var e;i.playback.subtitles.list.length&&(a.primary.enableSubtitles?i.playback.subtitles.index>=i.playback.subtitles.list.length-1?(i.playback.subtitles.index=null,i.playback.subtitles.current=null,a.primary.subtitlesPID=null,s({text:"Subtitles off",icon:"u"})):(i.playback.subtitles.index++,i.playback.subtitles.current=i.playback.subtitles.list[i.playback.subtitles.index],i.playback.subtitles.currentPID=i.playback.subtitles.current.pid,e="Subtitles ",i.playback.subtitles.current&&i.playback.subtitles.current.lang?e+=i.playback.subtitles.current.lang[0]||"":e+=i.playback.subtitles.current.pid?"track "+i.playback.subtitles.current.pid:gettext("external"),s({text:e,icon:"u"}),a.primary.subtitlesPID=i.playback.subtitles.currentPID):i.playback.subtitles.currentPID&&null===i.playback.subtitles.index&&(i.playback.subtitles.index=0,i.playback.subtitles.current=i.playback.subtitles.list[0],i.playback.subtitles.currentPID=i.playback.subtitles.list[0].pid,e="Subtitles ",i.playback.subtitles.current&&i.playback.subtitles.current.lang?e+=i.playback.subtitles.current.lang[0]||"":e+=i.playback.subtitles.current.pid?"track "+i.playback.subtitles.current.pid:gettext("external"),s({text:e,icon:"u"}),a.primary.subtitlesPID=i.playback.subtitles.currentPID))}},e.exports=function(e,t){var n=[],a=2;return e=e||{},t&&t.data&&t.data.controls?(!1!==t.data.controls.pip&&i.config.pipSupport&&n.push(u.pip),!1!==t.data.controls.aspect&&n.push(u.aspect),n.push(u.list),!1!==t.data.controls.settings&&n.push(u.settings)):n=i.config.pipSupport?[u.pip,u.aspect,u.list,u.settings]:[u.aspect,u.list,u.settings],(e.subtitles||t&&t.data.controls&&!0===t.data.controls.subtitles)&&(a=3,n.push(u.subtitles)),n.indexOf(u.list)>-1&&(a=n.indexOf(u.list)),{data:n,focusIndex:a}}},function(e,t,n){"use strict";var i=n(62),a=n(7),r=n(1);function o(e){var t,n,a,o=this;(e=e||{}).events=e.events||{},e.focusable=e.focusable||!1,e.visible=e.visible||!1,e.events.click=e.events.click||function(){o.hide()},a=e.events.keydown,e.events.keydown=function(e){a&&a.call(this,e),e.code!==r.back&&e.code!==r.menu||(e.stop=!0,o.hide())},i.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),(t=document.createElement("div")).className="overlay",n=this.$body.parentNode.removeChild(this.$body),this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(n),this.$node.firstChild.firstChild.appendChild(t)}o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.name="mag-component-modal",o.prototype.focus=function(){this.$node.classList.add("active"),i.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof a&&this.children[0].focus()},o.prototype.blur=function(){this.$node.classList.remove("active"),i.prototype.blur.call(this)},e.exports=o},function(e,t,n){"use strict";var i=n(4);e.exports=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href="css/"+e+"."+i.metrics.height+".css",document.head.appendChild(t)}},function(e,t,n){"use strict";var i=n(7),a=n(1);function r(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),i.call(this,e),this.init(e)}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-list",r.prototype.TYPE_VERTICAL=1,r.prototype.TYPE_HORIZONTAL=2,r.prototype.renderItemDefault=function(e,t){e.innerText=t.value},r.prototype.renderItem=r.prototype.renderItemDefault,r.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.enter:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},r.prototype.init=function(e){var t,n,i=this,a=this.$body.children.length,r=function(e){this.data&&(i.focusItem(this),i.events["click:item"]&&i.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),e.events&&Object.keys(e.events).forEach(function(t){i.events[t]=null,i.addListener(t,e.events[t])}),this.size!==a)for(a>0&&(this.$body.innerText=null),n=0;n<this.size;n++)(t=document.createElement("div")).index=n,t.className="item",t.addEventListener("click",r),this.$body.appendChild(t);if(this.provider){if(this.provider.blocked)return;this.provider.get(null,function(t,n){t?i.events["data:error"]&&i.emit("data:error",t):(n&&(e.data=n,i.setData(e),i.scroll&&i.scroll.init({realSize:i.provider.maxCount,viewSize:i.provider.size,value:i.provider.head+i.provider.pos})),i.events["data:get"]&&i.emit("data:get"))})}else e.data&&this.setData(e)},r.prototype.setData=function(e){e.data&&(this.data=function(e){var t;for(t=0;t<e.length;t++)"object"!=typeof e[t]&&(e[t]={value:e[t]});return e}(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&(this.provider?this.scroll.realSize!==this.provider.maxCount&&this.scroll.init({realSize:this.provider.maxCount,viewSize:this.provider.size,value:this.provider.head+this.provider.pos}):this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0})),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},r.prototype.renderView=function(e){var t,n,i,a,r;if(this.viewIndex!==e){for(a=this.viewIndex,this.viewIndex=r=e,n=0;n<this.size;n++)t=this.$body.children[n],(i=this.data[e])?(t.data=i,t.index=e,this.renderItem(t,i),i.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:a,currIndex:r}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},r.prototype.move=function(e){var t=this,n=!1;if(this.data.length)switch(e){case a.left:if(this.type!==this.TYPE_HORIZONTAL)break;n=!0;case a.up:if(n||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index>0)this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0===i?i:t.$focusItem.index})})}else this.cycle&&this.move(a.end),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.right:if(this.type!==this.TYPE_HORIZONTAL)break;n=!0;case a.down:if(n||this.type===this.TYPE_VERTICAL)if(this.$focusItem&&this.$focusItem.index<this.data.length-1)this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling);else if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0===i?i:t.$focusItem.index})})}else this.cycle&&this.move(a.home),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:this.cycle});break;case a.pageUp:if(this.provider){if(this.provider.blocked)return;return void this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0})})}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageDown:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,n,i){var a;e?t.events["data:error"]&&t.emit("data:error",e):n&&(a=i||0===i?i:n.length<t.size?n.length-1:t.size-1,t.setData({data:n,focusIndex:a}))});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case a.home:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,n,i){e?t.events["data:error"]&&t.emit("data:error",e):n&&t.setData({data:n,focusIndex:i||0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case a.end:if(this.provider){if(this.provider.blocked)return;this.provider.get(e,function(e,n,i){var a;e?t.events["data:error"]&&t.emit("data:error",e):n&&(a=i||0===i?i:n.length<t.size?n.length-1:t.size-1,t.setData({data:n,focusIndex:a}))});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},r.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0)},r.prototype.blurItem=function(e){return!!e&&(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0)},r.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):e<t?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},r.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=r},function(e,t,n){"use strict";var i=n(7),a=n(1);function r(e){var t=this;e=e||{},this.focusIndex=0,this.data=[],i.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case a.right:t.children.length&&t.focusIndex<t.children.length-1&&t.children[++t.focusIndex].focus();break;case a.left:t.children.length&&t.focusIndex>0&&t.children[--t.focusIndex].focus();break;case a.back:t.parent&&(t.parent.focus(),t.$parentItem&&t.parent.focusItem(t.$parentItem))}})}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-layout",r.prototype.init=function(e){for(var t,n,a,r=this,o=function(e){var t,n;for(t=0;t<e.length;t++)"object"==typeof(n=e[t])?n instanceof i||n instanceof HTMLElement?e[t]={value:n,wrap:!1}:e[t].wrap=!0:e[t]={value:e[t],wrap:!0};return e}(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);function s(){r.focusIndex=this.index}for(this.data=o,a=0;a<o.length;a++)"string"==typeof(t=o[a]).value?((n=document.createElement("div")).textContent=t.value,t.className&&(n.className=t.className),this.$node.appendChild(n)):t.value instanceof HTMLElement?t.wrap?(n=document.createElement("div"),t.className&&(n.className=t.className),n.appendChild(t.value),this.$node.appendChild(n)):this.$node.appendChild(t.value):t.value instanceof i?(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",s),t.wrap?(n=document.createElement("div"),t.className&&(n.className=t.className),n.appendChild(t.value.$node),this.$node.appendChild(n),this.children.push(t.value),t.value.parent=this):this.add(t.value)):(n=document.createElement("div"),t.className&&(n.className=t.className),this.$node.appendChild(n))},e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var i=Object(e),a=i.length;if(0===a)return-1;for(var r=0;r<a;r++)if(t.call(n,i[r],r,i))return r;return-1}},function(e,t,n){"use strict";var i=n(5),a=n(0),r=n(54),o=n(24),s=n(57),l=n(12),c={video:{current:0,stack:[],lastWatch:0,startCode:202,playbackCode:203,skipPlaybackTimes:0,skipAppStartTimes:0},"tv-channel":{current:0,stack:[],lastWatch:0,startCode:204,playbackCode:205,skipPlaybackTimes:0,skipAppStartTimes:0}},u=new i,d=15;function p(e,t){var n;l.show(),n=["magcore-osd-tv"],core.taskManager.osdStack.forEach(function(e){n.indexOf(e.config.packageName)>-1&&e.core.call("hide")}),core.applicationState&&!core.applicationState.visible&&(core.call("show"),core.call("focus")),s(e.current+1,e.stack.length),a.activePage!==a.pages.advertising&&a.route(a.pages.advertising),e.stack[e.current].requiredPart&&(e.stack[e.current].onRequiredWatch=function(){u.emit("button:show",{target:e,done:t})}),o.play(e.stack[e.current],function(){e.current++,e.current>=e.stack.length?(e.stack=[],e.current=0,e.lastWatch=new Date,u.emit("button:hide"),t()):p(e,t)})}u.checkIntent=function(e,t){var n,i={activePage:a.activePage,visible:core.applicationState.visible};function o(){a.activePage!==i.activePage&&(a.route(i.activePage),i.visible||e.show(e.creator)),t()}if(e.runnerConfig.resource&&e.runnerConfig.resource in c)return(n=c[e.runnerConfig.resource]).skipPlaybackTimes<4?(n.skipPlaybackTimes++,void o()):void(n.stack.length?p(n,function(){o()}):n.lastWatch&&new Date-n.lastWatch<60*d*1e3?o():r.getAd(n.startCode,function(e,t){e||!t.length?(n.lastWatch=new Date,o()):(n.current=0,n.stack=t,p(n,function(){o()}))}));o()},u.addListener("skip",function(e){var t=e.target,n=e.done;o.stop(),t.current++,t.current>=t.stack.length?(t.stack=[],t.current=0,t.lastWatch=new Date,u.emit("button:hide"),n()):p(t,n)}),window.system.addListener("run:app",function(e){var t;if(e.app.resource&&e.app.resource in c){if((t=c[e.app.resource]).skipAppStartTimes<1)return t.skipAppStartTimes++,void e.done();if(t.stack.length)return core.call("show"),core.call("focus"),void p(t,function(){core.call("blur"),core.call("hide"),e.done()});if(t.lastWatch&&new Date-t.lastWatch<60*d*1e3)return core.call("blur"),core.call("hide"),void e.done();r.getAd(r.CODE_APP_START,function(n,i){n||!i.length?e.done():(core.call("show"),core.call("focus"),t.current=0,t.stack=i,p(t,function(){core.call("blur"),core.call("hide"),e.done()}))})}else e.done()}),e.exports=u},function(e,t,n){"use strict";var i,a,r=n(25),o=n(3),s=n(12),l=n(56),c={};function u(){var e=o.primary.position,t=e/o.primary.duration*100;i.onRequiredWatch&&e>=i.requiredPart&&(i.onRequiredWatch(),i.onRequiredWatch=null),t>=25&&i.quarter&&i.quarter(),t>=50&&i.middle&&i.middle(),t>=75&&i.thirdQuarter&&i.thirdQuarter(),l(t)}c.play=function(e,t){var n,c=e.url;i=e,n=new r({action:"play",data:{uri:c},mime:"advertising",events:{start:function(){a=setInterval(u,1e3),s.hide()},end:function(){clearInterval(a),l.clear(),s.hide(),t()},error:function(){clearInterval(a),l.clear(),s.hide(),t()}}}),o.intent(n)},c.stop=function(){o.primary.stop(),l.clear(),clearInterval(a)},e.exports=c},function(e,t,n){"use strict";var i=n(5);function a(e){var t=this;e=e||{},this.action=e.action,this.data=e.data,this.context=e.context,this.mime=e.mime,i.call(this,e),e.events&&Object.keys(e.events).forEach(function(n){t.events[n]=[e.events[n]]})}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,e.exports=a},function(e,t,n){"use strict";var i=n(0),a=n(6),r=document.getElementById("contentTitle"),o=n(25),s=n(3),l=n(15);e.exports=function(){i.lastPrimaryIntent&&i.lastPrimaryIntent.data&&i.lastPrimaryIntent.data.controls&&!1===i.lastPrimaryIntent.data.controls.pip||i.config.pipSupport&&core.findIntentHandlers({action:"pip"}).length&&(i.currentIntent.show(i.currentIntent.creator,{reasonPip:!0}),i.pipIntent=i.currentPlayIntent,s.intent(new o({action:"pip",mime:i.currentPlayIntent.mime,events:{maximize:function(){var e,t;i.currentPlayIntent=i.pipIntent,i.pipIntent=null,i.currentIntent=i.currentPlayIntent,r.innerText=i.currentPlayIntent.data.title||i.currentPlayIntent.data.uri,i.playback.stopProgressTimer(),t=s.primary.duration,"content/video"===i.currentPlayIntent.mime?(document.body.classList.add("transparent"),l.hide()):"content/audio"===i.currentPlayIntent.mime?(document.body.classList.remove("transparent"),l.show()):l.hide(),!t||i.currentPlayIntent.data&&i.currentPlayIntent.data.tvChannel?(i.playerPanel.showPauseButton(),i.playerPanel.$rightText.innerText="",i.playerPanel.$leftText.innerText="",i.playerPanel.progressBar.set(0),i.playerPanel.progressBar.hide()):(i.playerPanel.progressBar.show(),i.playerPanel.duration=t,i.playerPanel.progressBar.init({max:t}),i.playback.startProgressTimer(),t=a.parseTime(t),i.playerPanel.$rightText.innerText=t.hour+":"+t.min+":"+t.sec),i.playback.subtitles.list=s.primary.subtitlesTracks,e=n(17)({subtitles:i.playback.subtitles.list.length},i.currentPlayIntent),i.mainMenu.init({data:e.data,size:e.data.length,focusIndex:e.focusIndex}),i.playerPanel.initButtons({nextChannel:i.currentIntent.events.nextChannel,prevChannel:i.currentIntent.events.prevChannel,next:i.currentIntent.events.next,prev:i.currentIntent.events.prev,forward:s.primary.duration,rewind:s.primary.duration,play:i.currentIntent&&i.currentIntent.data.tvChannel&&i.currentIntent&&i.currentIntent.data.tvChannel.archive||s.primary.duration}),n(12).hide(),s.primary.state===s.STATE_PAUSE&&(i.playerPanel.showPlayButton(),l.active&&l.pause())},swap:function(){var e,t,o;o=i.pipIntent,i.pipIntent=i.currentPlayIntent,i.currentPlayIntent=o,i.currentIntent=i.currentPlayIntent,r.innerText=i.currentPlayIntent.data.title||i.currentPlayIntent.data.uri,i.playback.stopProgressTimer(),e=s.primary.duration,"content/video"===i.currentPlayIntent.mime?(document.body.classList.add("transparent"),l.active&&l.hide()):"content/audio"===i.currentPlayIntent.mime&&(document.body.classList.remove("transparent"),l.show()),e?(i.playback.duration=e,i.playerPanel.progressBar.init({max:e}),i.playerPanel.progressBar.show(),i.playback.startProgressTimer(),e=a.parseTime(e),i.playerPanel.$rightText.innerText=e.hour+":"+e.min+":"+e.sec):(i.playerPanel.$rightText.innerText="",i.playerPanel.$leftText.innerText="",i.playerPanel.progressBar.set(0),i.playerPanel.progressBar.hide()),i.playback.subtitles.list=s.primary.subtitlesTracks,t=n(17)({subtitles:i.playback.subtitles.list.length}),i.mainMenu.init({data:t.data,size:t.data.length,focusIndex:t.focusIndex}),i.emit("swap")}}})),i.emit("close"),i.pipIntent.emit("onPip"))}},function(e,t,n){"use strict";function i(e){var t="string"==typeof e?"true"===e:e;return window.parent.gSTB.SetEnv(JSON.stringify({playerHardwareAcceleration:t})),window.parent.stbPlayerManager.list[0].hardwareAcceleration=t,t}function a(){var e=JSON.parse(window.parent.gSTB.GetEnv(JSON.stringify({varList:["playerHardwareAcceleration"]}))).result.playerHardwareAcceleration;return e="string"==typeof e?"true"===e:e}e.exports=function(){return[{type:"checkBox",items:[{className:"theme-icon theme-icon-hardware-acceleration"},{value:gettext("Enable hardware acceleration")},{className:"theme-icon "+(a()?"theme-icon-checkbox-active":"theme-icon-checkbox")}],description:gettext("Enable or disable player hardware acceleration"),setValue:function(e,t){e=i(e),t.children[0].children[2].className="theme-icon "+(e?"theme-icon-checkbox-active":"theme-icon-checkbox")},getValue:function(){return a()}}]},e.exports.setValue=function(e){i(e)},e.exports.getValue=function(){return a()}},function(e,t,n){"use strict";var i=n(0);n(36),n(37),i.once("load",function(){n(38).load({name:core.environment.language||"en"},function(e){n(40);core.device&&document.body.setAttribute("device",core.device.model),i.timeshift=core.plugins.timeshift||!1,i.config.pipSupport=n(6).detectPipSupport(),i.pages={main:n(45),clear:n(65),settings:n(69),advertising:n(77)},i.route(i.pages.main),i.playerPanel.focus()})})},function(e,t,n){"use strict";var i=n(4),a=n(31);window.core=window.parent.getCoreInstance(window,i),n(32),n(33),n(19)("sdk"),n(35),n(19)("app"),i.platform="mag",i.ready=function(){window.core.call("app:ready")},i.exit=function(){i.events["exit"]&&i.emit("exit"),core.call("exit")},a.load=function(e){document.body.setAttribute("platform",i.platform),core.ready?i.events["load"]&&i.emit("load",{}):core.once("load",function(){i.events[e.type]&&i.emit(e.type,e)})},a.contextmenu=function(e){e.preventDefault()},Object.keys(a).forEach(function(e){window.addEventListener(e,a[e])}),e.exports=i},function(e,t,n){"use strict";e.exports={parse:function(e){var t={};return e.split("&").forEach(function(e){2===(e=e.split("=")).length&&(t[e[0]]=decodeURIComponent(e[1]))}),t},stringify:function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(n+"="+encodeURIComponent(e[n]))}),t.join("&")}}},function(e,t,n){"use strict";var i=n(4);e.exports={DOMContentLoaded:function(e){i.events["dom"]&&i.emit("dom",e)},load:function(e){i.events[e.type]&&i.emit(e.type,e)},unload:function(e){i.events[e.type]&&i.emit(e.type,e)},error:function(e){},keydown:function(e){var t,n=i.activePage,a={code:e.keyCode,stop:!1};e.ctrlKey&&(a.code+="c"),e.altKey&&(a.code+="a"),e.shiftKey&&(a.code+="s"),(t=n.activeComponent)&&t!==n&&(t.events[e.type]&&t.emit(e.type,a,e),!a.stop&&t.propagate&&t.parent&&t.parent.events[e.type]&&t.parent.emit(e.type,a,e)),a.stop||(n.events[e.type]&&n.emit(e.type,a,e),e.stop||i.events[e.type]&&i.emit(e.type,a,e))},keypress:function(e){var t=i.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},mousewheel:function(e){var t=i.activePage;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}}},function(e,t,n){"use strict";if(!document.documentElement.classList){var i=Array.prototype,a=i.indexOf,r=i.slice,o=i.push,s=i.splice,l=i.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,n=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<n.length;t++)o.call(this,n[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=r.call(this,0).join(" "))},contains:function(e){return-1!==a.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=a.call(this,e);-1!==t&&(s.call(this,t,1),this._element.className=r.call(this,0).join(" "))},toString:function(){return l.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,n){"use strict";var i=n(4),a=n(34);i.metrics=a[i.query.screenHeight]||a[screen.height]||a[720],i.metrics.availHeight=i.metrics.height-(i.metrics.availTop+i.metrics.availBottom),i.metrics.availWidth=i.metrics.width-(i.metrics.availLeft+i.metrics.availRight)},function(e,t,n){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}},function(e,t,n){"use strict";var i,a=n(4);(i=document.createElement("link")).rel="stylesheet",i.href=window.core.theme.path+a.metrics.height+".css",document.head.appendChild(i),e.exports=i},function(e,t,n){"use strict";n(0).log=function(e){n(8).debug}},function(e,t,n){"use strict";Array.prototype.findIndex||(Array.prototype.findIndex=function(e){for(var t=this.length,n=0;n<t;){if(e(this[n],n,this))return n;++n}return-1})},function(e,t,n){"use strict";var i=n(5),a=n(39),r=new i;function o(e){var t=new a(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}r.defaultLanguage="en",r.load=function(e,t){var n;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===r.defaultLanguage?(o(),t(null),!1):((n=new XMLHttpRequest).onload=function(){try{o(JSON.parse(n.responseText)),t(null),r.events["load"]&&r.emit("load")}catch(e){n.onerror(e)}},n.ontimeout=n.onerror=function(e){o(),t(e),r.events["error"]&&r.emit("error",e)},n.open("GET",e.path+"/"+e.name+"."+e.ext,!0),n.send(null),!0)},e.exports=r},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,n){"use strict";var i,a=n(0);a.playerManager=n(41),a.audioManager=n(43),i={platform:"MAG",playerCount:a.playerManager.list.length},a.audioManager.list[0].clear(),a.audioManager.list[0].add(a.playerManager.list[0]),e.exports=i},function(e,t,n){"use strict";var i,a,r,o,s,l,c={},u=window.parent.gSTB,d=n(42),p=0,h=!1,m=16777215,f="UTF-8",v="",y=0,g=20,b=0,T={height:screen.height,width:screen.width,x:0,y:0},P={height:0,save:!1,width:0,x:0,y:0},x=!0,I=!1,w=!1,k=!0,S=!0,B=0,$={x:0,y:0,width:0,height:0},E=0,C=!1,L=!0,A={},D={};window.parent.stbPlayerManager?e.exports=window.parent.stbPlayerManager:(window.parent.stbEvent.addListener("media",function(e){switch(e.code){case 1:c.state=0,c.onPlayEnd&&c.onPlayEnd();break;case 2:!function(){try{c.audioTracks=JSON.parse(u.GetAudioPIDsEx().replace(/pid:/g,'"pid":').replace(/lang:/g,'"lang":').replace(/type:/g,'"type":').replace(/title:/g,'"title":').replace(/'/g,'"').replace(/,""/g,""))}catch(e){c.audioTracks=[]}try{c.subtitlesTracks=JSON.parse(u.GetSubtitlePIDs().replace(/pid:/g,'"pid":').replace(/lang:/g,'"lang":').replace(/,""/g,""))}catch(e){c.subtitlesTracks=[]}try{c.metadataInfo=JSON.parse(u.GetMetadataInfo())}catch(e){c.metadataInfo=null}}(),c.onTracksInfo&&c.onTracksInfo();break;case 4:c.state=2,c.onPlayStart&&c.onPlayStart();break;case 5:c.state=0,c.onPlayError&&c.onPlayError();break;case 6:c.onDualMono&&c.onDualMono();break;case 7:!function(){try{u.GetVideoInfo(),c.videoInfo=JSON.parse(u.GetVideoInfo().replace(/frameRate:/g,'"frameRate":').replace(/pictureWidth:/g,'"width":').replace(/pictureHeight:/g,'"height":').replace(/hPAR:/g,'"hPAR":').replace(/vPAR:/g,'"vPAR":'))}catch(e){c.videoInfo=null}}(),c.onContentInfo&&c.onContentInfo();break;case 8:c.onTracksError&&c.onTracksError();break;case 9:c.onTracksUpdate&&c.onTracksUpdate();break;case 129:c.onRTPBreak&&c.onRTPBreak()}}),c={surface:{moveTop:function(){u.SetTopWin(1)},moveDown:function(){u.SetTopWin(0)}},clearStatistics:function(){this.statistics={continuityErrors:0,decodingErrors:0,rtpErrors:0}},audioTracks:[],subtitlesTracks:[],drawSubtitle:function(e,t,n){u.ShowSubtitle(t,n,e)},loadExternalSubtitles:u.LoadExternalSubtitles,state:0,HLSInfo:null,metadataInfo:null,videoInfo:null,setViewport:function(e,t){t=t||{x:0,y:0,width:screen.width,height:screen.height},u.SetViewportEx(e.width,e.height,e.x,e.y,t.width,t.height,t.x,t.y),T={width:e.width,height:e.height,x:e.x,y:e.y}},play:function(e){u.Play((e.solution||"auto")+" "+e.uri,e.proxy),c.state=1},stop:function(){u.Stop()},pause:function(){u.Pause(),c.state=3},resume:function(){u.Continue(),c.state=2},rotate:function(e){u.Rotate(e)},onPlayEnd:function(){},onTracksInfo:function(){},onContentInfo:function(){},onPlayStart:function(){},onPlayError:function(){},onTracksError:function(){},onDualMono:function(){},onTracksUpdate:function(){},onRTPBreak:function(){},onTimeShift:function(e,t){},teletextTracks:[],setTeletextViewport:function(e){u.setTeletextViewport(e.width,e.height,e.x,e.y),$={width:e.width||$.width,height:e.height||$.height,x:e.x||$.x,y:e.y||$.y}},teletextCommand:function(e){u.TeletextCommand(e)},defaultTeletextSubtitlesCharset:u.DefaultTtxSubCharset,forceTeletextSubtitlesCharset:u.ForceTtxSubCharset,timeShiftState:0,timeShiftStart:function(){},timeShiftStop:function(e,t,n){}},Object.defineProperties(c,{"capabilities":{value:{audio:!0,autoFrameRate:!0,subtitles:!0,teletext:!0,video:!0}},"statistics":{value:{continuityErrors:0,decodingErrors:0,rtpErrors:0}},"mute":{get:function(){return u.GetMute()},set:function(e){u.SetMute(!!e)}},"volume":{get:function(){return u.GetVolume()},set:function(e){u.SetVolume(+e)}},"audioPID":{get:function(){return u.GetAudioPID()},set:function(e){u.SetAudioPID(e)}},"dolbyDigitalAudioMode":{set:function(e){u.SetAudioOperationalMode(+e),p=+e},get:function(){return p}},"enableSubtitles":{get:function(){return h},set:function(e){u.SetSubtitles(!!e),h=!!e}},"subtitlesPID":{get:function(){return u.GetSubtitlePID()},set:function(e){u.SetSubtitlePID(e)}},"subtitlesColor":{get:function(){return m},set:function(e){u.SetSubtitlesColor(e),m=e}},"subtitlesEncoding":{get:function(){return f},set:function(e){u.SetSubtitlesEncoding(e),f=e}},"subtitlesFont":{get:function(){return v},set:function(e){u.SetSubtitlesFont(e),v=e}},"subtitlesOffset":{get:function(){return y},set:function(e){u.SetSubtitlesOffs(e),y=e}},"subtitlesSize":{get:function(){return g},set:function(e){u.SetSubtitlesSize(+e),g=+e}},"bufferLoad":{get:function(){return u.GetBufferLoad()}},"duration":{get:function(){return u.GetMediaLen()}},"durationMs":{get:function(){return u.GetMediaLenEx()}},"position":{get:function(){return u.GetPosTime()},set:function(e){u.SetPosTime(e)}},"positionMs":{get:function(){return u.GetPosTimeEx()},set:function(e){u.SetPosTimeEx(e)}},"positionPercent":{get:function(){return u.GetPosPercent()},set:function(e){u.SetPosPercent(e)}},"loop":{get:function(){return!1},set:function(e){u.SetLoop(e)}},"speed":{get:function(){return u.GetSpeed()},set:function(e){u.SetSpeed(e)}},"aspectConversion":{get:function(){return b},set:function(e){var t="0x"+e+"0";u.SetAspect(t),b=e}},"viewport":{get:function(){return T}},"clip":{get:function(){return P}},"fullscreen":{get:function(){return x},set:function(e){!0===e&&(u.SetPIG(1,0,0,0),x=!0,T={x:0,y:0,width:d.list[0].width,height:d.list[0].height})}},"enableTeletext":{get:function(){return I},set:function(e){u.SetTeletext(e),I=e}},teletextVisible:{get:function(){return w},set:function(e){u.TeletextShow(e),w=e}},enablePopup:{get:function(){return k},set:function(e){(e=!!e)?u.SetVideoControl(0):u.SetVideoControl(1),k=e}},visible:{get:function(){return S},set:function(e){S=e=!!e,u.SetVideoState(e)}},teletextOpacity:{get:function(){return B},set:function(e){(e=+e)>=0&&e<=255&&(u.TeletextTransparency(e),B=e)}},teletextPID:{get:function(){return u.GetTeletextPID()},set:function(e){u.SetTeletextPID(e)}},teletextViewport:{get:function(){return $}},timeShiftFolder:{get:function(){return a},set:function(e){timeShift.SetTimeShiftFolder(e),a=e}},timeShiftMaxDuration:{get:function(){return E},set:function(e){timeShift.SetMaxDuration(e),E=e}},timeShiftSlidingMode:{get:function(){return C},set:function(e){e=!!e,timeShift.SetSlidingMode(e),C=e}},speeds:{get:function(){return[0,.5,.25,1,2,4,8,12,16,32,64]}},audioPrimaryLanguage:{get:function(){return r},set:function(e){u.SetAudioLangs(e,o),r=e}},audioSecondaryLanguage:{get:function(){return o},set:function(e){u.SetAudioLangs(r,e),o=e}},subtitlesPrimaryLanguage:{get:function(){return l},set:function(e){u.SetSubtitleLangs(e,s),l=e}},subtitlesSecondaryLanguage:{get:function(){return s},set:function(e){u.SetSubtitleLangs(l,e),s=e}}}),i={list:[c],reset:function(){},swap:function(e,t){},autoFrameRateSource:c,autoFrameRate:{fr24:!1,fr50:!1,fr60:!1},setAutoFrameRate:function(e){var t=(e.fr60?"1":"0")+(e.fr50?"1":"0")+(e.fr24?"1":"0");e=e||{},this.autoFrameRate.fr24=e.fr24||!1,this.autoFrameRate.fr50=e.fr24||!1,this.autoFrameRate.fr60=e.fr24||!1,u.SetAutoFrameRate(parseInt(t,2))},"3DConversionModeSource":c,multicastProxy:"",setMulticastProxy:function(e){u.SetMulticastProxyURL(e),this.multicastProxy=e,u.EnableMulticastProxy(!0)},resetMulticastProxy:function(){u.EnableMulticastProxy(!1)},activateCAS:function(){var e,t=["serverAddress","serverPort","companyName","opID","errorLevel","softDescrambling","iniFile"],n={};for(e in A.serverAddress&&u.SetCASParam(A.serverAddress,A.serverPort,A.companyName,A.opID,A.errorLevel),u.SetCASDescrambling(A.softDescrambling?1:0),A.iniFile&&u.LoadCASIniFile(A.iniFile),A)t.indexOf(e)<0&&(n[e]=A[e]);Object.keys(n).forEach(function(e){u.SetAdditionalCasParam(e,n[e])}),u.SetCASType(A.type)},setCASParams:function(e){var t;for(t in e=e||{})A[t]=e[t]},activateWebCAS:function(){u.SetWebCASLogging(D.logging),u.SetupWebCAS(D.serverAddress,D.companyName)},setWebCASParams:function(e){e=e||{},D.serverAddress=e.serverAddress,D.companyName=e.companyName,D.logging=e.logging},RTSP:{endByAnnounce:!1,endByGetParameter:!1,endByRTP:!1,endByTimeout:!1,keepAlive:!0,type:0,useUDP:!1},setRTSP:function(e){var t,n;n=((e=e||{}).useUDP?"1":"0")+(e.endByRTP?"1":"0")+(e.endByTimeout?"1":"0")+(e.endByGetParameter?"1":"0")+(e.endByAnnounce?"1":"0")+(e.keepAlive?"1":"0"),n=parseInt(n,2),t=e.type||0,u.SetupRTSP(t,n)},setBufferSize:u.SetBufferSize},Object.defineProperties(i,{"3DConversionMode":{get:function(){return u.Get3DConversionMode()},set:function(e){u.Set3DConversionMode(e)}},checkSSLCertificate:{get:function(){return L},set:function(e){e=!!e,u.SetCheckSSLCertificate(e?1:0),L=e}}}),e.exports=i)},function(e,t,n){"use strict";var i;if(window.parent.stbDisplayManager)e.exports=window.parent.stbDisplayManager;else{switch(window.parent.gSTB.RDir("vmode")){case"1080i":case"1080i60":case"1080p":case"1080p60":1920,1080}i={width:screen.width,height:screen.height},e.exports={list:[i]}}},function(e,t,n){"use strict";var i,a=window.parent.gSTB;window.parent.stbAudioManager?e.exports=window.parent.stbAudioManager:(i={list:[],add:function(e){},remove:function(e){},clear:function(){}},Object.defineProperties(i,{mute:{get:function(){return!!a.GetMute()},set:function(e){a.SetMute(!!e)}},volume:{get:function(){return a.GetVolume()},set:function(e){a.SetVolume(+e)}}}),e.exports={list:[i]})},function(e){e.exports={"name":"magcore-launcher-prime","version":"0.6.0","description":"Prime Launcher for magcore applications.","author":{"name":"Igor Zaporozhets","email":"i.zaporozhets@infomir.com"},"repository":"gitlab","scripts":{"mocha":"../../node_modules/.bin/mocha","eslint":"../../node_modules/.bin/eslint --ignore-path ../../.eslintignore","runner":"../../node_modules/.bin/runner","lint":"npm run eslint .","test":"npm run lint","android-app":"PLATFORM=ANDROIDAPP npm run runner","android-app:build":"npm run android-app build","android-app:develop":"DEVELOP=true npm run android-app develop","android-stb":"PLATFORM=ANDROIDSTB npm run runner","android-stb:build":"npm run android-stb build","android-stb:develop":"DEVELOP=true npm run android-stb develop","smarttv":"PLATFORM=SMARTTV npm run runner","smarttv:build":"npm run smarttv build","smarttv:develop":"DEVELOP=true npm run smarttv develop","mag":"PLATFORM=MAG npm run runner","mag:build":"npm run mag build","mag:develop":"DEVELOP=true npm run mag develop","tizen":"PLATFORM=TIZEN npm run runner","tizen:build":"npm run tizen build","tizen:develop":"DEVELOP=true npm run tizen develop","webos":"PLATFORM=WEBOS npm run runner","webos:build":"npm run webos build","webos:develop":"DEVELOP=true npm run webos develop","build":"npm run android-app build & npm run android-stb build & npm run smarttv build & npm run mag build & npm run tizen build & npm run webos build","build:develop":"npm run android-app:develop build & npm run android-stb:develop build & npm run smarttv:develop build & npm run mag:develop build & npm run tizen:develop build & npm run webos:develop build","start":"npm run mag:develop"},"dependencies":{"cjs-async":"^1.6.0","extend":"^3.0.1","first-free-port":"^1.0.0","husky":"^0.14.3","mag-app":"^2.1.0","mag-component-footer":"^2.0.6","mag-component-modal":"^1.0.11","mag-component-panel":"^1.0.1","mag-component-panel-set":"^1.0.3","mag-tools":"^0.9.1","magcore-theme-graphite":"^2.0.5","spa-gettext":"^1.4.1","spa-preloader":"^1.4.0","stb-component-list":"^1.0.0","stb-component-page":"^1.4.0","stb-component-panel":"^1.0.0","stb-keys":"^1.4.3","magcore-plugin-content-board":"^1.0.18"},"keywords":["mag","magcore","ministra","prime","launcher","launcher-prime"],"license":"SEE LICENSE IN ../../license.md"}},function(e,t,n){"use strict";var i,a,r=n(46),o=n(50),s=n(0),l=new(n(10))({$node:document.getElementById("pMain")}),c=n(1),u=n(22),d=n(6),p=window.langs=n(14),h=n(3),m=n(15),f=n(12),v=n(23),y=n(16).displayInfo,g=n(26),b=n(17),T=n(11),P=n(59),x=n(60),I={progress:null,contentInfo:null,panelHide:null,serverTimeShiftRequest:null,serverTimeShiftBufferProgress:null,serverEpgUpdateCurrentProgram:null,localTimeShiftBufferProgress:null,localTimeShiftAutoStart:null},w={duration:0,currentTime:0,contentType:null,capabilities:{timeshift:!1},rewind:{isActive:!1,startTime:0,time:0,timeout:null,timeoutDuration:800,intervals:[0,0,10],mode:null,remote:!1,remoteTimer:null,pauseBlockingState:!1,pauseBlockingTimeout:null},subtitles:{index:null,currentIndex:null,currentPID:null,list:[]},audioTracks:{list:[],current:null},retryOnError:{timeoutId:null,intervals:[5e3,5e3,1e4,15e3,3e4],currentInterval:0},startProgressTimer:function(){D(),clearInterval(I.progress),I.progress=setInterval(D,1e3)},stopProgressTimer:function(){clearInterval(I.progress)},tv:{epg:{array:[],currentIndex:0},archive:{state:{NOT_ACTIVE:0,PAUSED_NO_LINK:1,PAUSED_GET_LINK:2,PAUSED_GET_LINK_ERROR:3,PLAYING_FILE:4,PAUSE_FILE:5},active:!1,currentState:0,array:[],currentIndex:0,realProgram:!1,inited:!1,realProgramUrl:"",realProgramInited:!1,realProgramPaused:!1}},timeshift:{active:!1,duration:0}},k={play:!1,rewind:!1,forward:!1,next:!1,prev:!1,nextChannel:!1,prevChannel:!1},S=document.getElementById("contentTitle"),B=document.getElementById("contentProgramTitle"),$={codec:document.getElementById("codecInfo"),lang:document.getElementById("langInfo")},E={timeshift:document.getElementById("iconTS")},C=5,L=!1,A=b();function D(){var e,t=h.primary.position;w.currentTime=h.primary.position,w.timeshift.active?(e=h.primary.position,h.primary.position>h.primary.duration&&(e=0),t=e-w.timeshift.duration):w.tv.archive.active&&w.tv.archive.realProgram,s.playerPanel.progressBar.set(t),t=d.parseTime(t),s.playerPanel.$leftText.innerText=t.hour+":"+t.min+":"+t.sec}function M(){var e=parseInt(Date.now()/1e3,10)-w.tv.epg.array[w.tv.archive.currentIndex].start;s.playerPanel.bufferBar.set(e)}function O(){s.playerPanel.bufferBar.set(w.timeshift.duration++)}function N(){var e=s.lastPrimaryIntent;f.hide(),core.notify({title:gettext("Error playing content")+": "+(e.data.title||e.data.uri),icon:"alert",type:"error",timeout:3e3}),e.data.stream&&e.data.retryOnError&&f.showAfter(3e3),m.active&&m.hide()}function z(e,t){if(k.play=h.primary.duration&&!e.data.tvChannel&&t,k.rewind=k.forward=h.primary.duration&&!e.data.tvChannel&&0!==h.primary.state,k.prev=e.events.prev&&e.events.prev.length&&e.events.prev[0],k.next=e.events.next&&e.events.next.length&&e.events.next[0],k.prevChannel=e.events.prevChannel&&e.events.prevChannel.length&&e.events.prevChannel[0],k.nextChannel=e.events.nextChannel&&e.events.nextChannel.length&&e.events.nextChannel[0],s.playerPanel.initButtons(k),s.playerPanel.buttons.$focusItem.data.disable)if(k.play)s.playerPanel.buttons.focusItem(s.playerPanel.buttons.$links.playPause);else if(s.playerPanel.buttons.enabledCount){var n;for(n=0;n<s.playerPanel.buttons.data[0].length;n++)s.playerPanel.buttons.data[0][n].disable||s.playerPanel.buttons.focusItem(s.playerPanel.buttons.map[0][n])}e.data.tvChannel&&e.data.tvChannel.getEpg(!1,R)}function R(e,t){var n,i=Date.now()/1e3;function a(e){var t=!1,n=+new Date/1e3;return e.end>n&&e.start<n&&(t=!0),t}!e&&t&&t.length&&(w.tv.epg.array=t,(n=u(w.tv.epg.array.slice(),a))>=0&&(w.tv.epg.currentIndex=n,B.innerText=w.tv.epg.array[w.tv.epg.currentIndex].title,clearTimeout(I.serverEpgUpdateCurrentProgram),s.lastPrimaryIntent.data.tvChannel.archive&&(k.play=!0,s.playerPanel.initButtons(k),l.activeComponent!==s.playerPanel.buttons&&s.playerPanel.buttons.focusIndex(3)),I.serverEpgUpdateCurrentProgram=setTimeout(function e(){var t,n=u(w.tv.epg.array,a),i=+new Date;clearTimeout(I.serverEpgUpdateCurrentProgram),n&&(w.tv.epg.currentIndex=n,B.innerText=w.tv.epg.array[w.tv.epg.currentIndex].title,t=1e3*w.tv.epg.array[w.tv.epg.currentIndex].end-i,I.serverEpgUpdateCurrentProgram=setTimeout(e,t))},1e3*w.tv.epg.array[w.tv.epg.currentIndex].end-1e3*i+2e3)))}function _(){var e=h.primary.duration;e&&(s.playerPanel.progressBar.show(),s.playerPanel.progressBar.init({max:e}),w.duration=e,w.startProgressTimer(),e=d.parseTime(e),s.playerPanel.$rightText.innerText=e.hour+":"+e.min+":"+e.sec)}function j(e){var t,n,i,r=h.primary.audioPID;e.audioTracks&&e.audioTracks.length&&e.audioTracks.forEach(function(e){e.pid===r&&(t=e)}),w.audioTracks.list=e.audioTracks,w.audioTracks.current=t,$.codec.src="",$.lang.innerText="",t&&($.codec.src=d.getCodecImageName(t.type),t.lang&&t.lang[0]&&(i=t.lang[0]),i&&"und"!==i?(i=p["1"][i]||p["2T"][i]||p["2B"][i]||[""],$.lang.innerText=i[0]):$.lang.innerText=""),clearTimeout(I.contentInfo),I.contentInfo=setTimeout(function(){$.codec.src="",$.lang.innerText=""},5e3),e.subtitlesTracks&&e.subtitlesTracks.length?(A=b({subtitles:!0},s.lastPrimaryIntent),a.init({data:A.data,size:A.data.length,focusIndex:A.focusIndex}),w.subtitles.list=e.subtitlesTracks,w.subtitles.currentPID=h.primary.subtitlesPID,h.primary.enableSubtitles&&(n=U(w.subtitles.currentPID),w.subtitles.current=n.track,w.subtitles.index=n.index)):(w.subtitles.current=null,w.subtitles.currentPID=null,w.subtitles.list=[])}function G(e){var t;e.tracks&&e.tracks.length?(A=b({subtitles:!0},s.lastPrimaryIntent),a.init({data:A.data,size:A.data.length,focusIndex:A.focusIndex}),w.subtitles.list=e.tracks,w.subtitles.currentPID=h.primary.subtitlesPID,h.primary.enableSubtitles&&(t=U(w.subtitles.currentPID),w.subtitles.current=t.track,w.subtitles.index=t.index)):(w.subtitles.current=null,w.subtitles.currentPID=null,w.subtitles.list=[])}function V(e,t){var n,i,a=0,r=!1,o="",l=w.duration;if(w.duration||w.tv.archive.active){for(w.rewind.pauseBlockingState=!0,w.tv.archive.active&&w.tv.archive.realProgram&&(l=s.playerPanel.bufferBar.value),w.stopProgressTimer(),t=t||w.rewind.timeoutDuration,w.rewind.isActive||(s.activePage===s.pages.clear&&(s.route(s.pages.main),w.rewind.remote=!0),w.tv.archive.active&&w.tv.archive.realProgram&&(w.currentTime=s.playerPanel.progressBar.value),s.playerPanel.$progressbar.classList.add("active"),w.rewind.isActive=!0,w.rewind.startTime=w.currentTime,w.rewind.time=w.currentTime),w.rewind.direction===e?(w.rewind.intervals.splice(0,1),w.rewind.intervals[w.rewind.intervals.length]=w.rewind.intervals[w.rewind.intervals.length-1]+10):(w.rewind.intervals=[0,0,10],w.rewind.direction=e),w.rewind.remote&&(s.playerPanel.buttons.focus(),e?s.playerPanel.buttons.focusIndex(4):s.playerPanel.buttons.focusIndex(2)),i=0;i<w.rewind.intervals.length;i++)a+=(e?1:-1)*w.rewind.intervals[i];a>1800&&(a=1800),a<-1800&&(a=-1800),w.rewind.time+=a,w.rewind.time>=l&&(w.rewind.time=l,r=!0),w.rewind.time<0&&(w.rewind.time=3),n=w.rewind.time,s.playerPanel.progressBar.set(w.rewind.time),w.timeshift.active&&(n=h.primary.duration-w.rewind.time,o="- "),n=d.parseTime(n),s.playerPanel.$leftText.innerText=o+n.hour+":"+n.min+":"+n.sec,clearTimeout(w.rewind.timeout),w.rewind.timeout=setTimeout(function(){function e(e){w.rewind.isActive=!1,e?(s.lastPrimaryIntent.data.uri=w.tv.archive.realProgramUrl,s.lastPrimaryIntent.data.position=w.rewind.time,w.tv.archive.currentState=w.tv.archive.state.PLAYING_FILE,h.intent(s.lastPrimaryIntent)):(h.primary.position=w.rewind.time,w.capabilities.timeshift&&w.timeshift.active&&3===h.primary.state?(w.startProgressTimer(),h.primary.position=w.rewind.time):r?(h.primary.stop(),s.lastPrimaryIntent.emit("end")):h.primary.position=w.rewind.time),w.currentTime=w.rewind.time,s.playerPanel.$progressbar.classList.remove("active"),w.rewind.mode=null,w.rewind.intervals=[0,0,10],w.rewind.remote&&(Q(1),w.rewind.remote=!1),f.show(),clearTimeout(w.rewind.pauseBlockingTimeout),w.rewind.pauseBlockingTimeout=setTimeout(function(){w.rewind.pauseBlockingState=!1},600)}w.tv.archive.active&&w.tv.archive.realProgram&&w.tv.archive.currentState===w.tv.archive.state.PAUSED_GET_LINK?e(!0):e()},t),m.active&&m.pause()}}function U(e){var t,n;for(t=0;t<w.subtitles.list.length;t++)if((n=w.subtitles.list[t]).pid===e)return{track:n,index:t};return null}function Y(e){e=e||e,k.play&&(s.activePage!==l&&(s.route(s.pages.main),s.playerPanel.buttons.focusIndex(2)),s.lastPrimaryIntent.data.tvChannel&&s.lastPrimaryIntent.data.tvChannel.archive&&w.tv.epg.array.length&&!w.timeshift.active?function(){var e;switch(w.tv.archive.currentState){case w.tv.archive.state.NOT_ACTIVE:if(clearTimeout(I.serverEpgUpdateCurrentProgram),w.tv.archive.currentIndex=w.tv.epg.currentIndex,!(e=w.tv.epg.array[w.tv.archive.currentIndex]))return;e.getLink(function(t,n){var i;n&&n.url&&!t?(h.primary.pause(),w.tv.archive.active=!0,w.tv.archive.realProgramUrl=n.url,w.tv.archive.realProgram=!0,w.tv.archive.currentState=w.tv.archive.state.PAUSED_GET_LINK,s.playerPanel.progressBar.init({max:e.end-e.start,value:parseInt(Date.now()/1e3-e.start,10)}),s.playerPanel.bufferBar.init({max:e.end-e.start,value:parseInt(Date.now()/1e3-e.start,10)}),s.playerPanel.progressBar.show(),s.playerPanel.bufferBar.show(),w.tv.epg.array[w.tv.archive.currentIndex-1]&&w.tv.epg.array[w.tv.archive.currentIndex-1].archive&&(k.prev=!0),k.rewind=k.forward=!0,s.playerPanel.initButtons(k),s.playerPanel.showPlayButton(),I.serverTimeShiftBufferProgress=setInterval(M,1e3),i=d.parseTime(e.end-e.start),s.playerPanel.$rightText.innerText=i.hour+":"+i.min+":"+i.sec,i=d.parseTime(parseInt(Date.now()/1e3-e.start,10)),s.playerPanel.$leftText.innerText=i.hour+":"+i.min+":"+i.sec):(s.playerPanel.showPauseButton(),w.tv.archive.currentState=w.tv.archive.state.PAUSED_GET_LINK_ERROR,core.notify({title:gettext("Can not get current epg link"),icon:"alert",type:"error",timeout:2e3}))});break;case w.tv.archive.state.PAUSED_GET_LINK:s.playerPanel.showPauseButton(),s.lastPrimaryIntent.data.uri=w.tv.archive.realProgramUrl,s.lastPrimaryIntent.data.position=s.playerPanel.progressBar.value-10,s.lastPrimaryIntent.data.solution="ffmpeg",h.intent(s.lastPrimaryIntent),w.tv.archive.currentState=w.tv.archive.state.PLAYING_FILE;break;case w.tv.archive.state.PLAYING_FILE:F(),3===h.primary.state?w.stopProgressTimer():w.startProgressTimer()}}():s.timeshift&&s.timeshift.enable&&w.capabilities.timeshift?w.timeshift.active?F():H({manual:!0})&&(F(),h.primary.position=1):F(e))}function F(e){(e=e||{}).forcePause?(s.playerPanel.showPlayButton(),h.primary.pause()):e.forceResume?(s.playerPanel.showPauseButton(),h.primary.resume(),"content/audio"===w.contentType&&m.show()):h.primary.state===h.STATE_PLAYING?(s.playerPanel.showPlayButton(),w.stopProgressTimer(),h.primary.pause(),m.active&&m.pause()):h.primary.state===h.STATE_PAUSE&&(s.playerPanel.showPauseButton(),w.startProgressTimer(),h.primary.resume(),"content/audio"===w.contentType&&m.show())}function H(e){var t;return e=e||{},s.timeshift.path?d.checkUsb(s.timeshift.mountUsb)?(w.timeshift.active=!0,E.timeshift.classList.add("visible"),t=d.parseTime(s.timeshift.length),s.playerPanel.$rightText.innerText=t.hour+":"+t.min+":"+t.sec,w.timeshift.duration=0,s.playerPanel.progressBar.init({max:parseInt(s.timeshift.length,10)}),s.playerPanel.progressBar.show(),s.playerPanel.bufferBar.init({max:parseInt(s.timeshift.length,10)}),s.playerPanel.bufferBar.show(),w.startProgressTimer(),clearInterval(I.localTimeShiftBufferProgress),I.localTimeShiftBufferProgress=setInterval(O,1e3),k.rewind=!0,k.forward=!0,w.duration=s.timeshift.length,s.playerPanel.initButtons(k),!0):(core.notify({title:gettext("Mount usb device!"),icon:"alert",timeout:3e3}),!1):(e.manual&&core.notify({title:gettext("Mount usb device!"),icon:"alert",timeout:3e3}),!1)}function K(e){var t,n;e?!w.tv.epg.array[w.tv.archive.currentIndex+1]||!w.tv.epg.array[w.tv.archive.currentIndex+1].archive&&(t=w.tv.epg.array[w.tv.archive.currentIndex+1],n=Date.now()/1e3,t.start<n&&t.end>n)?s.lastPrimaryIntent.data.tvChannel.getUrl(function(e,t){t&&t.url&&!e?(B.innerText="",s.lastPrimaryIntent.data.uri=t.url,s.lastPrimaryIntent.data.solution=t.solution,s.lastPrimaryIntent.once("start",function(){s.lastPrimaryIntent.data.tvChannel.getEpg(!1,R)}),w.tv.archive.active=!1,w.tv.archive.currentState=0,k.next=!1,k.prev=!1,k.rewind=!1,k.forward=!1,s.playerPanel.initButtons(k),h.intent(s.lastPrimaryIntent)):core.notify({title:"Error playing content: "+(s.lastPrimaryIntent.data.title||s.lastPrimaryIntent.data.uri),icon:"alert",type:"error",timeout:3e3})}):(w.tv.archive.currentIndex++,w.tv.epg.array[w.tv.archive.currentIndex].getLink(function(e,t){t&&t.url&&!e?(B.innerText=w.tv.epg.array[w.tv.archive.currentIndex].title,s.lastPrimaryIntent.data.uri=t.url,s.lastPrimaryIntent.data.solution=t.solution,s.lastPrimaryIntent.once("start",_),h.intent(s.lastPrimaryIntent),w.tv.archive.realProgram=!1,w.tv.archive.currentState=w.tv.archive.state.PLAYING_FILE):core.notify({title:gettext("Can not get current epg link"),icon:"alert",type:"error",timeout:2e3})})):(w.tv.archive.currentIndex--,w.tv.epg.array[w.tv.archive.currentIndex].getLink(function(e,t){t&&t.url&&!e?(B.innerText=w.tv.epg.array[w.tv.archive.currentIndex].title,s.lastPrimaryIntent.data.uri=t.url,s.lastPrimaryIntent.data.solution="ffmpeg",s.lastPrimaryIntent.once("start",_),h.intent(s.lastPrimaryIntent),w.tv.archive.realProgram=!1,w.tv.archive.currentState=w.tv.archive.state.PLAYING_FILE,w.tv.epg.array[w.tv.archive.currentIndex-1]&&w.tv.epg.array[w.tv.archive.currentIndex-1].archive?k.prev=!0:k.prev=!1,k.next=!0,s.playerPanel.initButtons(k)):core.notify({title:gettext("Can not get current epg link"),icon:"alert",type:"error",timeout:2e3})}))}function q(e){if(s.currentPlayIntent&&!w.tv.archive.active){if(e&&!s.currentPlayIntent.events.next)return;if(!e&&!s.currentPlayIntent.events.prev)return}T(),w.stopProgressTimer(),h.primary.stop(),X(s.currentPlayIntent),m.active&&m.hide(),document.body.classList.remove("transparent"),w.tv.archive.active?K(e):(T(),h.primary.stop(),X(),e&&s.currentPlayIntent.events.next?s.currentPlayIntent.emit("next"):!e&&s.currentPlayIntent.events.prev&&s.currentPlayIntent.emit("prev"))}function W(e){T(),w.stopProgressTimer(),h.primary.stop(),X(s.currentPlayIntent),m.active&&m.hide(),document.body.classList.remove("transparent"),e&&s.currentPlayIntent.events.nextChannel?s.currentPlayIntent.emit("nextChannel"):!e&&s.currentPlayIntent.events.prevChannel&&s.currentPlayIntent.emit("prevChannel")}function X(e){A=b(null,e),core.plugins.settingsAudio.correction=0,clearTimeout(w.rewind.timeout),w.rewind.isActive=!1,a.init({data:A.data,size:A.data.length,focusIndex:A.focusIndex}),w.duration=null,w.currentTime=0,w.retryOnError.currentInterval=0,clearTimeout(w.retryOnError.timeoutId),s.playerPanel.showPauseButton(),s.playerPanel.$rightText.innerText="",s.playerPanel.$leftText.innerText="",s.playerPanel.progressBar.set(0),s.playerPanel.bufferBar.set(0),s.playerPanel.progressBar.hide(),s.playerPanel.bufferBar.hide(),$.codec.src="",$.lang.innerText="",w.rewind.pauseBlockingState=!1,clearTimeout(w.rewind.pauseBlockingTimeout)}function Z(){x.hide(),T(),h.primary.stop(),m.hide(),X(),w.stopProgressTimer(),f.hide(),J(),core.device&&(core.device.model.indexOf("emulator")>-1||core.device.model.indexOf("android")>-1)&&h.reset(),s.lastPrimaryIntent=null}function J(){s.pipPlayer&&s.pipPlayer.state&&h.setAudioSource(s.pipPlayer)}function Q(e){e=e||5,clearTimeout(I.panelHide),I.panelHide=setTimeout(function(){s.route(s.pages.clear)},1e3*e)}s.playback=w,l.add(a=s.mainMenu=new o({$node:document.getElementById("pMainMenu"),focusIndex:A.focusIndex,size:A.data.length,propagate:!1,data:A.data,events:{keydown:function(e){o.prototype.defaultEvents.keydown.call(this,e),e.code===c.up&&s.playerPanel.buttons.enabledCount&&s.playerPanel.focus()}}})),l.add(s.playerPanel=new r({$node:document.getElementById("pMainPlayerPanel"),onPlay:Y,onRewind:function(e){e.direction===c.right?V(!0,2500):e.direction===c.left&&V(!1,2500)},onPrevNext:function(e){switch(e.direction){case c.right:q(!0);break;case c.left:q(!1)}},onChannels:function(e){switch(e.direction){case c.right:W(!0);break;case c.left:W(!1)}},events:{keydown:function(e){e.code===c.down&&a.focus()}}})),s.rewind=V,s.nextPrevContent=function(e){s.currentPlayIntent.events.next||s.currentPlayIntent.events.prev?q(e):(s.currentPlayIntent.events.nextChannel||s.currentPlayIntent.events.prevChannel)&&W(e)},core.addListeners({intent:function(e,t){"play"===e.action&&(X(e),v.checkIntent(e,function(){!function(e,t){function r(){clearTimeout(w.retryOnError.timeoutId),w.retryOnError.timeoutId=setTimeout(function(){e.data.tvChannel?e.data.tvChannel.getUrl(function(n,a){!n&&a&&a.url&&(e.data.uri=a.url,h.intent(e,t,i,!0))}):h.intent(e,t,i)},w.retryOnError.intervals[w.retryOnError.currentInterval]),w.retryOnError.currentInterval<w.retryOnError.intervals.length-1&&w.retryOnError.currentInterval++}e.data?(L=!1,f.show(),d.removePipOnAudioMime(e),X(e),B.innerText="",clearTimeout(I.localTimeShiftAutoStart),clearInterval(I.serverTimeShiftRequest),w.contentType=null,i={},w.audioTracks.list=[],w.subtitles.list=[],w.capabilities={timeshift:!1},w.audioTracks.current=null,s.currentPlayIntent=e,w.tv.archive.active=!1,w.tv.archive.realProgram=!1,w.tv.archive.currentState=0,w.timeshift.active=!1,E.timeshift.classList.remove("visible"),s.currentIntent=e,clearTimeout(I.serverEpgUpdateCurrentProgram),e.data.tvChannel?w.capabilities.timeshift=e.data.tvChannel["local_timeshift"]&&s.timeshift&&s.timeshift.checkAbility(e.data):s.timeshift&&s.timeshift.checkAbility&&s.timeshift.ALLOW_MANUAL&&(w.capabilities.timeshift=s.timeshift.checkAbility(e.data)),s.timeshift.enable&&s.playback.capabilities.timeshift&&(i.solution="extTimeShift",e.once("start",function(){s.timeshift.enable&&s.timeshift.delay&&(I.localTimeShiftAutoStart=setTimeout(H,s.timeshift.delay))})),"content/video"===s.currentPlayIntent.mime?(w.contentType="content/video",document.body.classList.add("transparent")):"content/audio"===s.currentPlayIntent.mime&&(w.contentType="content/audio",document.body.classList.remove("transparent")),S.innerText=e.data.title||e.data.uri,e.addListeners({start:function(){var t,n=h.primary.duration;f.hide(),s.playback.tv.archive.active&&s.playback.tv.archive.realProgram&&(w.startProgressTimer(),s.playerPanel.showPauseButton()),m.active&&m.show(),!n||e.data.tvChannel&&w.tv.archive.currentState!==w.tv.archive.state.PLAYING_FILE||(t=h.primary.position,w.currentTime=t,w.retryOnError.currentInterval=0,t=d.parseTime(t),w.capabilities.timeshift||(s.playerPanel.$leftText.innerText=t.hour+":"+t.min+":"+t.sec),!w.rewind.isActive&&(w.capabilities.timeshift&&w.timeshift.active||!w.capabilities.timeshift)&&(w.duration=n,w.startProgressTimer(),s.playerPanel.$leftText.innerText=t.hour+":"+t.min+":"+t.sec))},end:function(){w.stopProgressTimer(),m.active&&m.hide()},"content:info":function(){h.primary.videoInfo&&h.primary.videoInfo.width?"content/audio"===e.mime?w.contentType="content/audio":(document.body.classList.add("transparent"),w.contentType="content/video"):w.contentType||(document.body.classList.remove("transparent"),w.contentType="content/audio"),"content/audio"!==w.contentType||m.active||m.show()},"playback:stop":function(){f.hide(),T(),h.primary.stop()},"tracks:update":G,error:N,exit:Z,close:J,"content:dualMono":n(16).showDualMono}),e.data.stream&&e.addListener("end",N),e.data.volumeCorrection?core.plugins.settingsAudio.correction=e.data.volumeCorrection:core.plugins.settingsAudio.correction=0,e.data.retryOnError&&(e.addListener("error",r),e.data.stream&&(e.addListener("end",N),e.addListener("end",r))),e.events.end&&e.events.end.length||e.once("end",function(){e.close()}),e.once("start",function(){var t,n=h.primary.duration;if("content/audio"===w.contentType&&m.show(),n){if(!L&&e.data.tvChannel)return void(L=!0);k.forward=!(w.capabilities.timeshift&&s.timeshift&&s.timeshift.enable&&!w.timeshift.active),k.rewind=!(w.capabilities.timeshift&&s.timeshift&&s.timeshift.enable&&!w.timeshift.active),k.play=!0,s.playerPanel.initButtons(k),s.playerPanel.buttons.focusIndex(3),w.capabilities.timeshift||(t=h.primary.position,w.currentTime=t,t=d.parseTime(t),s.playerPanel.$leftText.innerText=t.hour+":"+t.min+":"+t.sec),w.rewind.isActive||w.capabilities.timeshift||_()}else s.playerPanel.progressBar.hide(),w.duration=null}),e.once("media:info",j),e.once("start",function(){Q(C)}),e.data.uri&&z(e),e.data.modalMenu&&e.data.modalMenu.length?(x.init(e.data.modalMenu),x.record=!0):x.record=!1,h.intent(e,t,i),e.data.headless&&e.context||(e.data.headless?(s.route(s.pages.clear),s.pages.clear.panel.focus()):e.context||setTimeout(function(){s.activePage!==s.pages.main&&s.route(s.pages.main),a.focus()},20))):t(!0,null)}(e,t)}))},hide:function(e){e.source!==core.SOURCES.INTENT&&e.source!==core.SOURCES.SYSTEM&&(s.activePage===s.pages.settings&&s.route(s.pages.clear),s.lastPrimaryIntent&&s.lastPrimaryIntent.emit("hide"),Z())}}),s.addListeners({close:function(){w.stopProgressTimer(),clearTimeout(I.localTimeShiftAutoStart),m.active&&m.hide(),s.pipIntent||h.reset(),f.hide()},swap:function(){z(s.currentPlayIntent,!0)},keydown:function(e){switch(e.code){case c.stop:s.lastPrimaryIntent&&s.lastPrimaryIntent.data&&s.lastPrimaryIntent.data.stream||(h.primary.duration||s.currentPlayIntent.events.stop&&s.currentPlayIntent.events.stop.length)&&(T(),h.primary.stop(),document.body.classList.remove("transparent"),w.stopProgressTimer(),s.playerPanel.$rightText.innerText="00:00:00",s.playerPanel.$leftText.innerText="00:00:00",s.playerPanel.progressBar.set(0),s.currentPlayIntent&&s.currentPlayIntent.emit("stop",{manual:!0}));break;case c.forward:V(!0);break;case c.rewind:V(!1);break;case c.playPause:case 32:Y();break;case c.play:Y({forceResume:!0});break;case c.pause:Y({forcePause:!0});break;case c.channelNext:s.currentPlayIntent&&s.currentPlayIntent.events.nextChannel&&W(!0);break;case c.channelPrev:s.currentPlayIntent&&s.currentPlayIntent.events.prevChannel&&W(!1);break;case c.pageDown:q(!0);break;case c.pageUp:q(!1);break;case c.exit:0;break;case c.info:s.currentPlayIntent.events.onInfoPress&&s.currentPlayIntent.emit("onInfoPress");break;case c.frame:(t=h.primary.aspect)<5?t++:t=0,h.primary.aspect=t,y({text:P.aspects[t],icon:"H"});break;case c.refresh:s.pipIntent||g();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:s.currentPlayIntent.events.onNumberPress&&s.currentPlayIntent.emit("onNumberPress",{number:String.fromCharCode(e.code)});break;case c.menu:s.currentPlayIntent.data.modalMenu&&s.currentPlayIntent.data.modalMenu.length&&!x.visible&&(s.lastFocus=s.activePage.activeComponent||s.activePage,x.show())}var t}}),l.addListener("keydown",function(e){if(clearTimeout(I.panelHide),w.rewind.remote)switch(e.code){case c.right:V(!0);break;case c.left:V(!1)}else switch(e.code){case c.back:case c.info:s.route(s.pages.clear)}}),s.playerPanel.initButtons(k),s.ready(),X(),s.timeshift&&n(64),core.device&&"emulator"===core.device.model&&n(27).setValue(core.environment.playerHardwareAcceleration||!1),setTimeout(function(){a.focus()}),e.exports=l},function(e,t,n){"use strict";var i,a=n(7),r=n(1),o=n(47),s=n(48),l=n(49);function c(e){var t,n=this;(e=e||{}).className="playerPanel "+(e.className||""),e.$body=document.createElement("div"),e.$body.className="body",a.call(this,e),this.$node.appendChild(this.$bufferBar=document.createElement("div")),this.$bufferBar.className="bufferBar",this.$node.appendChild(this.$progressbar=document.createElement("div")),this.$progressbar.className="progressBar",this.$node.appendChild(this.$body),this.$body.appendChild(this.$leftText=document.createElement("div")),this.$leftText.className="leftText",this.progressBar=new o({$node:this.$progressbar}),this.bufferBar=new o({$node:this.$bufferBar}),this.$body.appendChild(t=document.createElement("div")),t.className="buttonsWrapper",this.buttons=new s({propagate:!0,data:[[""]],parent:this,className:"playerButtons",events:{"click:item":function(e){e.$item.data&&e.$item.data.click&&e.$item.data.click()}}}),this.buttons.focusIndex=function(e){return n.buttons.focusItem(n.buttons.map[0][e])},this.buttons.$links={},t.appendChild(this.buttons.$node),this.$body.appendChild(this.$rightText=document.createElement("div")),this.$rightText.className="rightText",this.init(e)}c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.init=function(e){i={chM:{icon:"ch-",click:function(){e.onChannels&&e.onChannels({direction:r.left})}},prev:{icon:"prev",click:function(){e.onPrevNext&&e.onPrevNext({direction:r.left})}},rewind:{icon:"rewind",click:function(){e.onRewind&&e.onRewind({direction:r.left})}},play:{icon:"playPause",click:function(){e.onPlay&&e.onPlay()}},forward:{icon:"forward",click:function(){e.onRewind&&e.onRewind({direction:r.right})}},next:{icon:"next",click:function(){e.onPrevNext&&e.onPrevNext({direction:r.right})}},chP:{icon:"ch+",click:function(){e.onChannels&&e.onChannels({direction:r.right})}}},this.buttons.init({propagate:!0,data:[[i.chM,i.prev,i.rewind,i.play,i.forward,i.next,i.chP]],render:l}),e.progressBar?this.progressBar.show():this.progressBar.hide()},c.prototype.focus=function(){this.buttons.focus()},c.prototype.initButtons=function(e){var t;e=e||{},this.buttons.enabledCount=0,i.chM.disable=!e.prevChannel,i.prev.disable=!e.prev,i.rewind.disable=!e.rewind,i.play.disable=!e.play,i.forward.disable=!e.forward,i.next.disable=!e.next,i.chP.disable=!e.nextChannel,(t=[i.chM,i.prev,i.rewind,i.play,i.forward,i.next,i.chP]).forEach(function(e){e.focus=!1}),this.buttons.$focusItem&&void 0!==this.buttons.$focusItem.x&&!t[this.buttons.$focusItem.x].disable&&(t[this.buttons.$focusItem.x].focus=!0),this.buttons.init({propagate:!0,data:[t]})},c.prototype.showPlayButton=function(){var e=this.buttons.$links.playPause.$icon;e.classList.remove("theme-icon-pause"),e.classList.add("theme-icon-play")},c.prototype.showPauseButton=function(){var e=this.buttons.$links.playPause.$icon;e.classList.add("theme-icon-pause"),e.classList.remove("theme-icon-play")},c.prototype.ui={DEFAULT_COLOR:"#165ACA"},c.prototype.colorize=function(e){e=e||this.ui.DEFAULT_COLOR,this.$body.style.backgroundColor=e,this.progressBar.$value.style.backgroundColor=function(e,t){var n,i,a="#";(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);for(t=t||0,i=0;i<3;i++)n=parseInt(e.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),a+=("00"+n).substr(n.length);return a}(e,2.6)},e.exports=c},function(e,t,n){"use strict";var i=n(2);function a(e){e=e||{},this.max=100,this.min=0,this.value=0,this.step=1,e.focusable=e.focusable||!1,i.call(this,e),this.$value=this.$body.appendChild(document.createElement("div")),this.$value.className="value",this.init(e)}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-progress-bar",a.prototype.set=function(e){var t=this.value;return this.value!==e&&e<=this.max&&e>=this.min&&(this.value=e,100===(e=Math.abs(this.value-this.min)/this.step)&&this.events["done"]&&this.emit("done"),this.$value.style.width=e+"%",this.events["change"]&&this.emit("change",{curr:this.value,prev:t}),!0)},a.prototype.init=function(e){void 0!==e.max&&(this.max=e.max),void 0!==e.min&&(this.min=e.min),void 0!==e.value&&(this.value=e.value),this.step=Math.abs(this.max-this.min)/100,this.$value.style.width=Math.abs(this.min-this.value)/this.step+"%"},e.exports=a},function(e,t,n){"use strict";var i=n(2),a=n(13);function r(e){e=e||{},this.map=[],this.$focusItem=null,this.data=[],this.cycleX=!0,this.cycleY=!0,this.focusX=0,this.focusY=0,i.call(this,e),this.init(e)}function o(e,t,n,i,a,r){var o,s;for(o=n;o<n+a;o++){for(e.length<o+1&&e.push([]);void 0!==e[o][t];)t++;for(s=t;s<t+i;s++)e[o].length<s+1&&e[o].push(),e[o][s]=r,void 0===r.x&&(r.x=s),void 0===r.y&&(r.y=o)}}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="spa-component-grid",r.prototype.renderItemDefault=function(e,t){e.innerText=t.value},r.prototype.renderItem=r.prototype.renderItemDefault,r.prototype.defaultEvents={mousewheel:function(e){e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:this.move(e.code);break;case a.enter:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},r.prototype.init=function(e){var t,n,i,a,r,s,l,c,u=this,d=!1,p=function(e){!0!==this.data.disable&&(u.focusItem(this),u.events["click:item"]&&u.emit("click:item",{$item:this,event:e}))},h=function(c){if(c&&u.data!==c&&(u.data=c,d=!0),e.render&&u.renderItem!==e.render&&(u.renderItem=e.render,d=!0),d){for(u.$table=document.createElement("table"),r=document.createElement("tbody"),u.data=function(e){var t,n,i;for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)"object"==typeof(i=e[t][n])?(i.colSpan=i.colSpan||1,i.rowSpan=i.rowSpan||1):i=e[t][n]={value:e[t][n],colSpan:1,rowSpan:1};return e}(u.data),t=0;t<u.data.length;t++){for(i=r.insertRow(),n=0;n<u.data[t].length;n++)(a=i.insertCell(-1)).className="item",(l=u.data[t][n]).$item=a,a.colSpan=l.colSpan,a.rowSpan=l.rowSpan,l.focus&&(s=a),l.disable&&a.classList.add("disable"),l.mark&&a.classList.add("mark"),u.renderItem(a,l),a.data=l,a.addEventListener("click",p);r.appendChild(i)}u.map=function(e){var t,n,i,a=[];for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)o(a,n,t,(i=e[t][n]).colSpan,i.rowSpan,i.$item),delete i.$item;return a}(u.data),u.$body.innerText=null,u.$table.appendChild(r),u.$body.appendChild(u.$table),s?u.focusItem(s):u.focusItem(u.map[0][0])}};void 0!==e.cycleX&&(this.cycleX=e.cycleX),void 0!==e.cycleY&&(this.cycleY=e.cycleY),e.provider&&(this.provider=e.provider,this.sizeX=e.sizeX,this.sizeY=e.sizeY),e.translate&&(this.translate=e.translate),e.provider?(c=this.provider.get(null,function(e,t){e&&u.events["data:error"]&&u.emit("data:error",e),h(u.translate(t)),u.events["data:ready"]&&u.emit("data:ready")}),this.events["data:get"]&&this.emit("data:get",{fresh:c})):h(e.data)},r.prototype.defaultTranslate=function(e){var t,n,i,a=[];for(t=0;t<this.sizeY;t++){for(i=[],n=0;n<this.sizeX;n++)i[n]=e[t*this.sizeX+n];a[t]=i}return a},r.prototype.translate=r.prototype.defaultTranslate,r.prototype.move=function(e){var t,n=this.focusX,i=this.focusY,r=!0,o=!1,s=!1;for(0;r;){switch(e){case a.up:i>0?i--:(this.cycleY&&(i=this.map.length-1,s=!0),o=!0);break;case a.down:i<this.map.length-1?i++:(this.cycleY&&(i=0,s=!0),o=!0);break;case a.right:n<this.map[i].length-1?n++:(this.cycleX&&(n=0,s=!0),o=!0);break;case a.left:n>0?n--:(this.cycleX&&(n=this.map[i].length-1,s=!0),o=!0)}n===this.focusX&&i===this.focusY&&(r=!1),this.map[i][n]!==this.map[this.focusY][this.focusX]&&!0!==this.map[i][n].data.disable&&(r=!1),o&&(r=!1,!0===this.map[i][n].data.disable&&(n=this.focusX,i=this.focusY))}this.focusItem(this.map[i][n]),this.focusX=n,this.focusY=i,o&&(this.provider&&(t=this.provider.get(e,function(e,t){var n,i;if(e&&self.events["data:error"])self.emit("data:error",e);else if(t){for(self.data=self.translate(t),n=0;n<self.sizeY-1;n++)for(i=0;i<self.sizeX;i++)self.renderItem(self.map[n][i],self.data[n][i]);self.events["data:ready"]&&self.emit("data:ready")}}),this.events["data:get"]&&this.emit("data:get",{fresh:t})),this.events["overflow"]&&this.emit("overflow",{direction:e,cycle:s})),this.focusX,this.focusY},r.prototype.focusItem=function(e){var t=this.$focusItem;return!(!e||t===e||!0===e.data.disable)&&(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.focusX=e.x,this.focusY=e.y,this.$focusItem=e,e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),!0)},r.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=r},function(e,t,n){"use strict";var i={"ch-":"theme-icon-channel-minus channels","ch+":"theme-icon-channel-plus channels",prev:"theme-icon-previous",rewind:"theme-icon-rewind",playPause:"theme-icon-pause",forward:"theme-icon-forward",next:"theme-icon-next"};e.exports=function(e,t){var n=document.createElement("div"),a=document.createElement("div");e.innerHTML="",n.className="button",a.className="theme-icon "+(i[t.icon]||""),n.appendChild(a),e.appendChild(n),e.$icon=a,this.$links&&(this.$links[t.icon]=e),t.disable||this.enabledCount++,e.data=t}},function(e,t,n){"use strict";var i=n(9);function a(e){var t,n=[];for(t=0;t<e.length;t++)n.push({click:e[t].click,items:[{className:e[t].icon},{className:"title",value:e[t].title}]});return n}function r(e){(e=e||{}).type=i.prototype.TYPE_HORIZONTAL,e.data=a(e.data),e.className="horizontalMenu "+(e.className||""),i.call(this,e)}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.init=function(e){(e=e||{}).data=a(e.data),i.prototype.init.call(this,e)},e.exports=r},function(e,t,n){"use strict";var i=n(2);function a(e){e=e||{},this.active=!1,this.activeComponent=null,i.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-page",e.exports=a},function(e,t){e.exports=[{"name":"Abkhaz","local":"",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{"name":"Afar","local":"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{"name":"Afrikaans","local":"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{"name":"Akan","local":"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{"name":"Albanian","local":"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{"name":"Amharic","local":"",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{"name":"Arabic","local":"",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{"name":"Aragonese","local":"Aragons",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{"name":"Armenian","local":"",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{"name":"Assamese","local":"",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{"name":"Avaric","local":"",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{"name":"Avestan","local":"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{"name":"Aymara","local":"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{"name":"Azerbaijani","local":"Azrbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{"name":"Bambara","local":"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{"name":"Bashkir","local":"",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{"name":"Basque","local":"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{"name":"Belarusian","local":"",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{"name":"Bengali","local":"",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{"name":"Bihari","local":"",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{"name":"Bislama","local":"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{"name":"Bosnian","local":"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{"name":"Breton","local":"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{"name":"Bulgarian","local":"",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{"name":"Burmese","local":"",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{"name":"Catalan","local":"Catal",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{"name":"Chamorro","local":"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{"name":"Chechen","local":"",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{"name":"Chichewa","local":"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{"name":"Chinese","local":"",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{"name":"Chuvash","local":"",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{"name":"Cornish","local":"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{"name":"Corsican","local":"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{"name":"Cree","local":"",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{"name":"Croatian","local":"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{"name":"Czech","local":"etina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{"name":"Danish","local":"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{"name":"Divehi","local":"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{"name":"Dutch","local":"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{"name":"Dzongkha","local":"",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{"name":"English","local":"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{"name":"Esperanto","local":"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{"name":"Estonian","local":"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{"name":"Ewe","local":"Eegbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{"name":"Faroese","local":"Froyskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{"name":"Fijian","local":"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{"name":"Finnish","local":"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{"name":"French","local":"Franais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{"name":"Fula","local":"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{"name":"Galician","local":"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{"name":"Georgian","local":"",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{"name":"German","local":"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{"name":"Greek","local":"",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{"name":"Guaran","local":"Avae'",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{"name":"Gujarati","local":"",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{"name":"Haitian","local":"Kreyl Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{"name":"Hausa","local":"",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{"name":"Hebrew","local":"",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{"name":"Herero","local":"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{"name":"Hindi","local":"",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{"name":"Hiri Motu","local":"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{"name":"Hungarian","local":"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{"name":"Interlingua","local":"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{"name":"Indonesian","local":"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{"name":"Interlingue","local":"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{"name":"Irish","local":"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{"name":"Igbo","local":"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{"name":"Inupiaq","local":"Iupiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{"name":"Ido","local":"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{"name":"Icelandic","local":"slenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{"name":"Italian","local":"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{"name":"Inuktitut","local":"",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{"name":"Japanese","local":"",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{"name":"Javanese","local":"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{"name":"Kalaallisut","local":"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{"name":"Kannada","local":"",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{"name":"Kanuri","local":"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{"name":"Kashmiri","local":"",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{"name":"Kazakh","local":"",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{"name":"Khmer","local":"",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{"name":"Kikuyu","local":"Gky",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{"name":"Kinyarwanda","local":"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{"name":"Kyrgyz","local":"",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{"name":"Komi","local":"",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{"name":"Kongo","local":"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{"name":"Korean","local":"",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{"name":"Kurdish","local":"Kurd",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{"name":"Kwanyama","local":"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{"name":"Latin","local":"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{"name":"Luxembourgish","local":"Ltzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{"name":"Ganda","local":"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{"name":"Limburgish","local":"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{"name":"Lingala","local":"Lingla",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{"name":"Lao","local":"",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{"name":"Lithuanian","local":"Lietuvi",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{"name":"Luba-Katanga","local":"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{"name":"Latvian","local":"Latvieu",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{"name":"Manx","local":"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{"name":"Macedonian","local":"",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{"name":"Malagasy","local":"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{"name":"Malay","local":"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{"name":"Malayalam","local":"",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{"name":"Maltese","local":"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{"name":"Mori","local":"Mori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{"name":"Marathi","local":"",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{"name":"Marshallese","local":"Kajin Maje",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{"name":"Mongolian","local":"",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{"name":"Nauru","local":"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{"name":"Navajo","local":"Din Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{"name":"Northern Ndebele","local":"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{"name":"Nepali","local":"",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{"name":"Ndonga","local":"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{"name":"Norwegian Bokml","local":"Norsk (Bokml)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{"name":"Norwegian Nynorsk","local":"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{"name":"Norwegian","local":"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{"name":"Nuosu","local":" Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{"name":"Southern Ndebele","local":"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{"name":"Occitan","local":"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{"name":"Ojibwe","local":"",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{"name":"Old Church Slavonic","local":"",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{"name":"Oromo","local":"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{"name":"Oriya","local":"",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{"name":"Ossetian","local":" ",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{"name":"Panjabi","local":"",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{"name":"Pli","local":"",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{"name":"Persian","local":"",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{"name":"Polish","local":"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{"name":"Pashto","local":"",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{"name":"Portuguese","local":"Portugus",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{"name":"Quechua","local":"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{"name":"Romansh","local":"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{"name":"Kirundi","local":"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{"name":"Romanian","local":"Romn",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{"name":"Russian","local":"",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{"name":"Sanskrit","local":"",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{"name":"Sardinian","local":"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{"name":"Sindhi","local":"",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{"name":"Northern Sami","local":"Smegiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{"name":"Samoan","local":"Gagana Smoa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{"name":"Sango","local":"Sng",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{"name":"Serbian","local":"",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{"name":"Gaelic","local":"Gidhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{"name":"Shona","local":"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{"name":"Sinhala","local":"",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{"name":"Slovak","local":"Slovenina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{"name":"Slovene","local":"Slovenina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{"name":"Somali","local":"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{"name":"Southern Sotho","local":"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{"name":"Spanish","local":"Espaol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{"name":"Sundanese","local":"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{"name":"Swahili","local":"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{"name":"Swati","local":"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{"name":"Swedish","local":"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{"name":"Tamil","local":"",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{"name":"Telugu","local":"",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{"name":"Tajik","local":"",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{"name":"Thai","local":"",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{"name":"Tigrinya","local":"",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{"name":"Tibetan Standard","local":"",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{"name":"Turkmen","local":"Trkmene",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{"name":"Tagalog","local":"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{"name":"Tswana","local":"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{"name":"Tonga","local":"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{"name":"Turkish","local":"Trke",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{"name":"Tsonga","local":"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{"name":"Tatar","local":"",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{"name":"Twi","local":"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{"name":"Tahitian","local":"Reo Mohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{"name":"Uyghur","local":"",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{"name":"Ukrainian","local":"",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{"name":"Urdu","local":"",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{"name":"Uzbek","local":"Ozbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{"name":"Venda","local":"Tshivena",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{"name":"Vietnamese","local":"Ting Vit",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{"name":"Volapk","local":"Volapk",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{"name":"Walloon","local":"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{"name":"Welsh","local":"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{"name":"Wolof","local":"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{"name":"Western Frisian","local":"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{"name":"Xhosa","local":"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{"name":"Yiddish","local":"",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{"name":"Yoruba","local":"Yorb",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{"name":"Zhuang","local":"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{"name":"Zulu","local":"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}]},function(e,t,n){"use strict";var i=n(0),a=!1,r={timer:null,paused:!1};window.gSTB=window.parent.gSTB,window.top.gSTB.SetTopWin(0),window.top.gSTB.SetSubtitlesFont("/usr/lib/fonts/Ubuntu.ttf"),e.exports=function(e){window.parent.stbEvent.addListener("media",function(t){33===t.code&&core.environment.hdmi_event_delay?(clearTimeout(r.timer),r.timer=setTimeout(function(){i.pipIntent&&i.pipIntent.emit("stop"),2===e.primary.state?(e.primary.pause(),r.paused=!0):r.paused=!1},1e3*core.environment.hdmi_event_delay)):32===t.code&&(clearTimeout(r.timer),r.paused&&(r.paused=!1,e.primary.resume()))}),core.plugins.standby.addListener("standbyOn",function(){2===e.primary.state&&(e.primary.pause(),a=!0)}),core.plugins.standby.addListener("standbyOff",function(){i.pipIntent&&i.pipIntent.emit("stop"),a&&(e.primary.play({uri:i.lastPlayUri}),a=!1)})}},function(e,t,n){"use strict";var i,a=n(0),r=n(1),o=n(55),s={getAd:function(e,t){e=e||this.CODE_APP_START,i=core.backend.request("/advertising?place="+e,{onload:function(e,n){!e&&n&&n.data&&t?t(e,n.data.map(function(e){return new o(e)})):e&&t?t(e,[]):t&&t(!0,[])},onerror:function(){t&&t(!0,[])}})},CODE_APP_START:201,CODE_VIDEO_CLUB_START_PLAYBACK:202,CODE_VIDEO_CLUB_DURING_PLAYBACK:203,CODE_TV_START_PLAYBACK:204,CODE_TV_DURING_PLAYBACK:205};a.addListener("keydown",function(e){e.code===r.exit&&i&&i.abort()}),e.exports=s},function(e,t,n){"use strict";function i(e){core.backend.request(e,{method:"GET"})}function a(e){e=e||{},this.tracking=e.tracking||{},this.requiredPart=e["skip_after"],this.campaign=e.campaign,this.url=e.video}a.prototype={},a.prototype.constructor=a,a.prototype.start=function(){this.tracking.start&&this.tracking.start.forEach(i)},a.prototype.quarter=function(){this.tracking.firstQuartile&&this.tracking.firstQuartile.forEach(i),this.quarter=null},a.prototype.middle=function(){this.tracking.midpoint&&this.tracking.midpoint.forEach(i),this.middle=null},a.prototype.thirdQuarter=function(){this.tracking.thirdQuartile&&this.tracking.thirdQuartile.forEach(i),this.thirdQuarter=null},a.prototype.complete=function(){this.tracking.complete&&this.tracking.complete.forEach(i)},e.exports=a},function(e,t,n){"use strict";var i,a=document.getElementById("progress"),r=a.getContext("2d"),o=a.width/2,s=a.height/2,l=3.6,c=document.getElementById("hiddenBlock"),u="#291d41";function d(e){r.clearRect(0,0,a.width,a.height),r.beginPath(),r.arc(o,s,70,Math.PI/180*270,Math.PI/180*630),r.strokeStyle="#b1b1b1",r.lineWidth="10",r.stroke(),r.beginPath(),r.strokeStyle=u,r.lineWidth="10",r.arc(o,s,70,Math.PI/180*270,Math.PI/180*(270+e*l)),r.stroke()}r.lineCap="round",(i=window.getComputedStyle(c).backgroundColor)&&(u=i),d.clear=function(){r.clearRect(0,0,a.width,a.height)},e.exports=d},function(e,t,n){"use strict";var i=document.getElementById("advertisingTitle"),a=n(58);e.exports=function(e,t){i.innerText=a(gettext("Advertising {0} of {1}"),e,t)}},function(e,t,n){"use strict";e.exports=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,n){return void 0===t[n]?e:t[n]})}},function(e,t,n){"use strict";e.exports={AUDIO_TYPES:{1:"mp2a",2:"mp3",3:"AC3",4:"AAC",5:"PCM",6:"OGG",7:"DTS"},LANGUAGES:{rus:"Russian",eng:"English",und:" "},aspects:{0:"Original",1:"Letter box",2:"Pan&Scan",3:"combined",4:"enlarged",5:"optimal"}}},function(e,t,n){"use strict";var i,a=n(61),r=n(18),o=n(9),s=n(1),l=n(0),c=[],u=new a({$node:document.getElementById("modalIntentWidget"),events:{show:function(){i.focus()},hide:function(){l.lastFocus&&l.lastFocus.focus()}}});u.add(i=new r({visible:!0,title:gettext("Actions"),children:[u.list=new o({data:[],size:0,events:{"click:item":function(){u.hide()},keydown:function(e){e.code===s.back||e.code===s.menu?(e.stop=!0,u.hide()):o.prototype.defaultEvents.keydown.call(this,e)}}})]})),u.init=function(e){var t=[];c=e,e.forEach(function(e){t.push({items:[{className:"theme-icon theme-icon-rc-"+(e.icon||""),value:""},{className:"title",value:e.title}],click:e.handler})}),u.list.init({data:t,size:t.length,focusIndex:0})},l.addListener("keydown",function(e){e.code===s.f1&&u.record&&c[0].handler&&(c[0].handler(),u.hide())}),e.exports=u},function(e,t,n){"use strict";var i=n(2);function a(e){(e=e||{}).focusable=e.focusable||!1,e.visible=e.visible||!1,i.call(this,e)}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-widget",e.exports=a},function(e,t,n){"use strict";e.exports=n(63),e.exports.prototype.name="stb-component-modal"},function(e,t,n){"use strict";var i=n(2);function a(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",i.call(this,e),this.$node.appendChild(document.createElement("div").appendChild(this.$body).parentNode)}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-modal",e.exports=a},function(e,t,n){"use strict";var i=n(0),a=n(3);i.timeshift.addListener("buffer:pause:full",function(){a.primary.position=12,a.primary.resume()}),i.timeshift.addListener("buffer:full",function(){var e;i.timeshift.cyclic&&(e=a.primary.position,a.primary.position=e,core.notify({title:gettext("Timeshift buffer is full"),icon:"alert",timeout:3e3}))}),i.timeshift.addListener("buffer:almost:full",function(){core.notify({title:gettext("1 minute before timeshift buffer turns full"),icon:"alert",timeout:3e3})}),i.timeshift.addListener("storage:unavailable",function(){core.notify({title:gettext("USB storage unavailable"),icon:"alert",timeout:3e3})}),i.timeshift.addListener("storage:full",function(){core.notify({title:gettext("USB storage is full"),icon:"alert",timeout:3e3})})},function(e,t,n){"use strict";var i=new(n(10))({$node:document.getElementById("pClear")}),a=n(3),r=n(66),o=n(0),s=n(1),l=n(6).checkAppByPid,c=n(11),u=n(68)(i),d=new r({focusable:!0});i.panel=d,i.add(d),i.addListeners({keydown:function(e){switch(e.code){case s.ok:o.route(o.pages.main);break;case s.back:o.currentIntent.data.exitWithConfirm?u(function(e){e&&(o.currentIntent.close(!0),o.emit("close"),c(),a.primary.stop())}):o.currentIntent.data.persistent&&l(o.currentIntent.creator)?o.currentIntent.show(o.currentIntent.creator,{reasonToggleView:!0}):(o.currentIntent.close(),c(),a.primary.stop(),o.emit("close"));break;case s.left:o.rewind(!1);break;case s.right:o.rewind(!0);break;case s.up:o.nextPrevContent(!0);break;case s.down:o.nextPrevContent(!1)}},click:function(){o.route(o.pages.main)},show:function(){d.focus()}}),e.exports=i},function(e,t,n){"use strict";e.exports=n(67),e.exports.prototype.name="stb-component-panel"},function(e,t,n){"use strict";var i=n(2);function a(e){(e=e||{}).focusable=e.focusable||!1,i.call(this,e)}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-panel",e.exports=a},function(e,t,n){"use strict";var i,a,r,o=n(0),s=n(18),l=n(9);r=new s({title:gettext("Exit"),events:{show:function(){this.children[0].focus()},hide:function(){a.focus()},keydown:function(e){e.stop=!0}},children:[new l({className:"padded",focusIndex:0,size:2,data:[{items:[{value:gettext("Yes")}],click:function(){i(!0),r.hide()}},{items:[{value:gettext("No")}],click:function(){i(!1),r.hide()}}]})]}),core.addListener("hide",function(){r.hide()}),e.exports=function(e){return e.add(r),function(e){o.activePage&&o.activePage.activeComponent&&(a=o.activePage.activeComponent),i=e,r.show()}}},function(e,t,n){"use strict";var i,a,r,o,s,l,c=new(n(10))({$node:document.getElementById("pSettings")}),u=n(0),d=n(1),p=n(70),h=n(71),m=n(9),f=n(72),v=n(73)(c),y=n(15);function g(e,t){return"function"==typeof t&&(t=t()),[{className:e},{value:t}]}i=[{items:g("theme-icon theme-icon-volume",_("Sound")),options:n(75),title:_("Sound")},{items:g("theme-icon theme-icon-display",_("Display")),options:n(76),title:_("Display")}],core.device&&"emulator"===core.device.model&&i.push({items:g("theme-icon theme-icon-monitor",_("Video")),options:n(27),title:_("Video")}),a=new p({panels:[new h({title:_("Settings"),children:[r=new m({data:i})]}),new h({title:_("Sound"),main:!0,children:[o=new m]}),new h({title:_("Info"),children:[s=new f({propagate:!0})]})]}),c.add(a),o.emit("focus:item",{$curr:o.$focusItem}),r.addListener("focus:item",function(e){a.panels[1].$title.$node.childNodes[0].innerText=e.$curr.layout.data[1].value,"function"==typeof e.$curr.data.options?o.setData({data:e.$curr.data.options(),focusIndex:0}):o.setData({data:e.$curr.data.options,focusIndex:0}),o.emit("focus:item",{$curr:o.$focusItem})}),o.addListener("focus:item",function(e){s.$body.innerText=e.$curr.data.description||"",s.init()}),o.addListener("click:item",function(e){var t=e.$item.data;"checkBox"===t.type?t.setValue(!t.getValue(),e.$item):(a.blur(),u.activePage.activeComponent.blur(),v({title:t.items[1].value,data:t.options,getOptions:t.getOptions,getFocusIndex:t.getFocusIndex,handler:t.handler,onShow:function(){},onHide:function(){setTimeout(function(){a.focus()},37)}}))}),c.addListener("keydown",function(e){switch(e.code){case d.back:if(!c.activeComponent)return;l&&(l=!1,y.show()),u.route(u.pages.main);break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e.stop=!0}}),c.addListener("show",function(){a.panels[0].focus(),r.focusIndex(0),y.active&&(l=!0,y.hide())}),e.exports=c},function(e,t,n){"use strict";var i=n(7),a=n(1);function r(e){var t,n=this;function r(e){switch(e.code){case a.left:n.focusIndex>0&&n.panels[n.focusIndex-1].focus();break;case a.right:n.focusIndex<n.panels.length-1&&n.panels[n.focusIndex+1].focus()}}for((e=e||{}).focusable=e.focusable||!1,i.call(this,e),this.panels=e.panels,this.focusIndex=0,e.panels&&!e.panels[0].main&&(e.panels[0].$node.classList.add("left"),e.panels[0].$node.classList.add("expand")),e.panels&&e.panels[1]&&e.panels[1].main&&e.panels[1].$node.classList.add("position-right"),e.panels&&e.panels[2]&&e.panels[1].main&&e.panels[2].$node.classList.add("right"),e.panels&&this.add.apply(this,e.panels),t=0;t<this.panels.length;t++)this.panels[t].addListeners({keydown:r}),this.panels[t].index=t}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-panel-set",r.prototype.focus=function(){i.prototype.focus.call(this),this.panels[this.focusIndex].focus()},r.prototype.blur=function(){this.panels[this.focusIndex].blur()},e.exports=r},function(e,t,n){"use strict";var i=n(7),a=n(21);function r(e){var t;e=e||{},this.size=1,this.main=!1,this.index=0,e.$body=document.createElement("div"),e.$body.className="body",i.call(this,e),e.size&&(this.size=e.size,this.$node.classList.add("size"+e.size)),e.main&&(this.main=!0,this.$node.classList.add("main")),this.$shadow={left:document.createElement("div"),right:document.createElement("div")},this.$shadow.left.className="shadow left",this.$node.appendChild(this.$shadow.left),this.$shadow.right.className="shadow right",this.$node.appendChild(this.$shadow.right),e.title&&(Array.isArray(e.title)||(e.title=[e.title]),this.$title=new a({className:"title",data:e.title,focusable:!1}),this.$node.appendChild(this.$title.$node)),this.$node.appendChild(this.$body),(t=document.createElement("div")).className="overlay",this.$node.appendChild(t)}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-panel",r.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},r.prototype.focus=function(){this.focusable&&(this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),i.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand")))},r.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),i.prototype.blur.call(this)},e.exports=r},function(e,t,n){"use strict";var i=n(2),a=n(1);function r(e){(e=e||{}).$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,i.call(this,e),this.$node.appendChild(this.$body),this.init(e)}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="mag-component-scroll-area",r.prototype.defaultEvents={keydown:function(e){switch(e.code){case a.up:case a.down:this.move(e.code)}},mousewheel:function(e){this.move(e.wheelDeltaY>0?a.up:a.down)}},r.prototype.move=function(e){var t=screen.height,n=this.viewHeight-this.realHeight;if(n<0)switch(e){case a.down:if(this.topPosition-this.step*t/100<n)return this.scroll.scrollTo(-n),this.$body.style.top=n+"px",void this.emit("overflow",{direction:e});this.topPosition-=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case a.up:if(this.topPosition+this.step*t/100>0)return this.scroll.scrollTo(0),this.$body.style.top="0px",void this.emit("overflow",{direction:e});this.topPosition+=Math.ceil(this.step*t/100),this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}else this.emit("overflow",{direction:e})},r.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=r},function(e,t,n){"use strict";var i=n(18),a=n(20),r=new(n(74)),o=new a({data:[],size:0,className:"padded",cycle:!0,scroll:r,events:{"click:item":function(e){o.clickHandler(e.$item.data.valueToSet),s.hide()}},propagate:!0}),s=new i({className:"modalPopUp",children:[o],title:"asd"});function l(e){var t,n=0;(e=e||{}).data?t=e.data:e.getOptions&&(t=e.getOptions()),e.getFocusIndex&&(n=e.getFocusIndex()),s.$text.innerText=e.title,o.clickHandler=e.handler,setTimeout(function(){o.init({data:t.map(function(e){return{value:e.title,valueToSet:e.value}}),scroll:r,size:t.length>5?5:t.length,focusIndex:n}),s.events=s.events||{},e.onHide&&(s.events.hide=[e.onHide]),setTimeout(function(){s.show(),s.focus()},100)},40)}s.$body.appendChild(r.$node),e.exports=function(e){return e.add(s),e.addListener("hide",function(){s.hide()}),l}},function(e,t,n){"use strict";var i=n(2);function a(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),i.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.prototype.name="spa-component-scrollbar",a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.init=function(e){void 0!==(e=e||{}).realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},a.prototype.scrollTo=function(e){return this.value!==e&&(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events["change"]&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events["done"]&&this.emit("done")),this.value=e,!0)},e.exports=a},function(e,t,n){"use strict";var i=n(0),a=n(3),r=n(14),o=[];function s(e,t){return[{className:e},{value:t}]}i.config.disableSoundOptions.indexOf(core.device.model)<0&&(o.push({items:s("theme-icon theme-icon-volume",gettext("Mute")),options:[{title:gettext("Mute On"),value:!0},{title:gettext("Mute off"),value:!1}],handler:function(e){core.plugins.settingsAudio&&(core.plugins.settingsAudio.mute=e)},description:gettext("Mute all sound")}),o.push({items:s("theme-icon theme-icon-volume",gettext("Volume level")),options:[0,1,2,3,4,5,6,7,8,9,10].map(function(e){return{value:10*e,title:(10*e).toString()}}),getFocusIndex:function(){return parseInt(i.audioManager.list[0].volume/10,10)},handler:function(e){core.plugins.settingsAudio&&(core.plugins.settingsAudio.volume=e)},description:gettext("Change volume level")})),o.push({items:s("theme-icon theme-icon-subtitles",gettext("Sound track")),description:gettext("Change audio track language"),getFocusIndex:function(){var e,t=a.primary.audioPID;if(a.primary.audioTracks.length<1)return 0;for(e=0;e<a.primary.audioTracks.length;e++)if(a.primary.audioTracks[e].pid===t)return e;return 0},getOptions:function(){var e=[];return a.primary.audioTracks.forEach(function(t){var n;t.lang&&t.lang.length&&"und"!==t.lang[0]?(n=t.lang[0],n=(n=r["1"][n]||r["2T"][n]||r["2B"][n]||[""])[0]):n=gettext("Track")+" "+t.pid,e.push({value:t.pid,title:n})}),e},handler:function(e){a.primary.audioPID=e}}),e.exports=o},function(e,t,n){"use strict";var i,a=n(0),r=n(3),o=n(22),s=n(14),l=["utf-8","cp1250","cp1251","cp1252","cp1253","cp1254","cp1255","cp1256","cp1257","cp1258","iso8859-1","iso8859-2","iso8859-3","iso8859-4","iso8859-5","iso8859-6","iso8859-7","iso8859-8","iso8859-9","iso8859-10","iso8859-11","iso8859-12","iso8859-13","iso8859-14","iso8859-15","iso8859-16"];function c(e,t){return[{className:e},{value:t}]}e.exports=[{items:c("theme-icon theme-icon-aspect",gettext("Aspect")),options:[{title:gettext("Original"),value:0},{title:gettext("Letter box"),value:1},{title:gettext("Pan&Scan"),value:2},{title:gettext("combined"),value:3},{title:gettext("enlarged"),value:4},{title:gettext("optimal"),value:5}],handler:function(e){r.primary.aspect=e},getFocusIndex:function(){return r.primary.aspect},description:gettext("Change video conversation mode")},{items:c("theme-icon theme-icon-subtitles",gettext("Subtitles")),description:gettext("Enable/disable or change subtitles for current content playback"),handler:function(e){"number"==typeof e||null===e?(r.primary.subtitlesPID=e,a.playback.subtitles.current={pid:e,lang:[]},i=null):e&&e.getUri?(i=e,e.getUri(function(e,t){!e&&t?r.primary.loadExternalSubtitles(t):core.notify({title:gettext("Can not load external subtitle link"),icon:"alert",type:"error",timeout:2e3})})):e&&e.uri&&(i=e,r.primary.loadExternalSubtitles(e.uri))},getOptions:function(){var e=[{value:null,title:gettext("Off")}];return a.playback.subtitles.list.forEach(function(t){var n;t.lang&&t.lang.length&&"und"!==t.lang[0]?(n=t.lang[0],n=(n=s["1"][n]||s["2T"][n]||s["2B"][n]||[gettext("Track")+" "+t.lang[0]])[0]):n=gettext("Track")+" "+t.pid,e.push({title:n,value:t.pid})}),a.lastPrimaryIntent&&a.lastPrimaryIntent.data.subtitles&&a.lastPrimaryIntent.data.subtitles.forEach(function(t){var n;n=t.lang||"",n=(n=s["1"][n]||s["2T"][n]||s["2B"][n]||[""])[0],e.push({title:t.title||n||gettext("External track"),value:t,external:!0})}),e},getFocusIndex:function(){var e,t,n,s=0;return n=o(r.primary.subtitlesTracks,function(e){return e.pid===r.primary.subtitlesPID}),i&&a.lastPrimaryIntent&&a.lastPrimaryIntent.data.subtitles&&(e=a.lastPrimaryIntent.data.subtitles.slice(0),(t=o(e,function(e){return e===i}))>-1&&(n+=t)),n>=0&&(s=n+1),r.primary.enableSubtitles||(s=0),s}},{items:c("theme-icon theme-icon-subtitles",gettext("Subtitles encoding")),description:gettext("Encoding which will be used to display external subtitles."),handler:function(e){r.subtitlesEncoding=e},options:l.map(function(e){return{title:e,value:e}}),getFocusIndex:function(){var e=o(l,function(e){return e===r.subtitlesEncoding});return e>-1?e:0}}]},function(e,t,n){"use strict";var i=new(n(10))({$node:document.getElementById("pAdvertising"),focusable:!1}),a=n(78),r=n(1),o=n(24),s=n(23),l=new a({$node:document.getElementById("skipButton"),value:gettext("Skip ad"),events:{hide:function(){this.blur(),this.events.click=[]}}}),c=document.createElement("div");c.className="theme-icon theme-icon-next",l.$node.appendChild(c),i.add(l),i.addListener("show",function(e){l.hide()}),i.addListener("keydown",function(e){e.code===r.exit?(o.stop(),l.hide()):e.code!==r.set&&e.code!==r.app||(o.stop(),l.hide(),core.call("blur"),core.call("hide"))}),s.addListener("button:show",function(e){l.once("click",function(){s.emit("skip",{target:e.target,done:e.done}),l.hide()}),l.show(),l.focus()}),s.addListener("button:hide",function(){l.hide()}),e.exports=i},function(e,t,n){"use strict";e.exports=n(79),e.exports.prototype.name="stb-component-button"},function(e,t,n){"use strict";var i=n(2),a=n(13);function r(e){e=e||{},i.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.name="spa-component-button",r.prototype.clickDuration=200,r.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===a.enter&&this.events["click"]&&this.emit("click",{event:e})}},e.exports=r}]);
//# sourceMappingURL=main.js.map